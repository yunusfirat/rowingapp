!function(){"use strict";window.deltatre=window.deltatre||{};var d3=window.deltatre;d3.IS_DEBUG=/isdebug/i.test(document.location.href),d3.Trace=function(){window.console&&d3.IS_DEBUG===!0&&(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?console.log.apply(console,arguments):console.log(Array.prototype.slice.call(arguments)))},d3.namespace=function(name){var build=function(parts){var part=parts.splice(0,1);return root[part]||(root[part]={}),root=root[part],0===parts.length?root:build(parts)},root=window,parts=name.split(".");return"window"===parts[0]&&parts.splice(0,1),build(parts)},d3.create=function(){var prototype=arguments[0],constructor=d3.namespace(prototype.extend),pars=Array.prototype.slice.call(arguments,1),child=function(){};child.prototype=prototype;var parent,obj=new child;if(constructor.extend){pars[1]=this.util.extend(prototype.options||{},pars[1]);var p=[constructor].concat(pars);parent=this.create.apply(obj,p)}else parent=constructor.apply(obj,pars);obj.base=parent;var attrname;for(attrname in parent)parent.hasOwnProperty(attrname)&&(obj[attrname]=obj[attrname]||parent[attrname]);return obj},d3.util=function(){var getUrlParameters,getQueryString,getHashParameters,splitQueryString,extend;return getUrlParameters=function(){var search=document.location.search;if(!search)return{};var q=search.substr(1);return _pars=splitQueryString(q),_pars},getHashParameters=function(){var hash=document.location.hash;if(!hash)return{};var q=hash.substr(1);return splitQueryString(q)},splitQueryString=function(q){var pars=q.split("&"),qq={},i=0;for(i=0;i<pars.length;i++){var ret=pars[i].toString().split("=");qq[ret[0]]=decodeURIComponent(ret[1])}return qq},getQueryString=function(pars){var value,key,q="";for(key in pars)pars.hasOwnProperty(key)&&(value=pars[key],"undefined"!=typeof key&&null!==value&&(q+="&"+key+"="+encodeURIComponent(value)));return q.length>0&&(q=q.substr(1)),q},extend=function(obj1,obj2){var attrname,obj3={};for(attrname in obj1)obj1.hasOwnProperty(attrname)&&(obj3[attrname]=obj1[attrname]);for(attrname in obj2)obj2.hasOwnProperty(attrname)&&(obj3[attrname]=obj2[attrname]);return obj3},{getUrlParameters:getUrlParameters,getHashParameters:getHashParameters,getQueryString:getQueryString,extend:extend}}()}(),function($,win){"use strict";var d3=win.deltatre,trace=d3.Trace;$.fn.d3Plugin=function(options,pluginName){return this.each(function(){var $this=$(this);if(!d3[pluginName])return void trace(pluginName+" doesn't exists");var plugin=new d3[pluginName]($this,options);plugin.init()})};var core=function(){var handlers={},_guid=0,setSize,extractUrls,existPlugin,getDevicePixelRatio,bindScrollTop,injectPlugin,launchPlugin,bindPrintButton,checkIsPrintVersion,trigger,addListener,removeListener,checkEvent;trigger=function(eventName,eventData,publisher){if(publisher=publisher||_this,publisher.guid){var guid=publisher.guid;checkEvent(guid,eventName);var evtRegistrationList=handlers[guid][eventName].slice(0);0!==evtRegistrationList.length&&$.each(evtRegistrationList,function(){var reg=this,data=$.extend({publisher:publisher},reg.customData,eventData);try{reg.funct.call(reg.scope,data)}catch(ex){trace(ex)}})}},removeListener=function(eventName,eventCallback,publisher){if(publisher=publisher||_this,publisher.guid){var guid=publisher.guid;if(handlers[guid]){var cb=handlers[guid];if(cb[eventName]){var ii,evt,evtRegistrationList=cb[eventName],nn=evtRegistrationList.length;for(ii=0;nn>ii;ii++)if(evt=evtRegistrationList[ii],evt.funct===eventCallback){evtRegistrationList=evtRegistrationList.splice(ii+1,1);break}handlers[guid][eventName]=evtRegistrationList}}}},addListener=function(eventName,eventCallback,publisher,customData){publisher=publisher||this,publisher.guid||(publisher.guid=++_guid);var guid=publisher.guid;checkEvent(guid,eventName);var evtRegistration={scope:publisher,funct:eventCallback,customData:customData};handlers[guid][eventName].push(evtRegistration)},checkEvent=function(guid,eventName){handlers[guid]=handlers[guid]||{},handlers[guid][eventName]=handlers[guid][eventName]||[]};var launchPlugins,loadScript,getPixelRatio,execFullPagePlugins;launchPlugins=function($elements,sel){sel||(sel=".d3-plugin");var plugin,ii,$el,$list=$elements.find(sel),nn=$list.length;for(ii=0;nn>ii;ii++)$el=$list.eq(ii),plugin=$el.data("plugin"),plugin?launchPlugin($el,plugin):(trace("can not find data-plugin for element"),trace($el))},execFullPagePlugins=function(){var $plugins=$.find("[data-plugin]");$("[data-plugin]").each(function(){var pluginName=$(this).data("plugin");if(!pluginName||void 0===pluginName||""===pluginName)return trace("Wrong plugin definition"),void trace($(this));var options=$(this).data("options");"[object String]"==Object.prototype.toString.call(options)&&(options=eval("("+$(this).data("options")+")"));var pluginOptions=$(this).data("pluginoptions");"[object String]"==Object.prototype.toString.call(pluginOptions)&&(pluginOptions=eval("("+pluginOptions+")")),options.pluginOptions=pluginOptions;try{$(this).d3Plugin(options,pluginName)}catch(err){console.log(err)}})},loadScript=function(id,src,loadCallback){var d=document,s="script";if(d.getElementById(id))return void(loadCallback&&loadCallback());var scripts=d.getElementsByTagName(s),fjs=scripts[scripts.length-1],js=d.createElement(s);if(js.id=id,js.type="text/javascript",js.async=!0,js.src=src,"undefined"!=typeof cacheBurner&&js.src){var xp=js.src.indexOf("?")>-1?"&":"?";js.src+=xp+cacheBurner}loadCallback&&(js.addEventListener?js.addEventListener("load",loadCallback,!1):js.readyState&&(js.onreadystatechange=function(){("loaded"===js.readyState||"complete"===js.readyState)&&loadCallback()})),fjs.parentNode.insertBefore(js,fjs)},getDevicePixelRatio=function(){var t=1,n=window;return void 0!==n.screen.systemXDPI&&void 0!==n.screen.logicalXDPI&&n.screen.systemXDPI>n.screen.logicalXDPI?t=n.screen.systemXDPI/n.screen.logicalXDPI:void 0!==n.devicePixelRatio&&(t=n.devicePixelRatio),t},bindScrollTop=function(){var $arrow=$(".js-arrow"),NN=400;$arrow.hide(),$(window).scroll(function(){$(this).scrollTop()>NN?$arrow.stop(!0,!0).fadeIn():$arrow.stop(!0,!0).fadeOut()}),$arrow.find(".js-arrow-top").click(function(){return $("html, body").animate({scrollTop:0},500),!1})},launchPlugin=function($elements,pn){var $el,o;$elements.each(function(i,el){$el=$(el),o=$el.data("options"),$el.d3Plugin(o,pn)})},existPlugin=function(pn){return!!d3[pn]};var _this={trigger:trigger,addListener:addListener,removeListener:removeListener,launchPlugin:launchPlugin,launchPlugins:launchPlugins,execFullPagePlugins:execFullPagePlugins,loadScript:loadScript,getDevicePixelRatio:getDevicePixelRatio,bindScrollTop:bindScrollTop,bindPrintButton:bindPrintButton,checkIsPrintVersion:checkIsPrintVersion};return _this};d3.core=new core}(jQuery,window),+function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var previous=$ul.find(".active:last a")[0],e=$.Event("show.bs.tab",{relatedTarget:previous});if($this.trigger(e),!e.isDefaultPrevented()){var $target=$(selector);this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown.bs.tab",relatedTarget:previous})})}}},Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),$(this).tab("show")})}(jQuery),+function($){"use strict";var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},Collapse.DEFAULTS,options),this.transitioning=null,this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.DEFAULTS={toggle:!0},Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},Collapse.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var startEvent=$.Event("show.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var actives=this.$parent&&this.$parent.find("> .panel > .in");if(actives&&actives.length){var hasData=actives.data("bs.collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0),this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)[dimension](this.$element[0][scrollSize])}}},Collapse.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var startEvent=$.Event("hide.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var complete=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return $.support.transition?void this.$element[dimension](0).one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350):complete.call(this)}}},Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.collapse"),options=$.extend({},Collapse.DEFAULTS,$this.data(),"object"==typeof option&&option);!data&&options.toggle&&"show"==option&&(option=!option),data||$this.data("bs.collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})},$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var href,$this=$(this),target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),$target=$(target),data=$target.data("bs.collapse"),option=data?"toggle":$this.data(),parent=$this.attr("data-parent"),$parent=parent&&$(parent);data&&data.transitioning||($parent&&$parent.find('[data-toggle=collapse][data-parent="'+parent+'"]').not($this).addClass("collapsed"),$this[$target.hasClass("in")?"addClass":"removeClass"]("collapsed")),$target.collapse(option)})}(jQuery),+function($){"use strict";function clearMenus(e){$(backdrop).remove(),$(toggle).each(function(){var $parent=getParent($(this)),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget))})}function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}var backdrop=".dropdown-backdrop",toggle="[data-toggle=dropdown]",Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget),$this.focus()}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();var desc=" li:not(.divider):visible a",$items=$parent.find("[role=menu]"+desc+", [role=listbox]"+desc);if($items.length){var index=$items.index($items.filter(":focus"));38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).focus()}}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle+", [role=menu], [role=listbox]",Dropdown.prototype.keydown)}(jQuery),+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one($.support.transition.end,function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd()})}(jQuery),+function($){"use strict";var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Tooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show()},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var that=this,$tip=this.tip();this.setContent(),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent(),orgPlacement=placement,docScroll=document.documentElement.scrollTop||document.body.scrollTop,parentWidth="body"==this.options.container?window.innerWidth:$parent.outerWidth(),parentHeight="body"==this.options.container?window.innerHeight:$parent.outerHeight(),parentLeft="body"==this.options.container?0:$parent.offset().left;placement="bottom"==placement&&pos.top+pos.height+actualHeight-docScroll>parentHeight?"top":"top"==placement&&pos.top-docScroll-actualHeight<0?"bottom":"right"==placement&&pos.right+actualWidth>parentWidth?"left":"left"==placement&&pos.left-actualWidth<parentLeft?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement),this.hoverState=null;var complete=function(){that.$element.trigger("shown.bs."+that.type)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if("top"==placement&&actualHeight!=height&&(replace=!0,offset.top=offset.top+height-actualHeight),/bottom|top/.test(placement)){var delta=0;offset.left<0&&(delta=-2*offset.left,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");replace&&$tip.offset(offset)},Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.trigger("hidden.bs."+that.type)}var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete(),this.hoverState=null,this)},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option;(data||"destroy"!=option)&&(data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),+function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),Popover.prototype.constructor=Popover,Popover.prototype.getDefaults=function(){return Popover.DEFAULTS},Popover.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content")[this.options.html?"string"==typeof content?"html":"append":"text"](content),$tip.removeClass("fade top bottom left right in"),$tip.find(".popover-title").html()||$tip.find(".popover-title").hide()},Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()},Popover.prototype.getContent=function(){var $e=this.$element,o=this.options;return $e.attr("data-content")||("function"==typeof o.content?o.content.call($e[0]):o.content)},Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},Popover.prototype.tip=function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip};var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.popover"),options="object"==typeof option&&option;(data||"destroy"!=option)&&(data||$this.data("bs.popover",data=new Popover(this,options)),"string"==typeof option&&data[option]())})},$.fn.popover.Constructor=Popover,$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(jQuery),+function($){"use strict";var Button=function(element,options){this.$element=$(element),this.options=$.extend({},Button.DEFAULTS,options),this.isLoading=!1};Button.DEFAULTS={loadingText:"loading..."},Button.prototype.setState=function(state){var d="disabled",$el=this.$element,val=$el.is("input")?"val":"html",data=$el.data();state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout($.proxy(function(){"loadingText"==state?(this.isLoading=!0,$el.addClass(d).attr(d,d)):this.isLoading&&(this.isLoading=!1,$el.removeClass(d).removeAttr(d))},this),0)},Button.prototype.toggle=function(){var changed=!0,$parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");"radio"==$input.prop("type")&&($input.prop("checked")&&this.$element.hasClass("active")?changed=!1:$parent.find(".active").removeClass("active")),changed&&$input.prop("checked",!this.$element.hasClass("active")).trigger("change")}changed&&this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.button"),options="object"==typeof option&&option;data||$this.data("bs.button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle"),e.preventDefault()})}(jQuery),+function($){"use strict";var Modal=function(element,options){this.options=options,this.$element=$(element),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this[this.isShown?"hide":"show"](_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show().scrollTop(0),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one($.support.transition.end,function(){that.$element.focus().trigger(e)}).emulateTransitionEnd(300):that.$element.focus().trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()):callback&&callback()};var old=$.fn.modal;$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.modal(option,this).one("hide",function(){$this.is(":visible")&&$this.focus()})}),$(document).on("show.bs.modal",".modal",function(){$(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){$(document.body).removeClass("modal-open")})}(jQuery),function($){"$:nomunge";function p_doTimeout(jquery_data_key){function cleanup(){jquery_data_key?elem.removeData(jquery_data_key):id&&delete cache[id]}function actually_setTimeout(){data.id=setTimeout(function(){data.fn()},delay)}var elem,that=this,data={},method_base=jquery_data_key?$.fn:$,args=arguments,slice_args=4,id=args[1],delay=args[2],callback=args[3];if("string"!=typeof id&&(slice_args--,id=jquery_data_key=0,delay=args[1],callback=args[2]),jquery_data_key?(elem=that.eq(0),elem.data(jquery_data_key,data=elem.data(jquery_data_key)||{})):id&&(data=cache[id]||(cache[id]={})),data.id&&clearTimeout(data.id),delete data.id,
callback)data.fn=function(no_polling_loop){"string"==typeof callback&&(callback=method_base[callback]),callback.apply(that,aps.call(args,slice_args))!==!0||no_polling_loop?cleanup():actually_setTimeout()},actually_setTimeout();else{if(data.fn)return void 0===delay?cleanup():data.fn(delay===!1),!0;cleanup()}}var cache={},doTimeout="doTimeout",aps=Array.prototype.slice;$[doTimeout]=function(){return p_doTimeout.apply(window,[0].concat(aps.call(arguments)))},$.fn[doTimeout]=function(){var args=aps.call(arguments),result=p_doTimeout.apply(this,[doTimeout+args[0]].concat(args));return"number"==typeof args[0]||"number"==typeof args[1]?this:result}}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t+b:-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t*t+b:c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return 0==t?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){return 0==t?b:t==d?b+c:(t/=d/2)<1?c/2*Math.pow(2,10*(t-1))+b:c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){return(t/=d/2)<1?-c/2*(Math.sqrt(1-t*t)-1)+b:c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*d-s)*Math.PI/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin(2*(t*d-s)*Math.PI/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(2==(t/=d/2))return b+c;if(p||(p=.3*d*1.5),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return 1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*d-s)*Math.PI/p)+b:a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*d-s)*Math.PI/p)*.5+c+b},easeInBack:function(x,t,b,c,d,s){return void 0==s&&(s=1.70158),c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){return void 0==s&&(s=1.70158),c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){return void 0==s&&(s=1.70158),(t/=d/2)<1?c/2*t*t*(((s*=1.525)+1)*t-s)+b:c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){return(t/=d)<1/2.75?7.5625*c*t*t+b:2/2.75>t?c*(7.5625*(t-=1.5/2.75)*t+.75)+b:2.5/2.75>t?c*(7.5625*(t-=2.25/2.75)*t+.9375)+b:c*(7.5625*(t-=2.625/2.75)*t+.984375)+b},easeInOutBounce:function(x,t,b,c,d){return d/2>t?.5*jQuery.easing.easeInBounce(x,2*t,0,c,d)+b:.5*jQuery.easing.easeOutBounce(x,2*t-d,0,c,d)+.5*c+b}}),function($,window,undefined){var hasOnProgress="onprogress"in $.ajaxSettings.xhr();if(hasOnProgress){var oldXHR=$.ajaxSettings.xhr;$.ajaxSettings.xhr=function(){var xhr=oldXHR();return xhr instanceof window.XMLHttpRequest&&xhr.addEventListener("progress",this.progress,!1),xhr.upload&&xhr.upload.addEventListener("progress",this.progress,!1),xhr}}}(jQuery,window),function($,window){"use strict";function _init(options){settings=$.extend({},defaults,options),pub.update()}function _respond(){$pictures.each(function(){for(var $target=$(this),$image=$target.find("img"),$sources=$target.find(settings.sourceSelector+",.mimeo-source"),index=!1,i=0,count=$sources.length;count>i;i++){var match=$sources.eq(i).data("mimeo-match");match&&match.matches&&(index=i)}index===!1&&(index=$sources.length-1),$image.attr("src",$sources.eq(index).attr("src")),$target.trigger("change.mimeo")})}var $pictures=($(window),null),pixelRatio="undefined"!=typeof window.devicePixelRatio?Math.ceil(window.devicePixelRatio):1,defaults={containerSelector:"picture",sourceSelector:"source",useDataAttributes:!1,mediaSelector:"media",srcsetSelector:"srcset"},settings={},pub={update:function(){$pictures=$(settings.containerSelector).each(function(i,picture){for(var $sources=$(picture).find(settings.sourceSelector),j=0,count=$sources.length;count>j;j++){var $source=$sources.eq(j),media=settings.useDataAttributes?$source.data(settings.mediaSelector):$source.attr(settings.mediaSelector),srcset=settings.useDataAttributes?$source.data(settings.srcsetSelector):$source.attr(settings.srcsetSelector);if(srcset){var sources={},ratio=1;srcset=srcset.split(",");for(var k in srcset)if(srcset.hasOwnProperty(k)){var s=srcset[k].trim().split(" "),r=parseInt(s[1],10);r>ratio&&pixelRatio>=r&&(ratio=r),sources[r]=s[0]}$source.data("mimeo-sources",sources).attr("src",sources[ratio])}if(media){var _mq=window.matchMedia(media.replace(1/0,"100000px"));_mq.addListener(_respond),$source.data("mimeo-match",_mq)}}}),_respond()}};$.mimeo=function(options){_init(options)}}(jQuery,window),function(n){function u(b,f){var c,a=this,e=window.navigator,g=e.userAgent.toLowerCase();a.uid=n.rsModules.uid++,a.ns=".rs"+a.uid;var r,d=document.createElement("div").style,h=["webkit","Moz","ms","O"],k="",l=0;for(c=0;c<h.length;c++)r=h[c],!k&&r+"Transform"in d&&(k=r),r=r.toLowerCase(),window.requestAnimationFrame||(window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]);window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){var c=(new Date).getTime(),d=Math.max(0,16-(c-l)),e=window.setTimeout(function(){a(c+d)},d);return l=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),a.isIPAD=g.match(/(ipad)/),a.isIOS=a.isIPAD||g.match(/(iphone|ipod)/),c=function(a){return a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],{browser:a[1]||"",version:a[2]||"0"}}(g),h={},c.browser&&(h[c.browser]=!0,h.version=c.version),h.chrome&&(h.webkit=!0),a._a=h,a.isAndroid=-1<g.indexOf("android"),a.slider=n(b),a.ev=n(a),a._b=n(document),a.st=n.extend({},n.fn.royalSlider.defaults,f),a._c=a.st.transitionSpeed,a._d=0,!a.st.allowCSS3||h.webkit&&!a.st.allowCSS3OnWebkit||(c=k+(k?"T":"t"),a._e=c+"ransform"in d&&c+"ransition"in d,a._e&&(a._f=k+(k?"P":"p")+"erspective"in d)),k=k.toLowerCase(),a._g="-"+k+"-",a._h="vertical"===a.st.slidesOrientation?!1:!0,a._i=a._h?"left":"top",a._j=a._h?"width":"height",a._k=-1,a._l="fade"===a.st.transitionType?!1:!0,a._l||(a.st.sliderDrag=!1,a._m=10),a._n="z-index:0; display:none; opacity:0;",a._o=0,a._p=0,a._q=0,n.each(n.rsModules,function(b,c){"uid"!==b&&c.call(a)}),a.slides=[],a._r=0,(a.st.slides?n(a.st.slides):a.slider.children().detach()).each(function(){a._s(this,!0)}),a.st.randomizeSlides&&a.slides.sort(function(){return.5-Math.random()}),a.numSlides=a.slides.length,a._t(),a.st.startSlideId?a.st.startSlideId>a.numSlides-1&&(a.st.startSlideId=a.numSlides-1):a.st.startSlideId=0,a._o=a.staticSlideId=a.currSlideId=a._u=a.st.startSlideId,a.currSlide=a.slides[a.currSlideId],a._v=0,a.pointerMultitouch=!1,a.slider.addClass((a._h?"rsHor":"rsVer")+(a._l?"":" rsFade")),d='<div class="rsOverflow"><div class="rsContainer">',a.slidesSpacing=a.st.slidesSpacing,a._w=(a._h?a.slider.width():a.slider.height())+a.st.slidesSpacing,a._x=Boolean(0<a._y),1>=a.numSlides&&(a._z=!1),a._a1=a._z&&a._l?2===a.numSlides?1:2:0,a._b1=6>a.numSlides?a.numSlides:6,a._c1=0,a._d1=0,a.slidesJQ=[];for(c=0;c<a.numSlides;c++)a.slidesJQ.push(n('<div style="'+(a._l?"":c!==a.currSlideId?a._n:"z-index:0;")+'" class="rsSlide "></div>'));a._e1=d=n(d+"</div></div>");var m=a.ns,k=function(b,c,d,e,f){a._j1=b+c+m,a._k1=b+d+m,a._l1=b+e+m,f&&(a._m1=b+f+m)};c=e.pointerEnabled,a.pointerEnabled=c||e.msPointerEnabled,a.pointerEnabled?(a.hasTouch=!1,a._n1=.2,a.pointerMultitouch=Boolean(1<e[(c?"m":"msM")+"axTouchPoints"]),c?k("pointer","down","move","up","cancel"):k("MSPointer","Down","Move","Up","Cancel")):(a.isIOS?a._j1=a._k1=a._l1=a._m1="":k("mouse","down","move","up"),"ontouchstart"in window||"createTouch"in document?(a.hasTouch=!0,a._j1+=" touchstart"+m,a._k1+=" touchmove"+m,a._l1+=" touchend"+m,a._m1+=" touchcancel"+m,a._n1=.5,a.st.sliderTouch&&(a._f1=!0)):(a.hasTouch=!1,a._n1=.2)),a.st.sliderDrag&&(a._f1=!0,h.msie||h.opera?a._g1=a._h1="move":h.mozilla?(a._g1="-moz-grab",a._h1="-moz-grabbing"):h.webkit&&-1!=e.platform.indexOf("Mac")&&(a._g1="-webkit-grab",a._h1="-webkit-grabbing"),a._i1()),a.slider.html(d),a._o1=a.st.controlsInside?a._e1:a.slider,a._p1=a._e1.children(".rsContainer"),a.pointerEnabled&&a._p1.css((c?"":"-ms-")+"touch-action",a._h?"pan-y":"pan-x"),a._q1=n('<div class="rsPreloader"></div>'),e=a._p1.children(".rsSlide"),a._r1=a.slidesJQ[a.currSlideId],a._s1=0,a._e?(a._t1="transition-property",a._u1="transition-duration",a._v1="transition-timing-function",a._w1=a._x1=a._g+"transform",a._f?(h.webkit&&!h.chrome&&a.slider.addClass("rsWebkit3d"),a._y1="translate3d(",a._z1="px, ",a._a2="px, 0px)"):(a._y1="translate(",a._z1="px, ",a._a2="px)"),a._l?a._p1[a._g+a._t1]=a._g+"transform":(h={},h[a._g+a._t1]="opacity",h[a._g+a._u1]=a.st.transitionSpeed+"ms",h[a._g+a._v1]=a.st.css3easeInOut,e.css(h))):(a._x1="left",a._w1="top");var p;n(window).on("resize"+a.ns,function(){p&&clearTimeout(p),p=setTimeout(function(){a.updateSliderSize()},50)}),a.ev.trigger("rsAfterPropsSetup"),a.updateSliderSize(),a.st.keyboardNavEnabled&&a._b2(),a.st.arrowsNavHideOnTouch&&(a.hasTouch||a.pointerMultitouch)&&(a.st.arrowsNav=!1),a.st.arrowsNav&&(e=a._o1,n('<div class="rsArrow rsArrowLeft"><div class="rsArrowIcn"></div></div><div class="rsArrow rsArrowRight"><div class="rsArrowIcn"></div></div>').appendTo(e),a._c2=e.children(".rsArrowLeft").click(function(b){b.preventDefault(),a.prev()}),a._d2=e.children(".rsArrowRight").click(function(b){b.preventDefault(),a.next()}),a.st.arrowsNavAutoHide&&!a.hasTouch&&(a._c2.addClass("rsHidden"),a._d2.addClass("rsHidden"),e.one("mousemove.arrowshover",function(){a._c2.removeClass("rsHidden"),a._d2.removeClass("rsHidden")}),e.hover(function(){a._e2||(a._c2.removeClass("rsHidden"),a._d2.removeClass("rsHidden"))},function(){a._e2||(a._c2.addClass("rsHidden"),a._d2.addClass("rsHidden"))})),a.ev.on("rsOnUpdateNav",function(){a._f2()}),a._f2()),a._f1?a._p1.on(a._j1,function(b){a._g2(b)}):a.dragSuccess=!1;var q=["rsPlayBtnIcon","rsPlayBtn","rsCloseVideoBtn","rsCloseVideoIcn"];a._p1.click(function(b){if(!a.dragSuccess){var c=n(b.target).attr("class");if(-1!==n.inArray(c,q)&&a.toggleVideo())return!1;if(a.st.navigateByClick&&!a._h2){if(n(b.target).closest(".rsNoDrag",a._r1).length)return!0;a._i2(b)}a.ev.trigger("rsSlideClick",b)}}).on("click.rs","a",function(b){return a.dragSuccess?!1:(a._h2=!0,void setTimeout(function(){a._h2=!1},3))}),a.ev.trigger("rsAfterInit")}n.rsModules||(n.rsModules={uid:0}),u.prototype={constructor:u,_i2:function(b){b=b[this._h?"pageX":"pageY"]-this._j2,b>=this._q?this.next():0>b&&this.prev()},_t:function(){var b;b=this.st.numImagesToPreload,(this._z=this.st.loop)&&(2===this.numSlides?(this._z=!1,this.st.loopRewind=!0):2>this.numSlides&&(this.st.loopRewind=this._z=!1)),this._z&&b>0&&(4>=this.numSlides?b=1:this.st.numImagesToPreload>(this.numSlides-1)/2&&(b=Math.floor((this.numSlides-1)/2))),this._y=b},_s:function(b,f){function c(b,c){if(g.images.push(c?b.attr(c):b.text()),h){h=!1,g.caption="src"===c?b.attr("alt"):b.contents(),g.image=g.images[0],g.videoURL=b.attr("data-rsVideo");var d=b.attr("data-rsw"),e=b.attr("data-rsh");"undefined"!=typeof d&&!1!==d&&"undefined"!=typeof e&&!1!==e?(g.iW=parseInt(d,10),g.iH=parseInt(e,10)):a.st.imgWidth&&a.st.imgHeight&&(g.iW=a.st.imgWidth,g.iH=a.st.imgHeight)}}var e,d,a=this,g={},h=!0;return b=n(b),a._k2=b,a.ev.trigger("rsBeforeParseNode",[b,g]),g.stopParsing?void 0:(b=a._k2,g.id=a._r,g.contentAdded=!1,a._r++,g.images=[],g.isBig=!1,g.hasCover||(b.hasClass("rsImg")?(d=b,e=!0):(d=b.find(".rsImg"),d.length&&(e=!0)),e?(g.bigImage=d.eq(0).attr("data-rsBigImg"),d.each(function(){var a=n(this);a.is("a")?c(a,"href"):a.is("img")?c(a,"src"):c(a)})):b.is("img")&&(b.addClass("rsImg rsMainSlideImage"),c(b,"src"))),d=b.find(".rsCaption"),d.length&&(g.caption=d.remove()),g.content=b,a.ev.trigger("rsAfterParseNode",[b,g]),f&&a.slides.push(g),0===g.images.length&&(g.isLoaded=!0,g.isRendered=!1,g.isLoading=!1,g.images=null),g)},_b2:function(){var f,c,b=this,a=function(a){37===a?b.prev():39===a&&b.next()};b._b.on("keydown"+b.ns,function(e){b._l2||(c=e.keyCode,37!==c&&39!==c||f||(a(c),f=setInterval(function(){a(c)},700)))}).on("keyup"+b.ns,function(a){f&&(clearInterval(f),f=null)})},goTo:function(b,f){b!==this.currSlideId&&this._m2(b,this.st.transitionSpeed,!0,!f)},destroy:function(b){this.ev.trigger("rsBeforeDestroy"),this._b.off("keydown"+this.ns+" keyup"+this.ns+" "+this._k1+" "+this._l1),this._p1.off(this._j1+" click"),this.slider.data("royalSlider",null),n.removeData(this.slider,"royalSlider"),n(window).off("resize"+this.ns),this.loadingTimeout&&clearTimeout(this.loadingTimeout),b&&this.slider.remove(),this.ev=this.slider=this.slides=null},_n2:function(b,f){function c(c,f,g){c.isAdded?(a(f,c),e(f,c)):(g||(g=d.slidesJQ[f]),c.holder?g=c.holder:(g=d.slidesJQ[f]=n(g),c.holder=g),c.appendOnLoaded=!1,e(f,c,g),a(f,c),d._p2(c,g,b),c.isAdded=!0)}function a(a,c){c.contentAdded||(d.setItemHtml(c,b),b||(c.contentAdded=!0))}function e(a,b,c){d._l&&(c||(c=d.slidesJQ[a]),c.css(d._i,(a+d._d1+p)*d._w))}function g(a){if(l){if(a>r-1)return g(a-r);if(0>a)return g(r+a)}return a}var h,k,d=this,l=d._z,r=d.numSlides;if(!isNaN(f))return g(f);var p,t,m=d.currSlideId,q=b?Math.abs(d._o2-d.currSlideId)>=d.numSlides-1?0:1:d._y,s=Math.min(2,q),v=!1,u=!1;for(k=m;m+1+s>k;k++)if(t=g(k),(h=d.slides[t])&&(!h.isAdded||!h.positionSet)){v=!0;break}for(k=m-1;k>m-1-s;k--)if(t=g(k),(h=d.slides[t])&&(!h.isAdded||!h.positionSet)){u=!0;break}if(v)for(k=m;m+q+1>k;k++)t=g(k),p=Math.floor((d._u-(m-k))/d.numSlides)*d.numSlides,(h=d.slides[t])&&c(h,t);if(u)for(k=m-1;k>m-1-q;k--)t=g(k),p=Math.floor((d._u-(m-k))/r)*r,(h=d.slides[t])&&c(h,t);if(!b)for(s=g(m-q),m=g(m+q),q=s>m?0:s,k=0;r>k;k++)s>m&&k>s-1||!(q>k||k>m)||(h=d.slides[k])&&h.holder&&(h.holder.detach(),h.isAdded=!1)},setItemHtml:function(b,f){var c=this,a=function(){if(b.images){if(!b.isLoading){var a,f;if(b.content.hasClass("rsImg")?(a=b.content,f=!0):a=b.content.find(".rsImg:not(img)"),a&&!a.is("img")&&a.each(function(){var a=n(this),c='<img class="rsImg" src="'+(a.is("a")?a.attr("href"):a.text())+'" />';f?b.content=n(c):a.replaceWith(c)}),a=f?b.content:b.content.find("img.rsImg"),k(),a.eq(0).addClass("rsMainSlideImage"),b.iW&&b.iH&&(b.isLoaded||c._q2(b),d()),b.isLoading=!0,b.isBig)n("<img />").on("load.rs error.rs",function(a){n(this).off("load.rs error.rs"),e([this],!0)}).attr("src",b.image);else{b.loaded=[],b.numStartedLoad=0,a=function(a){n(this).off("load.rs error.rs"),b.loaded.push(this),b.loaded.length===b.numStartedLoad&&e(b.loaded,!1)};for(var g=0;g<b.images.length;g++){var h=n("<img />");b.numStartedLoad++,h.on("load.rs error.rs",a).attr("src",b.images[g])}}}}else b.isRendered=!0,b.isLoaded=!0,b.isLoading=!1,d(!0)},e=function(a,c){if(a.length){var d=a[0];if(c!==b.isBig)(d=b.holder.children())&&1<d.length&&l();else if(b.iW&&b.iH)g();else if(b.iW=d.width,b.iH=d.height,b.iW&&b.iH)g();else{var e=new Image;e.onload=function(){e.width?(b.iW=e.width,b.iH=e.height,g()):setTimeout(function(){e.width&&(b.iW=e.width,b.iH=e.height),g()},1e3)},e.src=d.src}}else g()},g=function(){b.isLoaded=!0,b.isLoading=!1,d(),l(),h()},d=function(){if(!b.isAppended&&c.ev){var a=c.st.visibleNearby,d=b.id-c._o;f||b.appendOnLoaded||!c.st.fadeinLoadedSlide||0!==d&&(!(a||c._r2||c._l2)||-1!==d&&1!==d)||(a={visibility:"visible",opacity:0},a[c._g+"transition"]="opacity 400ms ease-in-out",b.content.css(a),setTimeout(function(){b.content.css("opacity",1)},16)),b.holder.find(".rsPreloader").length?b.holder.append(b.content):b.holder.html(b.content),b.isAppended=!0,b.isLoaded&&(c._q2(b),h()),b.sizeReady||(b.sizeReady=!0,setTimeout(function(){c.ev.trigger("rsMaybeSizeReady",b)},100))}},h=function(){!b.loadedTriggered&&c.ev&&(b.isLoaded=b.loadedTriggered=!0,b.holder.trigger("rsAfterContentSet"),c.ev.trigger("rsAfterContentSet",b))},k=function(){c.st.usePreloader&&b.holder.html(c._q1.clone())},l=function(a){c.st.usePreloader&&(a=b.holder.find(".rsPreloader"),a.length&&a.remove())};b.isLoaded?d():f?!c._l&&b.images&&b.iW&&b.iH?a():(b.holder.isWaiting=!0,k(),b.holder.slideId=-99):a()},_p2:function(b,f,c){this._p1.append(b.holder),b.appendOnLoaded=!1},_g2:function(b,f){var a,c=this,e="touchstart"===b.type;if(c._s2=e,c.ev.trigger("rsDragStart"),n(b.target).closest(".rsNoDrag",c._r1).length)return c.dragSuccess=!1,!0;if(!f&&c._r2&&(c._t2=!0,c._u2()),c.dragSuccess=!1,c._l2)e&&(c._v2=!0);else{if(e&&(c._v2=!1),c._w2(),e){var g=b.originalEvent.touches;if(!(g&&0<g.length))return;a=g[0],1<g.length&&(c._v2=!0)}else b.preventDefault(),a=b,c.pointerEnabled&&(a=a.originalEvent);c._l2=!0,c._b.on(c._k1,function(a){c._x2(a,f)}).on(c._l1,function(a){c._y2(a,f)}),c._z2="",c._a3=!1,c._b3=a.pageX,c._c3=a.pageY,c._d3=c._v=(f?c._e3:c._h)?a.pageX:a.pageY,c._f3=0,c._g3=0,c._h3=f?c._i3:c._p,c._j3=(new Date).getTime(),e&&c._e1.on(c._m1,function(a){c._y2(a,f)})}},_k3:function(b,f){if(this._l3){var c=this._m3,a=b.pageX-this._b3,e=b.pageY-this._c3,g=this._h3+a,d=this._h3+e,h=f?this._e3:this._h,g=h?g:d,d=this._z2;this._a3=!0,this._b3=b.pageX,this._c3=b.pageY,"x"===d&&0!==a?this._f3=a>0?1:-1:"y"===d&&0!==e&&(this._g3=e>0?1:-1),d=h?this._b3:this._c3,a=h?a:e,f?g>this._n3?g=this._h3+a*this._n1:g<this._o3&&(g=this._h3+a*this._n1):this._z||(0>=this.currSlideId&&0<d-this._d3&&(g=this._h3+a*this._n1),this.currSlideId>=this.numSlides-1&&0>d-this._d3&&(g=this._h3+a*this._n1)),this._h3=g,200<c-this._j3&&(this._j3=c,this._v=d),f?this._q3(this._h3):this._l&&this._p3(this._h3)}},_x2:function(b,f){var a,c=this,e="touchmove"===b.type;if(!c._s2||e){if(e){if(c._r3)return;var g=b.originalEvent.touches;if(!g)return;if(1<g.length)return;a=g[0]}else a=b,c.pointerEnabled&&(a=a.originalEvent);if(c._a3||(c._e&&(f?c._s3:c._p1).css(c._g+c._u1,"0s"),function h(){c._l2&&(c._t3=requestAnimationFrame(h),c._u3&&c._k3(c._u3,f))}()),c._l3)b.preventDefault(),c._m3=(new Date).getTime(),c._u3=a;else if(g=f?c._e3:c._h,a=Math.abs(a.pageX-c._b3)-Math.abs(a.pageY-c._c3)-(g?-7:7),a>7){if(g)b.preventDefault(),c._z2="x";else if(e)return void c._v3(b);c._l3=!0}else if(-7>a){if(g){if(e)return void c._v3(b)}else b.preventDefault(),c._z2="y";c._l3=!0}}},_v3:function(b,f){this._r3=!0,this._a3=this._l2=!1,this._y2(b)},_y2:function(b,f){function c(a){return 100>a?100:a>500?500:a}function a(a,b){(e._l||f)&&(h=(-e._u-e._d1)*e._w,k=Math.abs(e._p-h),e._c=k/b,a&&(e._c+=250),e._c=c(e._c),e._x3(h,!1))}var g,d,h,k,e=this;if(g=-1<b.type.indexOf("touch"),!e._s2||g)if(e._s2=!1,e.ev.trigger("rsDragRelease"),e._u3=null,e._l2=!1,e._r3=!1,e._l3=!1,e._m3=0,cancelAnimationFrame(e._t3),e._a3&&(f?e._q3(e._h3):e._l&&e._p3(e._h3)),e._b.off(e._k1).off(e._l1),g&&e._e1.off(e._m1),e._i1(),!e._a3&&!e._v2&&f&&e._w3){var l=n(b.target).closest(".rsNavItem");l.length&&e.goTo(l.index())}else{if(d=f?e._e3:e._h,!e._a3||"y"===e._z2&&d||"x"===e._z2&&!d){if(f||!e._t2)return e._t2=!1,void(e.dragSuccess=!1);if(e._t2=!1,e.st.navigateByClick)return e._i2(e.pointerEnabled?b.originalEvent:b),void(e.dragSuccess=!0);e.dragSuccess=!0}else e.dragSuccess=!0;e._t2=!1,e._z2="";var r=e.st.minSlideOffset;g=g?b.originalEvent.changedTouches[0]:e.pointerEnabled?b.originalEvent:b;var m=d?g.pageX:g.pageY,p=e._d3;g=e._v;var q=e.currSlideId,s=e.numSlides,v=d?e._f3:e._g3,u=e._z;if(Math.abs(m-p),g=m-g,d=(new Date).getTime()-e._j3,d=Math.abs(g)/d,0===v||1>=s)a(!0,d);else{if(!u&&!f)if(0>=q){if(v>0)return void a(!0,d)}else if(q>=s-1&&0>v)return void a(!0,d);if(f){if(h=e._i3,h>e._n3)h=e._n3;else if(h<e._o3)h=e._o3;else{if(m=d*d/.006,l=-e._i3,p=e._y3-e._z3+e._i3,g>0&&m>l?(l+=e._z3/(15/(m/d*.003)),d=d*l/m,m=l):0>g&&m>p&&(p+=e._z3/(15/(m/d*.003)),d=d*p/m,m=p),l=Math.max(Math.round(d/.003),50),h+=m*(0>g?-1:1),h>e._n3)return void e._a4(h,l,!0,e._n3,200);if(h<e._o3)return void e._a4(h,l,!0,e._o3,200)}e._a4(h,l,!0)}else l=function(a){var b=Math.floor(a/e._w);return a-b*e._w>r&&b++,b},m>p+r?0>v?a(!1,d):(l=l(m-p),e._m2(e.currSlideId-l,c(Math.abs(e._p-(-e._u-e._d1+l)*e._w)/d),!1,!0,!0)):p-r>m?v>0?a(!1,d):(l=l(p-m),e._m2(e.currSlideId+l,c(Math.abs(e._p-(-e._u-e._d1-l)*e._w)/d),!1,!0,!0)):a(!1,d)}}},_p3:function(b){b=this._p=b,this._e?this._p1.css(this._x1,this._y1+(this._h?b+this._z1+0:0+this._z1+b)+this._a2):this._p1.css(this._h?this._x1:this._w1,b)},updateSliderSize:function(b){var f,c;if(this.st.autoScaleSlider){var a=this.st.autoScaleSliderWidth,e=this.st.autoScaleSliderHeight;this.st.autoScaleHeight?(f=this.slider.width(),f!=this.width&&(this.slider.css("height",e/a*f),f=this.slider.width()),c=this.slider.height()):(c=this.slider.height(),c!=this.height&&(this.slider.css("width",a/e*c),c=this.slider.height()),f=this.slider.width())}else f=this.slider.width(),c=this.slider.height();if(b||f!=this.width||c!=this.height){for(this.width=f,this.height=c,this._b4=f,this._c4=c,this.ev.trigger("rsBeforeSizeSet"),this.ev.trigger("rsAfterSizePropSet"),this._e1.css({width:this._b4,height:this._c4}),this._w=(this._h?this._b4:this._c4)+this.st.slidesSpacing,this._d4=this.st.imageScalePadding,f=0;f<this.slides.length;f++)b=this.slides[f],b.positionSet=!1,b&&b.images&&b.isLoaded&&(b.isRendered=!1,this._q2(b));if(this._e4)for(f=0;f<this._e4.length;f++)b=this._e4[f],b.holder.css(this._i,(b.id+this._d1)*this._w);this._n2(),this._l&&(this._e&&this._p1.css(this._g+"transition-duration","0s"),this._p3((-this._u-this._d1)*this._w)),this.ev.trigger("rsOnUpdateNav")}this._j2=this._e1.offset(),this._j2=this._j2[this._i]},appendSlide:function(b,f){var c=this._s(b);(isNaN(f)||f>this.numSlides)&&(f=this.numSlides),this.slides.splice(f,0,c),this.slidesJQ.splice(f,0,n('<div style="'+(this._l?"position:absolute;":this._n)+'" class="rsSlide"></div>')),f<this.currSlideId&&this.currSlideId++,this.ev.trigger("rsOnAppendSlide",[c,f]),this._f4(f),f===this.currSlideId&&this.ev.trigger("rsAfterSlideChange")},removeSlide:function(b){var f=this.slides[b];f&&(f.holder&&f.holder.remove(),b<this.currSlideId&&this.currSlideId--,this.slides.splice(b,1),this.slidesJQ.splice(b,1),this.ev.trigger("rsOnRemoveSlide",[b]),this._f4(b),b===this.currSlideId&&this.ev.trigger("rsAfterSlideChange"))},_f4:function(b){var f=this;for(b=f.numSlides,b=0>=f._u?0:Math.floor(f._u/b),f.numSlides=f.slides.length,0===f.numSlides?(f.currSlideId=f._d1=f._u=0,f.currSlide=f._g4=null):f._u=b*f.numSlides+f.currSlideId,b=0;b<f.numSlides;b++)f.slides[b].id=b;f.currSlide=f.slides[f.currSlideId],f._r1=f.slidesJQ[f.currSlideId],f.currSlideId>=f.numSlides?f.goTo(f.numSlides-1):0>f.currSlideId&&f.goTo(0),f._t(),f._l&&f._z&&f._p1.css(f._g+f._u1,"0ms"),f._h4&&clearTimeout(f._h4),f._h4=setTimeout(function(){f._l&&f._p3((-f._u-f._d1)*f._w),f._n2(),f._l||f._r1.css({display:"block",opacity:1})},14),f.ev.trigger("rsOnUpdateNav")},_i1:function(){this._f1&&this._l&&(this._g1?this._e1.css("cursor",this._g1):(this._e1.removeClass("grabbing-cursor"),this._e1.addClass("grab-cursor")))},_w2:function(){this._f1&&this._l&&(this._h1?this._e1.css("cursor",this._h1):(this._e1.removeClass("grab-cursor"),this._e1.addClass("grabbing-cursor")))},next:function(b){this._m2("next",this.st.transitionSpeed,!0,!b)},prev:function(b){this._m2("prev",this.st.transitionSpeed,!0,!b)},_m2:function(b,f,c,a,e){var d,h,k,g=this;if(g.ev.trigger("rsBeforeMove",[b,a]),k="next"===b?g.currSlideId+1:"prev"===b?g.currSlideId-1:b=parseInt(b,10),!g._z){if(0>k)return void g._i4("left",!a);if(k>=g.numSlides)return void g._i4("right",!a)}g._r2&&(g._u2(!0),c=!1),h=k-g.currSlideId,k=g._o2=g.currSlideId;var l=g.currSlideId+h;a=g._u;var n;g._z?(l=g._n2(!1,l),a+=h):a=l,g._o=l,g._g4=g.slidesJQ[g.currSlideId],g._u=a,g.currSlideId=g._o,g.currSlide=g.slides[g.currSlideId],g._r1=g.slidesJQ[g.currSlideId];var l=g.st.slidesDiff,m=Boolean(h>0);h=Math.abs(h);var p=Math.floor(k/g._y),q=Math.floor((k+(m?l:-l))/g._y),p=(m?Math.max(p,q):Math.min(p,q))*g._y+(m?g._y-1:0);if(p>g.numSlides-1?p=g.numSlides-1:0>p&&(p=0),k=m?p-k:k-p,k>g._y&&(k=g._y),h>k+l)for(g._d1+=(h-(k+l))*(m?-1:1),f*=1.4,k=0;k<g.numSlides;k++)g.slides[k].positionSet=!1;g._c=f,g._n2(!0),e||(n=!0),d=(-a-g._d1)*g._w,n?setTimeout(function(){g._j4=!1,g._x3(d,b,!1,c),g.ev.trigger("rsOnUpdateNav")},0):(g._x3(d,b,!1,c),g.ev.trigger("rsOnUpdateNav"))},_f2:function(){this.st.arrowsNav&&(1>=this.numSlides?(this._c2.css("display","none"),this._d2.css("display","none")):(this._c2.css("display","block"),this._d2.css("display","block"),this._z||this.st.loopRewind||(0===this.currSlideId?this._c2.addClass("rsArrowDisabled"):this._c2.removeClass("rsArrowDisabled"),this.currSlideId===this.numSlides-1?this._d2.addClass("rsArrowDisabled"):this._d2.removeClass("rsArrowDisabled"))))},_x3:function(b,f,c,a,e){function g(){var a;h&&(a=h.data("rsTimeout"))&&(h!==k&&h.css({opacity:0,display:"none",zIndex:0}),clearTimeout(a),h.data("rsTimeout","")),(a=k.data("rsTimeout"))&&(clearTimeout(a),k.data("rsTimeout",""))}var h,k,d=this,l={};isNaN(d._c)&&(d._c=400),d._p=d._h3=b,d.ev.trigger("rsBeforeAnimStart"),d._e?d._l?(d._c=parseInt(d._c,10),c=d._g+d._v1,l[d._g+d._u1]=d._c+"ms",l[c]=a?n.rsCSS3Easing[d.st.easeInOut]:n.rsCSS3Easing[d.st.easeOut],d._p1.css(l),a||!d.hasTouch?setTimeout(function(){d._p3(b)},5):d._p3(b)):(d._c=d.st.transitionSpeed,h=d._g4,k=d._r1,k.data("rsTimeout")&&k.css("opacity",0),g(),h&&h.data("rsTimeout",setTimeout(function(){l[d._g+d._u1]="0ms",l.zIndex=0,l.display="none",h.data("rsTimeout",""),h.css(l),setTimeout(function(){h.css("opacity",0)},16)},d._c+60)),l.display="block",l.zIndex=d._m,l.opacity=0,l[d._g+d._u1]="0ms",l[d._g+d._v1]=n.rsCSS3Easing[d.st.easeInOut],k.css(l),k.data("rsTimeout",setTimeout(function(){k.css(d._g+d._u1,d._c+"ms"),k.data("rsTimeout",setTimeout(function(){k.css("opacity",1),k.data("rsTimeout","")},20))},20))):d._l?(l[d._h?d._x1:d._w1]=b+"px",d._p1.animate(l,d._c,a?d.st.easeInOut:d.st.easeOut)):(h=d._g4,k=d._r1,k.stop(!0,!0).css({opacity:0,display:"block",zIndex:d._m}),d._c=d.st.transitionSpeed,k.animate({opacity:1},d._c,d.st.easeInOut),g(),h&&h.data("rsTimeout",setTimeout(function(){h.stop(!0,!0).css({opacity:0,display:"none",zIndex:0})},d._c+60))),d._r2=!0,d.loadingTimeout&&clearTimeout(d.loadingTimeout),d.loadingTimeout=e?setTimeout(function(){d.loadingTimeout=null,e.call()},d._c+60):setTimeout(function(){d.loadingTimeout=null,d._k4(f)},d._c+60)},_u2:function(b){if(this._r2=!1,clearTimeout(this.loadingTimeout),this._l)if(this._e){if(!b){b=this._p;var f=this._h3=this._l4();this._p1.css(this._g+this._u1,"0ms"),b!==f&&this._p3(f)}}else this._p1.stop(!0),this._p=parseInt(this._p1.css(this._x1),10);else 20<this._m?this._m=10:this._m++},_l4:function(){var b=window.getComputedStyle(this._p1.get(0),null).getPropertyValue(this._g+"transform").replace(/^matrix\(/i,"").split(/, |\)$/g),f=0===b[0].indexOf("matrix3d");return parseInt(b[this._h?f?12:4:f?13:5],10)},_m4:function(b,f){return this._e?this._y1+(f?b+this._z1+0:0+this._z1+b)+this._a2:b},_k4:function(b){this._l||(this._r1.css("z-index",0),this._m=10),this._r2=!1,this.staticSlideId=this.currSlideId,this._n2(),this._n4=!1,this.ev.trigger("rsAfterSlideChange")},_i4:function(b,f){var c=this,a=(-c._u-c._d1)*c._w;if(0!==c.numSlides&&!c._r2)if(c.st.loopRewind)c.goTo("left"===b?c.numSlides-1:0,f);else if(c._l){c._c=200;var e=function(){c._r2=!1};c._x3(a+("left"===b?30:-30),"",!1,!0,function(){c._r2=!1,c._x3(a,"",!1,!0,e)})}},_q2:function(b,f){if(!b.isRendered){var e,h,c=b.content,a="rsMainSlideImage",g=this.st.imageAlignCenter,d=this.st.imageScaleMode;if(b.videoURL&&(a="rsVideoContainer","fill"!==d?e=!0:(h=c,h.hasClass(a)||(h=h.find("."+a)),h.css({width:"100%",height:"100%"}),a="rsMainSlideImage")),c.hasClass(a)||(c=c.find("."+a)),c){var k=b.iW,l=b.iH;if(b.isRendered=!0,"none"!==d||g){a="fill"!==d?this._d4:0,h=this._b4-2*a;var m,p,n=this._c4-2*a,q={};"fit-if-smaller"===d&&(k>h||l>n)&&(d="fit"),("fill"===d||"fit"===d)&&(m=h/k,p=n/l,m="fill"==d?m>p?m:p:"fit"==d?p>m?m:p:1,k=Math.ceil(k*m,10),l=Math.ceil(l*m,10)),"none"!==d&&(q.width=k,q.height=l,e&&c.find(".rsImg").css({width:"100%",height:"100%"})),g&&(q.marginLeft=Math.floor((h-k)/2)+a,q.marginTop=Math.floor((n-l)/2)+a),c.css(q)}}}}},n.rsProto=u.prototype,n.fn.royalSlider=function(b){var f=arguments;return this.each(function(){var c=n(this);if("object"!=typeof b&&b){if((c=c.data("royalSlider"))&&c[b])return c[b].apply(c,Array.prototype.slice.call(f,1))}else c.data("royalSlider")||c.data("royalSlider",new u(c,b))})},n.fn.royalSlider.defaults={slidesSpacing:8,startSlideId:0,loop:!1,loopRewind:!1,numImagesToPreload:4,fadeinLoadedSlide:!0,slidesOrientation:"horizontal",transitionType:"move",transitionSpeed:600,controlNavigation:"bullets",controlsInside:!0,arrowsNav:!0,arrowsNavAutoHide:!0,navigateByClick:!0,randomizeSlides:!1,sliderDrag:!0,sliderTouch:!0,keyboardNavEnabled:!1,fadeInAfterLoaded:!0,allowCSS3:!0,allowCSS3OnWebkit:!0,addActiveClass:!1,autoHeight:!1,easeOut:"easeOutSine",easeInOut:"easeInOutSine",minSlideOffset:10,imageScaleMode:"fit-if-smaller",imageAlignCenter:!0,imageScalePadding:4,usePreloader:!0,autoScaleSlider:!1,autoScaleSliderWidth:800,autoScaleSliderHeight:400,autoScaleHeight:!0,arrowsNavHideOnTouch:!1,globalCaption:!1,slidesDiff:2},n.rsCSS3Easing={easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"},n.extend(jQuery.easing,{easeInOutSine:function(b,f,c,a,e){return-a/2*(Math.cos(Math.PI*f/e)-1)+c},easeOutSine:function(b,f,c,a,e){return a*Math.sin(f/e*(Math.PI/2))+c},easeOutCubic:function(b,f,c,a,e){return a*((f=f/e-1)*f*f+1)+c}})}(jQuery,window),function(c){c.extend(c.rsProto,{_i5:function(){var a=this;"bullets"===a.st.controlNavigation&&(a.ev.one("rsAfterPropsSetup",function(){a._j5=!0,a.slider.addClass("rsWithBullets");for(var b='<div class="rsNav rsBullets">',e=0;e<a.numSlides;e++)b+='<div class="rsNavItem rsBullet"><span></span></div>';a._k5=b=c(b+"</div>"),a._l5=b.appendTo(a.slider).children(),a._k5.on("click.rs",".rsNavItem",function(b){a._m5||a.goTo(c(this).index())})}),a.ev.on("rsOnAppendSlide",function(b,c,d){d>=a.numSlides?a._k5.append('<div class="rsNavItem rsBullet"><span></span></div>'):a._l5.eq(d).before('<div class="rsNavItem rsBullet"><span></span></div>'),a._l5=a._k5.children()}),a.ev.on("rsOnRemoveSlide",function(b,c){var d=a._l5.eq(c);d&&d.length&&(d.remove(),a._l5=a._k5.children())}),a.ev.on("rsOnUpdateNav",function(){var b=a.currSlideId;a._n5&&a._n5.removeClass("rsNavSelected"),b=a._l5.eq(b),b.addClass("rsNavSelected"),a._n5=b}))}}),c.rsModules.bullets=c.rsProto._i5}(jQuery),function(g){g.extend(g.rsProto,{_h6:function(){var a=this;"thumbnails"===a.st.controlNavigation&&(a._i6={drag:!0,touch:!0,orientation:"horizontal",
navigation:!0,arrows:!0,arrowLeft:null,arrowRight:null,spacing:4,arrowsAutoHide:!1,appendSpan:!1,transitionSpeed:600,autoCenter:!0,fitInViewport:!0,firstMargin:!0,paddingTop:0,paddingBottom:0},a.st.thumbs=g.extend({},a._i6,a.st.thumbs),a._j6=!0,!1===a.st.thumbs.firstMargin?a.st.thumbs.firstMargin=0:!0===a.st.thumbs.firstMargin&&(a.st.thumbs.firstMargin=a.st.thumbs.spacing),a.ev.on("rsBeforeParseNode",function(a,b,c){b=g(b),c.thumbnail=b.find(".rsTmb").remove(),c.thumbnail.length?c.thumbnail=g(document.createElement("div")).append(c.thumbnail).html():(c.thumbnail=b.attr("data-rsTmb"),c.thumbnail||(c.thumbnail=b.find(".rsImg").attr("data-rsTmb")),c.thumbnail=c.thumbnail?'<img src="'+c.thumbnail+'"/>':"")}),a.ev.one("rsAfterPropsSetup",function(){a._k6()}),a._n5=null,a.ev.on("rsOnUpdateNav",function(){var e=g(a._l5[a.currSlideId]);e!==a._n5&&(a._n5&&(a._n5.removeClass("rsNavSelected"),a._n5=null),a._l6&&a._m6(a.currSlideId),a._n5=e.addClass("rsNavSelected"))}),a.ev.on("rsOnAppendSlide",function(e,b,c){e="<div"+a._n6+' class="rsNavItem rsThumb">'+a._o6+b.thumbnail+"</div>",c>=a.numSlides?a._s3.append(e):a._l5.eq(c).before(e),a._l5=a._s3.children(),a.updateThumbsSize()}),a.ev.on("rsOnRemoveSlide",function(e,b){var c=a._l5.eq(b);c&&(c.remove(),a._l5=a._s3.children(),a.updateThumbsSize())}))},_k6:function(){var f,d,a=this,e="rsThumbs",b=a.st.thumbs,c="",h=b.spacing;a._j5=!0,a._e3="vertical"===b.orientation?!1:!0,a._n6=f=h?' style="margin-'+(a._e3?"right":"bottom")+":"+h+'px;"':"",a._i3=0,a._p6=!1,a._m5=!1,a._l6=!1,a._q6=b.arrows&&b.navigation,d=a._e3?"Hor":"Ver",a.slider.addClass("rsWithThumbs rsWithThumbs"+d),c+='<div class="rsNav rsThumbs rsThumbs'+d+'"><div class="'+e+'Container">',a._o6=b.appendSpan?'<span class="thumbIco"></span>':"";for(var k=0;k<a.numSlides;k++)d=a.slides[k],c+="<div"+f+' class="rsNavItem rsThumb">'+d.thumbnail+a._o6+"</div>";c=g(c+"</div></div>"),f={},b.paddingTop&&(f[a._e3?"paddingTop":"paddingLeft"]=b.paddingTop),b.paddingBottom&&(f[a._e3?"paddingBottom":"paddingRight"]=b.paddingBottom),c.css(f),a._s3=g(c).find("."+e+"Container"),a._q6&&(e+="Arrow",b.arrowLeft?a._r6=b.arrowLeft:(a._r6=g('<div class="'+e+" "+e+'Left"><div class="'+e+'Icn"></div></div>'),c.append(a._r6)),b.arrowRight?a._s6=b.arrowRight:(a._s6=g('<div class="'+e+" "+e+'Right"><div class="'+e+'Icn"></div></div>'),c.append(a._s6)),a._r6.click(function(){var b=(Math.floor(a._i3/a._t6)+a._u6)*a._t6+a._v6;a._a4(b>a._n3?a._n3:b)}),a._s6.click(function(){var b=(Math.floor(a._i3/a._t6)-a._u6)*a._t6+a._v6;a._a4(b<a._o3?a._o3:b)}),b.arrowsAutoHide&&!a.hasTouch&&(a._r6.css("opacity",0),a._s6.css("opacity",0),c.one("mousemove.rsarrowshover",function(){a._l6&&(a._r6.css("opacity",1),a._s6.css("opacity",1))}),c.hover(function(){a._l6&&(a._r6.css("opacity",1),a._s6.css("opacity",1))},function(){a._l6&&(a._r6.css("opacity",0),a._s6.css("opacity",0))}))),a._k5=c,a._l5=a._s3.children(),a.msEnabled&&a.st.thumbs.navigation&&a._s3.css("-ms-touch-action",a._e3?"pan-y":"pan-x"),a.slider.append(c),a._w3=!0,a._v6=h,b.navigation&&a._e&&a._s3.css(a._g+"transition-property",a._g+"transform"),a._k5.on("click.rs",".rsNavItem",function(b){a._m5||a.goTo(g(this).index())}),a.ev.off("rsBeforeSizeSet.thumbs").on("rsBeforeSizeSet.thumbs",function(){a._w6=a._e3?a._c4:a._b4,a.updateThumbsSize(!0)}),a.ev.off("rsAutoHeightChange.thumbs").on("rsAutoHeightChange.thumbs",function(b,c){a.updateThumbsSize(!0,c)})},updateThumbsSize:function(a,e){var b=this,c=b._l5.first(),f={},d=b._l5.length;b._t6=(b._e3?c.outerWidth():c.outerHeight())+b._v6,b._y3=d*b._t6-b._v6,f[b._e3?"width":"height"]=b._y3+b._v6,b._z3=b._e3?b._k5.width():void 0!==e?e:b._k5.height(),b._w3&&(b.isFullscreen||b.st.thumbs.fitInViewport)&&(b._e3?b._c4=b._w6-b._k5.outerHeight():b._b4=b._w6-b._k5.outerWidth()),b._z3&&(b._o3=-(b._y3-b._z3)-b.st.thumbs.firstMargin,b._n3=b.st.thumbs.firstMargin,b._u6=Math.floor(b._z3/b._t6),b._y3<b._z3?(b.st.thumbs.autoCenter&&b._q3((b._z3-b._y3)/2),b.st.thumbs.arrows&&b._r6&&(b._r6.addClass("rsThumbsArrowDisabled"),b._s6.addClass("rsThumbsArrowDisabled")),b._l6=!1,b._m5=!1,b._k5.off(b._j1)):b.st.thumbs.navigation&&!b._l6&&(b._l6=!0,!b.hasTouch&&b.st.thumbs.drag||b.hasTouch&&b.st.thumbs.touch)&&(b._m5=!0,b._k5.on(b._j1,function(a){b._g2(a,!0)})),b._s3.css(f),a&&e&&b._m6(b.currSlideId),b._e&&(f[b._g+"transition-duration"]="0ms"))},setThumbsOrientation:function(a,e){this._w3&&(this.st.thumbs.orientation=a,this._k5.remove(),this.slider.removeClass("rsWithThumbsHor rsWithThumbsVer"),this._k6(),this._k5.off(this._j1),e||this.updateSliderSize(!0))},_q3:function(a){this._i3=a,this._e?this._s3.css(this._x1,this._y1+(this._e3?a+this._z1+0:0+this._z1+a)+this._a2):this._s3.css(this._e3?this._x1:this._w1,a)},_a4:function(a,e,b,c,f){var d=this;if(d._l6){e||(e=d.st.thumbs.transitionSpeed),d._i3=a,d._x6&&clearTimeout(d._x6),d._p6&&(d._e||d._s3.stop(),b=!0);var h={};d._p6=!0,d._e?(h[d._g+"transition-duration"]=e+"ms",h[d._g+"transition-timing-function"]=b?g.rsCSS3Easing[d.st.easeOut]:g.rsCSS3Easing[d.st.easeInOut],d._s3.css(h),d._q3(a)):(h[d._e3?d._x1:d._w1]=a+"px",d._s3.animate(h,e,b?"easeOutCubic":d.st.easeInOut)),c&&(d._i3=c),d._y6(),d._x6=setTimeout(function(){d._p6=!1,f&&(d._a4(c,f,!0),f=null)},e)}},_y6:function(){this._q6&&(this._i3===this._n3?this._r6.addClass("rsThumbsArrowDisabled"):this._r6.removeClass("rsThumbsArrowDisabled"),this._i3===this._o3?this._s6.addClass("rsThumbsArrowDisabled"):this._s6.removeClass("rsThumbsArrowDisabled"))},_m6:function(a,e){var c,b=0,f=a*this._t6+2*this._t6-this._v6+this._n3,d=Math.floor(this._i3/this._t6);this._l6&&(this._j6&&(e=!0,this._j6=!1),f+this._i3>this._z3?(a===this.numSlides-1&&(b=1),d=-a+this._u6-2+b,c=d*this._t6+this._z3%this._t6+this._v6-this._n3):0!==a?(a-1)*this._t6<=-this._i3+this._n3&&a-1<=this.numSlides-this._u6&&(c=(-a+1)*this._t6+this._n3):c=this._n3,c!==this._i3&&(b=void 0===c?this._i3:c,b>this._n3?this._q3(this._n3):b<this._o3?this._q3(this._o3):void 0!==c&&(e?this._q3(c):this._a4(c))),this._y6())}}),g.rsModules.thumbnails=g.rsProto._h6}(jQuery),function(e){e.extend(e.rsProto,{_f6:function(){var a=this;"tabs"===a.st.controlNavigation&&(a.ev.on("rsBeforeParseNode",function(a,d,b){d=e(d),b.thumbnail=d.find(".rsTmb").remove(),b.thumbnail.length?b.thumbnail=e(document.createElement("div")).append(b.thumbnail).html():(b.thumbnail=d.attr("data-rsTmb"),b.thumbnail||(b.thumbnail=d.find(".rsImg").attr("data-rsTmb")),b.thumbnail=b.thumbnail?'<img src="'+b.thumbnail+'"/>':"")}),a.ev.one("rsAfterPropsSetup",function(){a._g6()}),a.ev.on("rsOnAppendSlide",function(c,d,b){b>=a.numSlides?a._k5.append('<div class="rsNavItem rsTab">'+d.thumbnail+"</div>"):a._l5.eq(b).before('<div class="rsNavItem rsTab">'+item.thumbnail+"</div>"),a._l5=a._k5.children()}),a.ev.on("rsOnRemoveSlide",function(c,d){var b=a._l5.eq(d);b&&(b.remove(),a._l5=a._k5.children())}),a.ev.on("rsOnUpdateNav",function(){var c=a.currSlideId;a._n5&&a._n5.removeClass("rsNavSelected"),c=a._l5.eq(c),c.addClass("rsNavSelected"),a._n5=c}))},_g6:function(){var c,a=this;a._j5=!0,c='<div class="rsNav rsTabs">';for(var d=0;d<a.numSlides;d++)c+='<div class="rsNavItem rsTab">'+a.slides[d].thumbnail+"</div>";c=e(c+"</div>"),a._k5=c,a._l5=c.children(".rsNavItem"),a.slider.append(c),a._k5.click(function(b){b=e(b.target).closest(".rsNavItem"),b.length&&a.goTo(b.index())})}}),e.rsModules.tabs=e.rsProto._f6}(jQuery),function(c){c.extend(c.rsProto,{_q5:function(){var a=this;a._r5={enabled:!1,keyboardNav:!0,buttonFS:!0,nativeFS:!1,doubleTap:!0},a.st.fullscreen=c.extend({},a._r5,a.st.fullscreen),a.st.fullscreen.enabled&&a.ev.one("rsBeforeSizeSet",function(){a._s5()})},_s5:function(){var a=this;if(a._t5=!a.st.keyboardNavEnabled&&a.st.fullscreen.keyboardNav,a.st.fullscreen.nativeFS){a._u5={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""};var b=["webkit","moz","o","ms","khtml"];if(!a.isAndroid)if("undefined"!=typeof document.cancelFullScreen)a._u5.supportsFullScreen=!0;else for(var d=0;d<b.length;d++)if(a._u5.prefix=b[d],"undefined"!=typeof document[a._u5.prefix+"CancelFullScreen"]){a._u5.supportsFullScreen=!0;break}a._u5.supportsFullScreen?(a.nativeFS=!0,a._u5.fullScreenEventName=a._u5.prefix+"fullscreenchange"+a.ns,a._u5.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},a._u5.requestFullScreen=function(a){return""===this.prefix?a.requestFullScreen():a[this.prefix+"RequestFullScreen"]()},a._u5.cancelFullScreen=function(a){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}):a._u5=!1}a.st.fullscreen.buttonFS&&(a._v5=c('<div class="rsFullscreenBtn"><div class="rsFullscreenIcn"></div></div>').appendTo(a._o1).on("click.rs",function(){a.isFullscreen?a.exitFullscreen():a.enterFullscreen()}))},enterFullscreen:function(a){var b=this;if(b._u5){if(!a)return b._b.on(b._u5.fullScreenEventName,function(a){b._u5.isFullScreen()?b.enterFullscreen(!0):b.exitFullscreen(!0)}),void b._u5.requestFullScreen(c("html")[0]);b._u5.requestFullScreen(c("html")[0])}if(!b._w5){b._w5=!0,b._b.on("keyup"+b.ns+"fullscreen",function(a){27===a.keyCode&&b.exitFullscreen()}),b._t5&&b._b2(),a=c(window),b._x5=a.scrollTop(),b._y5=a.scrollLeft(),b._z5=c("html").attr("style"),b._a6=c("body").attr("style"),b._b6=b.slider.attr("style"),c("body, html").css({overflow:"hidden",height:"100%",width:"100%",margin:"0",padding:"0"}),b.slider.addClass("rsFullscreen");var d;for(d=0;d<b.numSlides;d++)a=b.slides[d],a.isRendered=!1,a.bigImage&&(a.isBig=!0,a.isMedLoaded=a.isLoaded,a.isMedLoading=a.isLoading,a.medImage=a.image,a.medIW=a.iW,a.medIH=a.iH,a.slideId=-99,a.bigImage!==a.medImage&&(a.sizeType="big"),a.isLoaded=a.isBigLoaded,a.isLoading=!1,a.image=a.bigImage,a.images[0]=a.bigImage,a.iW=a.bigIW,a.iH=a.bigIH,a.isAppended=a.contentAdded=!1,b._c6(a));b.isFullscreen=!0,b._w5=!1,b.updateSliderSize(),b.ev.trigger("rsEnterFullscreen")}},exitFullscreen:function(a){var b=this;if(b._u5){if(!a)return void b._u5.cancelFullScreen(c("html")[0]);b._b.off(b._u5.fullScreenEventName)}if(!b._w5){b._w5=!0,b._b.off("keyup"+b.ns+"fullscreen"),b._t5&&b._b.off("keydown"+b.ns),c("html").attr("style",b._z5||""),c("body").attr("style",b._a6||"");var d;for(d=0;d<b.numSlides;d++)a=b.slides[d],a.isRendered=!1,a.bigImage&&(a.isBig=!1,a.slideId=-99,a.isBigLoaded=a.isLoaded,a.isBigLoading=a.isLoading,a.bigImage=a.image,a.bigIW=a.iW,a.bigIH=a.iH,a.isLoaded=a.isMedLoaded,a.isLoading=!1,a.image=a.medImage,a.images[0]=a.medImage,a.iW=a.medIW,a.iH=a.medIH,a.isAppended=a.contentAdded=!1,b._c6(a,!0),a.bigImage!==a.medImage&&(a.sizeType="med"));b.isFullscreen=!1,a=c(window),a.scrollTop(b._x5),a.scrollLeft(b._y5),b._w5=!1,b.slider.removeClass("rsFullscreen"),b.updateSliderSize(),setTimeout(function(){b.updateSliderSize()},1),b.ev.trigger("rsExitFullscreen")}},_c6:function(a,b){var d=a.isLoaded||a.isLoading?'<img class="rsImg rsMainSlideImage" src="'+a.image+'"/>':'<a class="rsImg rsMainSlideImage" href="'+a.image+'"></a>';a.content.hasClass("rsImg")?a.content=c(d):a.content.find(".rsImg").eq(0).replaceWith(d),a.isLoaded||a.isLoading||!a.holder||a.holder.html(a.content)}}),c.rsModules.fullscreen=c.rsProto._q5}(jQuery),function(b){b.extend(b.rsProto,{_x4:function(){var d,a=this;a._y4={enabled:!1,stopAtAction:!0,pauseOnHover:!0,delay:2e3},!a.st.autoPlay&&a.st.autoplay&&(a.st.autoPlay=a.st.autoplay),a.st.autoPlay=b.extend({},a._y4,a.st.autoPlay),a.st.autoPlay.enabled&&(a.ev.on("rsBeforeParseNode",function(a,c,f){c=b(c),(d=c.attr("data-rsDelay"))&&(f.customDelay=parseInt(d,10))}),a.ev.one("rsAfterInit",function(){a._z4()}),a.ev.on("rsBeforeDestroy",function(){a.stopAutoPlay(),a.slider.off("mouseenter mouseleave"),b(window).off("blur"+a.ns+" focus"+a.ns)}))},_z4:function(){var a=this;a.startAutoPlay(),a.ev.on("rsAfterContentSet",function(b,e){a._l2||a._r2||!a._a5||e!==a.currSlide||a._b5()}),a.ev.on("rsDragRelease",function(){a._a5&&a._c5&&(a._c5=!1,a._b5())}),a.ev.on("rsAfterSlideChange",function(){a._a5&&a._c5&&(a._c5=!1,a.currSlide.isLoaded&&a._b5())}),a.ev.on("rsDragStart",function(){a._a5&&(a.st.autoPlay.stopAtAction?a.stopAutoPlay():(a._c5=!0,a._d5()))}),a.ev.on("rsBeforeMove",function(b,e,c){a._a5&&(c&&a.st.autoPlay.stopAtAction?a.stopAutoPlay():(a._c5=!0,a._d5()))}),a._e5=!1,a.ev.on("rsVideoStop",function(){a._a5&&(a._e5=!1,a._b5())}),a.ev.on("rsVideoPlay",function(){a._a5&&(a._c5=!1,a._d5(),a._e5=!0)}),b(window).on("blur"+a.ns,function(){a._a5&&(a._c5=!0,a._d5())}).on("focus"+a.ns,function(){a._a5&&a._c5&&(a._c5=!1,a._b5())}),a.st.autoPlay.pauseOnHover&&(a._f5=!1,a.slider.hover(function(){a._a5&&(a._c5=!1,a._d5(),a._f5=!0)},function(){a._a5&&(a._f5=!1,a._b5())}))},toggleAutoPlay:function(){this._a5?this.stopAutoPlay():this.startAutoPlay()},startAutoPlay:function(){this._a5=!0,this.currSlide.isLoaded&&this._b5()},stopAutoPlay:function(){this._e5=this._f5=this._c5=this._a5=!1,this._d5()},_b5:function(){var a=this;a._f5||a._e5||(a._g5=!0,a._h5&&clearTimeout(a._h5),a._h5=setTimeout(function(){var b;a._z||a.st.loopRewind||(b=!0,a.st.loopRewind=!0),a.next(!0),b&&(a.st.loopRewind=!1)},a.currSlide.customDelay?a.currSlide.customDelay:a.st.autoPlay.delay))},_d5:function(){this._f5||this._e5||(this._g5=!1,this._h5&&(clearTimeout(this._h5),this._h5=null))}}),b.rsModules.autoplay=b.rsProto._x4}(jQuery),function(f){f.extend(f.rsProto,{_z6:function(){var a=this;a._a7={autoHideArrows:!0,autoHideControlNav:!1,autoHideBlocks:!1,autoHideCaption:!1,disableCSS3inFF:!0,youTubeCode:'<iframe src="http://www.youtube.com/embed/%id%?rel=1&showinfo=0&autoplay=1&wmode=transparent" frameborder="no"></iframe>',vimeoCode:'<iframe src="http://player.vimeo.com/video/%id%?byline=0&portrait=0&autoplay=1" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},a.st.video=f.extend({},a._a7,a.st.video),a.ev.on("rsBeforeSizeSet",function(){a._b7&&setTimeout(function(){var b=a._r1,b=b.hasClass("rsVideoContainer")?b:b.find(".rsVideoContainer");a._c7&&a._c7.css({width:b.width(),height:b.height()})},32)});var d=a._a.mozilla;a.ev.on("rsAfterParseNode",function(b,c,e){if(b=f(c),e.videoURL){a.st.video.disableCSS3inFF&&d&&(a._e=a._f=!1),c=f('<div class="rsVideoContainer"></div>');var g=f('<div class="rsBtnCenterer"><div class="rsPlayBtn"><div class="rsPlayBtnIcon"></div></div></div>');b.hasClass("rsImg")?e.content=c.append(b).append(g):e.content.find(".rsImg").wrap(c).after(g)}}),a.ev.on("rsAfterSlideChange",function(){a.stopVideo()})},toggleVideo:function(){return this._b7?this.stopVideo():this.playVideo()},playVideo:function(){var a=this;if(!a._b7){var d=a.currSlide;if(!d.videoURL)return!1;a._d7=d;var c,e,b=a._e7=d.content,d=d.videoURL;return d.match(/youtu\.be/i)||d.match(/youtube\.com/i)?(e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,(e=d.match(e))&&11==e[7].length&&(c=e[7]),void 0!==c&&(a._c7=a.st.video.youTubeCode.replace("%id%",c))):d.match(/vimeo\.com/i)&&(e=/(www\.)?vimeo.com\/(\d+)($|\/)/,(e=d.match(e))&&(c=e[2]),void 0!==c&&(a._c7=a.st.video.vimeoCode.replace("%id%",c))),a.videoObj=f(a._c7),a.ev.trigger("rsOnCreateVideoElement",[d]),a.videoObj.length&&(a._c7=f('<div class="rsVideoFrameHolder"><div class="rsPreloader"></div><div class="rsCloseVideoBtn"><div class="rsCloseVideoIcn"></div></div></div>'),a._c7.find(".rsPreloader").after(a.videoObj),b=b.hasClass("rsVideoContainer")?b:b.find(".rsVideoContainer"),a._c7.css({width:b.width(),height:b.height()}).find(".rsCloseVideoBtn").off("click.rsv").on("click.rsv",function(b){return a.stopVideo(),b.preventDefault(),b.stopPropagation(),!1}),b.append(a._c7),a.isIPAD&&b.addClass("rsIOSVideo"),a._f7(!1),setTimeout(function(){a._c7.addClass("rsVideoActive")},10),a.ev.trigger("rsVideoPlay"),a._b7=!0),!0}return!1},stopVideo:function(){var a=this;return a._b7?(a.isIPAD&&a.slider.find(".rsCloseVideoBtn").remove(),a._f7(!0),setTimeout(function(){a.ev.trigger("rsOnDestroyVideoElement",[a.videoObj]);var d=a._c7.find("iframe");if(d.length)try{d.attr("src","")}catch(b){}a._c7.remove(),a._c7=null},16),a.ev.trigger("rsVideoStop"),a._b7=!1,!0):!1},_f7:function(a,d){var b=[],c=this.st.video;if(c.autoHideArrows&&(this._c2&&(b.push(this._c2,this._d2),this._e2=!a),this._v5&&b.push(this._v5)),c.autoHideControlNav&&this._k5&&b.push(this._k5),c.autoHideBlocks&&this._d7.animBlocks&&b.push(this._d7.animBlocks),c.autoHideCaption&&this.globalCaption&&b.push(this.globalCaption),this.slider[a?"removeClass":"addClass"]("rsVideoPlaying"),b.length)for(c=0;c<b.length;c++)a?b[c].removeClass("rsHidden"):b[c].addClass("rsHidden")}}),f.rsModules.video=f.rsProto._z6}(jQuery),function(l){l.extend(l.rsProto,{_p4:function(){function m(){var g=a.currSlide;if(a.currSlide&&a.currSlide.isLoaded&&a._t4!==g){if(0<a._s4.length){for(b=0;b<a._s4.length;b++)clearTimeout(a._s4[b]);a._s4=[]}if(0<a._r4.length){var f;for(b=0;b<a._r4.length;b++)(f=a._r4[b])&&(a._e?(f.block.css(a._g+a._u1,"0s"),f.block.css(f.css)):f.block.stop(!0).css(f.css),a._t4=null,g.animBlocksDisplayed=!1);a._r4=[]}g.animBlocks&&(g.animBlocksDisplayed=!0,a._t4=g,a._u4(g.animBlocks))}}var b,a=this;a._q4={fadeEffect:!0,moveEffect:"top",moveOffset:20,speed:400,easing:"easeOutSine",delay:200},a.st.block=l.extend({},a._q4,a.st.block),a._r4=[],a._s4=[],a.ev.on("rsAfterInit",function(){m()}),a.ev.on("rsBeforeParseNode",function(a,b,d){b=l(b),d.animBlocks=b.find(".rsABlock").css("display","none"),d.animBlocks.length||(b.hasClass("rsABlock")?d.animBlocks=b.css("display","none"):d.animBlocks=!1)}),a.ev.on("rsAfterContentSet",function(b,f){f.id===a.slides[a.currSlideId].id&&setTimeout(function(){m()},a.st.fadeinLoadedSlide?300:0)}),a.ev.on("rsAfterSlideChange",function(){m()})},_v4:function(l,a){setTimeout(function(){l.css(a)},6)},_u4:function(m){var b,g,f,d,h,e,n,a=this;a._s4=[],m.each(function(m){b=l(this),g={},f={},d=null;var c=b.attr("data-move-offset"),c=c?parseInt(c,10):a.st.block.moveOffset;if(c>0&&((e=b.data("move-effect"))?(e=e.toLowerCase(),"none"===e?e=!1:"left"!==e&&"top"!==e&&"bottom"!==e&&"right"!==e&&(e=a.st.block.moveEffect,"none"===e&&(e=!1))):e=a.st.block.moveEffect,e&&"none"!==e)){var p;p="right"===e||"left"===e?!0:!1;var k;n=!1,a._e?(k=0,h=a._x1):(p?isNaN(parseInt(b.css("right"),10))?h="left":(h="right",n=!0):isNaN(parseInt(b.css("bottom"),10))?h="top":(h="bottom",n=!0),h="margin-"+h,n&&(c=-c),a._e?k=parseInt(b.css(h),10):(k=b.data("rs-start-move-prop"),void 0===k&&(k=parseInt(b.css(h),10),isNaN(k)&&(k=0),b.data("rs-start-move-prop",k)))),f[h]=a._m4("top"===e||"left"===e?k-c:k+c,p),g[h]=a._m4(k,p)}c=b.attr("data-fade-effect"),c?("none"===c.toLowerCase()||"false"===c.toLowerCase())&&(c=!1):c=a.st.block.fadeEffect,c&&(f.opacity=0,g.opacity=1),(c||e)&&(d={},d.hasFade=Boolean(c),Boolean(e)&&(d.moveProp=h,d.hasMove=!0),d.speed=b.data("speed"),isNaN(d.speed)&&(d.speed=a.st.block.speed),d.easing=b.data("easing"),d.easing||(d.easing=a.st.block.easing),d.css3Easing=l.rsCSS3Easing[d.easing],d.delay=b.data("delay"),isNaN(d.delay)&&(d.delay=a.st.block.delay*m)),c={},a._e&&(c[a._g+a._u1]="0ms"),c.moveProp=g.moveProp,c.opacity=g.opacity,c.display="none",a._r4.push({block:b,css:c}),a._v4(b,f),a._s4.push(setTimeout(function(b,d,c,e){return function(){if(b.css("display","block"),c){var g={};if(a._e){var f="";c.hasMove&&(f+=c.moveProp),c.hasFade&&(c.hasMove&&(f+=", "),f+="opacity"),g[a._g+a._t1]=f,g[a._g+a._u1]=c.speed+"ms",g[a._g+a._v1]=c.css3Easing,b.css(g),setTimeout(function(){b.css(d)},24)}else setTimeout(function(){b.animate(d,c.speed,c.easing)},16)}delete a._s4[e]}}(b,g,d,m),6>=d.delay?12:d.delay))})}}),l.rsModules.animatedBlocks=l.rsProto._p4}(jQuery),function(b){b.extend(b.rsProto,{_w4:function(){var a=this;if(a.st.autoHeight){var b,c,e,f=!0,d=function(d){e=a.slides[a.currSlideId],(b=e.holder)&&(c=b.height())&&void 0!==c&&c>(a.st.minAutoHeight||30)&&(a._c4=c,a._e||!d?a._e1.css("height",c):a._e1.stop(!0,!0).animate({height:c},a.st.transitionSpeed),a.ev.trigger("rsAutoHeightChange",c),f&&(a._e&&setTimeout(function(){a._e1.css(a._g+"transition","height "+a.st.transitionSpeed+"ms ease-in-out")},16),f=!1))};a.ev.on("rsMaybeSizeReady.rsAutoHeight",function(a,b){e===b&&d()}),a.ev.on("rsAfterContentSet.rsAutoHeight",function(a,b){e===b&&d()}),a.slider.addClass("rsAutoHeight"),a.ev.one("rsAfterInit",function(){setTimeout(function(){d(!1),setTimeout(function(){a.slider.append('<div style="clear:both; float: none;"></div>')},16)},16)}),a.ev.on("rsBeforeAnimStart",function(){d(!0)}),a.ev.on("rsBeforeSizeSet",function(){setTimeout(function(){d(!1)},16)})}}}),b.rsModules.autoHeight=b.rsProto._w4}(jQuery),function(b){b.extend(b.rsProto,{_d6:function(){var a=this;a.st.globalCaption&&(a.ev.on("rsAfterInit",function(){a.globalCaption=b('<div class="rsGCaption"></div>').appendTo(a.st.globalCaptionInside?a._e1:a.slider),a.globalCaption.html(a.currSlide.caption)}),a.ev.on("rsBeforeAnimStart",function(){a.globalCaption.html(a.currSlide.caption)}))}}),b.rsModules.globalCaption=b.rsProto._d6}(jQuery),function(c){c.rsProto._o4=function(){var b,a=this;a.st.addActiveClass&&a.ev.on("rsOnUpdateNav",function(){b&&clearTimeout(b),b=setTimeout(function(){a._g4&&a._g4.removeClass("rsActiveSlide"),a._r1&&a._r1.addClass("rsActiveSlide"),b=null},50)})},c.rsModules.activeClass=c.rsProto._o4}(jQuery),function(d){d.extend(d.rsProto,{_o5:function(){var l,g,f,a=this;if(a._p5={enabled:!1,change:!1,prefix:""},a.st.deeplinking=d.extend({},a._p5,a.st.deeplinking),a.st.deeplinking.enabled){var k=a.st.deeplinking.change,c=a.st.deeplinking.prefix,e="#"+c,h=function(){var b=window.location.hash;return b&&0<b.indexOf(c)&&(b=parseInt(b.substring(e.length),10),b>=0)?b-1:-1},m=h();-1!==m&&(a.st.startSlideId=m),k&&(d(window).on("hashchange"+a.ns,function(b){l||(b=h(),0>b||(b>a.numSlides-1&&(b=a.numSlides-1),a.goTo(b)))}),a.ev.on("rsBeforeAnimStart",function(){g&&clearTimeout(g),f&&clearTimeout(f)}),a.ev.on("rsAfterSlideChange",function(){g&&clearTimeout(g),f&&clearTimeout(f),f=setTimeout(function(){l=!0,window.location.replace((""+window.location).split("#")[0]+e+(a.currSlideId+1)),g=setTimeout(function(){l=!1,g=null},60)},400)})),a.ev.on("rsBeforeDestroy",function(){g=f=null,k&&d(window).off("hashchange"+a.ns)})}}}),d.rsModules.deeplinking=d.rsProto._o5}(jQuery),function(d,a,l){function g(b){return b=b||location.href,"#"+b.replace(/^[^#]*#?(.*)$/,"$1")}var c,f="hashchange",k=document,e=d.event.special,h=k.documentMode,m="on"+f in a&&(h===l||h>7);d.fn[f]=function(b){return b?this.bind(f,b):this.trigger(f)},d.fn[f].delay=50,e[f]=d.extend(e[f],{setup:function(){return m?!1:void d(c.start)},teardown:function(){return m?!1:void d(c.stop)}}),c=function(){function b(){var c=g(),n=r(h);c!==h?(p(h=c,n),d(a).trigger(f)):n!==h&&(location.href=location.href.replace(/#.*/,"")+n),e=setTimeout(b,d.fn[f].delay)}var e,c={},h=g(),q=function(b){return b},p=q,r=q;return c.start=function(){e||b()},c.stop=function(){e&&clearTimeout(e),e=l},a.attachEvent&&!a.addEventListener&&!m&&function(){var a,e;c.start=function(){a||(e=(e=d.fn[f].src)&&e+g(),a=d('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){e||p(g()),b()}).attr("src",e||"javascript:0").insertAfter("body")[0].contentWindow,k.onpropertychange=function(){try{"title"===event.propertyName&&(a.document.title=k.title)}catch(b){}})},c.stop=q,r=function(){return g(a.location.href)},p=function(b,e){var c=a.document,g=d.fn[f].domain;b!==e&&(c.title=k.title,c.open(),g&&c.write('<script>document.domain="'+g+'"</script>'),c.close(),a.location.hash=b)}}(),c}()}(jQuery,this),function(d){d.rsProto._g7=function(){var a=this;a.st.visibleNearby&&a.st.visibleNearby.enabled&&(a._h7={enabled:!0,centerArea:.6,center:!0,breakpoint:0,breakpointCenterArea:.8,hiddenOverflow:!0,navigateByCenterClick:!1},a.st.visibleNearby=d.extend({},a._h7,a.st.visibleNearby),a.ev.one("rsAfterPropsSetup",function(){a._i7=a._e1.css("overflow","visible").wrap('<div class="rsVisibleNearbyWrap"></div>').parent(),a.st.visibleNearby.hiddenOverflow||a._i7.css("overflow","visible"),a._o1=a.st.controlsInside?a._i7:a.slider}),a.ev.on("rsAfterSizePropSet",function(){var b,c=a.st.visibleNearby;b=c.breakpoint&&a.width<c.breakpoint?c.breakpointCenterArea:c.centerArea,a._h?(a._b4*=b,a._i7.css({height:a._c4,width:a._b4/b}),a._d=a._b4*(1-b)/2/b):(a._c4*=b,a._i7.css({height:a._c4/b,width:a._b4}),a._d=a._c4*(1-b)/2/b),c.navigateByCenterClick||(a._q=a._h?a._b4:a._c4),c.center&&a._e1.css("margin-"+(a._h?"left":"top"),a._d)}))},d.rsModules.visibleNearby=d.rsProto._g7}(jQuery),function($){function slideTo(e,$slider,x,i,t){if($slider.items.filter("li:eq("+i+")").addClass("active").siblings(".active").removeClass("active"),"undefined"==typeof t&&(t="fast"),t)$slider.animate({scrollLeft:x},t,function(){checkInfinite($slider)});else{$slider.scrollLeft(x),checkInfinite($slider)}}function checkInfinite($slider){var $active=$slider.items.filter(".active");if($active.hasClass("-before")){var i=$active.prevAll().size();$active.removeClass("active"),$active=$slider.items.filter(":not(.-before):eq("+i+")").addClass("active"),$slider.scrollLeft($slider.scrollLeft()+$active.position().left)}else if($active.hasClass("-after")){var i=$active.prevAll(".-after").size();$active.removeClass("active"),$active=$slider.items.filter(":not(.-before):eq("+i+")").addClass("active"),$slider.scrollLeft($slider.scrollLeft()+$active.position().left)}}var methods={init:function(options){var options=$.extend({},$.fn.lemmonSlider.defaults,options);return this.each(function(){var $slider=$(this),data=$slider.data("slider");if(!data){var $sliderContainer=$slider.find(options.slider),$sliderControls=$slider.next().filter(".controls"),$items=$sliderContainer.find(options.items),originalWidth=1;$items.each(function(){originalWidth+=$(this).outerWidth(!0)}),$sliderContainer.width(originalWidth),options.slideToLast&&$sliderContainer.css("padding-right",$slider.width()),options.infinite&&($slider.attr("data-slider-infinite",!0),originalWidth=3*originalWidth,$sliderContainer.width(originalWidth),$items.clone().addClass("-after").insertAfter($items.filter(":last")),$items.filter(":first").before($items.clone().addClass("-before")),$items=$sliderContainer.find(options.items)),$slider.items=$items,$slider.options=options,$slider.bind("nextSlide",function(e,t){var scroll=$slider.scrollLeft(),x=0,slide=0;$items.each(function(i){0==x&&$(this).position().left>1&&(x=$(this).position().left,slide=i)}),x>0&&$sliderContainer.outerWidth()-scroll-$slider.width()-1>0?slideTo(e,$slider,scroll+x,slide,"fast"):options.loop&&slideTo(e,$slider,0,0,"slow")}),$slider.bind("prevSlide",function(e,t){var scroll=$slider.scrollLeft(),x=0,slide=0;if($items.each(function(i){$(this).position().left<0&&(x=$(this).position().left,slide=i)}),x)slideTo(e,$slider,scroll+x,slide,"fast");else if(options.loop){var a=$sliderContainer.outerWidth()-$slider.width(),b=$items.filter(":last").position().left;slide=$items.size()-1,a>b?slideTo(e,$slider,b,slide,"fast"):slideTo(e,$slider,a,slide,"fast")}}),$slider.bind("nextPage",function(e,t){var scroll=$slider.scrollLeft(),w=$slider.width(),x=0,slide=0;$items.each(function(i){$(this).position().left<w&&(x=$(this).position().left,slide=i)}),x>0&&originalWidth>scroll+w+1?slideTo(e,$slider,scroll+x,slide,"slow"):options.loop&&slideTo(e,$slider,0,0,"slow")}),$slider.bind("prevPage",function(e,t){var scroll=$slider.scrollLeft(),w=$slider.width(),x=0;if($items.each(function(i){$(this).position().left<1-w&&(x=$(this).next().position().left,slide=i)}),scroll)0==x?slideTo(e,$slider,0,0,"slow"):slideTo(e,$slider,scroll+x,slide,"slow");else if(options.loop){var a=$sliderContainer.outerWidth()-$slider.width(),b=$items.filter(":last").position().left;a>b?$slider.animate({scrollLeft:b},"slow"):$slider.animate({scrollLeft:a},"slow")}}),$slider.bind("slideTo",function(e,i,t){slideTo(e,$slider,$slider.scrollLeft()+$items.filter(":eq("+i+")").position().left,i,t)}),$sliderControls.find(".next-slide").click(function(){return $slider.trigger("nextSlide"),!1}),$sliderControls.find(".prev-slide").click(function(){return $slider.trigger("prevSlide"),!1}),$sliderControls.find(".next-page").click(function(){return $slider.trigger("nextPage"),!1}),$sliderControls.find(".prev-page").click(function(){return $slider.trigger("prevPage"),!1}),$slider.data("slider",{target:$slider,options:options})}})},addItem:function(options){var options=$.extend({},$.fn.lemmonSlider.defaults,options),$slider=$(this),$sliderContainer=$slider.find(options.slider);$slider.next().filter(".controls"),$sliderContainer.find(options.items);return options.infinite=$slider.attr("data-slider-infinite"),options.item?(methods.destroy.apply(this),options.prepend?$sliderContainer.prepend(options.item):$sliderContainer.append(options.item),void methods.init.apply(this,[options])):!1},destroy:function(){return this.each(function(){var $slider=$(this),$sliderControls=$slider.next().filter(".controls"),$items=$slider.find("> *:first > *");$slider.data("slider");$slider.unbind("nextSlide"),$slider.unbind("prevSlide"),$slider.unbind("nextPage"),$slider.unbind("prevPage"),$slider.unbind("slideTo"),$sliderControls.find(".next-slide").unbind("click"),$sliderControls.find(".prev-slide").unbind("click"),$sliderControls.find(".next-page").unbind("click"),$sliderControls.find(".next-page").unbind("click"),$slider.removeData("slider"),$slider.attr("data-slider-infinite")&&$.merge($items.filter(".-before"),$items.filter(".-after")).each(function(index,item){$(item).remove()})})}};$.fn.lemmonSlider=function(method,options){return null==options&&(options={}),methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.lemmonSlider"):methods.init.apply(this,arguments)},$.fn.lemmonSlider.defaults={items:"> *",loop:!0,slideToLast:!1,slider:"> *:first",infinite:!1}}(jQuery),function($,window,document,undefined){function Owl(element,options){this.settings=null,this.options=$.extend({},Owl.Defaults,options),this.$element=$(element),this.drag=$.extend({},drag),this.state=$.extend({},state),this.e=$.extend({},e),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],$.each(Owl.Plugins,$.proxy(function(key,plugin){this._plugins[key[0].toLowerCase()+key.slice(1)]=new plugin(this)},this)),$.each(Owl.Pipe,$.proxy(function(priority,worker){this._pipe.push({filter:worker.filter,run:$.proxy(worker.run,this)})},this)),this.setup(),this.initialize()}function getTouches(event){if(event.touches!==undefined)return{x:event.touches[0].pageX,y:event.touches[0].pageY};if(event.touches===undefined){if(event.pageX!==undefined)return{x:event.pageX,y:event.pageY};if(event.pageX===undefined)return{x:event.clientX,y:event.clientY}}}function isStyleSupported(array){var p,s,fake=document.createElement("div"),list=array;for(p in list)if(s=list[p],"undefined"!=typeof fake.style[s])return fake=null,[s,p];return[!1]}function isTransition(){return isStyleSupported(["transition","WebkitTransition","MozTransition","OTransition"])[1]}function isTransform(){return isStyleSupported(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0]}function isPerspective(){return isStyleSupported(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0]}function isTouchSupport(){return"ontouchstart"in window||!!navigator.msMaxTouchPoints}function isTouchSupportIE(){return window.navigator.msPointerEnabled}var drag,state,e;drag={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},state={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},e={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,
_goToLoop:null,_checkVisibile:null},Owl.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:window,responsiveClass:!1,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"},Owl.Width={Default:"default",Inner:"inner",Outer:"outer"},Owl.Plugins={},Owl.Pipe=[{filter:["width","items","settings"],run:function(cache){cache.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){var cached=this._clones,clones=this.$stage.children(".cloned");(clones.length!==cached.length||!this.settings.loop&&cached.length>0)&&(this.$stage.children(".cloned").remove(),this._clones=[])}},{filter:["items","settings"],run:function(){var i,n,clones=this._clones,items=this._items,delta=this.settings.loop?clones.length-Math.max(2*this.settings.items,4):0;for(i=0,n=Math.abs(delta/2);n>i;i++)delta>0?(this.$stage.children().eq(items.length+clones.length-1).remove(),clones.pop(),this.$stage.children().eq(0).remove(),clones.pop()):(clones.push(clones.length/2),this.$stage.append(items[clones[clones.length-1]].clone().addClass("cloned")),clones.push(items.length-1-(clones.length-1)/2),this.$stage.prepend(items[clones[clones.length-1]].clone().addClass("cloned")))}},{filter:["width","items","settings"],run:function(){var merge,i,n,rtl=this.settings.rtl?1:-1,width=(this.width()/this.settings.items).toFixed(3),coordinate=0;for(this._coordinates=[],i=0,n=this._clones.length+this._items.length;n>i;i++)merge=this._mergers[this.relative(i)],merge=this.settings.mergeFit&&Math.min(merge,this.settings.items)||merge,coordinate+=(this.settings.autoWidth?this._items[this.relative(i)].width()+this.settings.margin:width*merge)*rtl,this._coordinates.push(coordinate)}},{filter:["width","items","settings"],run:function(){var i,n,width=(this.width()/this.settings.items).toFixed(3),css={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,"padding-left":this.settings.stagePadding||"","padding-right":this.settings.stagePadding||""};if(this.$stage.css(css),css={width:this.settings.autoWidth?"auto":width-this.settings.margin},css[this.settings.rtl?"margin-left":"margin-right"]=this.settings.margin,!this.settings.autoWidth&&$.grep(this._mergers,function(v){return v>1}).length>0)for(i=0,n=this._coordinates.length;n>i;i++)css.width=Math.abs(this._coordinates[i])-Math.abs(this._coordinates[i-1]||0)-this.settings.margin,this.$stage.children().eq(i).css(css);else this.$stage.children().css(css)}},{filter:["width","items","settings"],run:function(cache){cache.current&&this.reset(this.$stage.children().index(cache.current))}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var inner,outer,i,n,rtl=this.settings.rtl?1:-1,padding=2*this.settings.stagePadding,begin=this.coordinates(this.current())+padding,end=begin+this.width()*rtl,matches=[];for(i=0,n=this._coordinates.length;n>i;i++)inner=this._coordinates[i-1]||0,outer=Math.abs(this._coordinates[i])+padding*rtl,(this.op(inner,"<=",begin)&&this.op(inner,">",end)||this.op(outer,"<",begin)&&this.op(outer,">",end))&&matches.push(i);this.$stage.children("."+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(":eq("+matches.join("), :eq(")+")").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children("."+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],Owl.prototype.initialize=function(){if(this.trigger("initialize"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass("owl-rtl",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var imgs,nestedSelector,width;if(imgs=this.$element.find("img"),nestedSelector=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:undefined,width=this.$element.children(nestedSelector).width(),imgs.length&&0>=width)return this.preloadAutoWidthImages(imgs),!1}this.$element.addClass("owl-loading"),this.$stage=$("<"+this.settings.stageElement+' class="owl-stage"/>').wrap('<div class="owl-stage-outer">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass("owl-loading").addClass("owl-loaded"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger("initialized")},Owl.prototype.setup=function(){var viewport=this.viewport(),overwrites=this.options.responsive,match=-1,settings=null;overwrites?($.each(overwrites,function(breakpoint){viewport>=breakpoint&&breakpoint>match&&(match=Number(breakpoint))}),settings=$.extend({},this.options,overwrites[match]),delete settings.responsive,settings.responsiveClass&&this.$element.attr("class",function(i,c){return c.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+match)):settings=$.extend({},this.options),(null===this.settings||this._breakpoint!==match)&&(this.trigger("change",{property:{name:"settings",value:settings}}),this._breakpoint=match,this.settings=settings,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}}))},Owl.prototype.optionsLogic=function(){this.$element.toggleClass("owl-center",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},Owl.prototype.prepare=function(item){var event=this.trigger("prepare",{content:item});return event.data||(event.data=$("<"+this.settings.itemElement+"/>").addClass(this.settings.itemClass).append(item)),this.trigger("prepared",{content:event.data}),event.data},Owl.prototype.update=function(){for(var i=0,n=this._pipe.length,filter=$.proxy(function(p){return this[p]},this._invalidated),cache={};n>i;)(this._invalidated.all||$.grep(this._pipe[i].filter,filter).length>0)&&this._pipe[i].run(cache),i++;this._invalidated={}},Owl.prototype.width=function(dimension){switch(dimension=dimension||Owl.Width.Default){case Owl.Width.Inner:case Owl.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},Owl.prototype.refresh=function(){if(0===this._items.length)return!1;(new Date).getTime();this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$stage.addClass("owl-refresh"),this.update(),this.$stage.removeClass("owl-refresh"),this.state.orientation=window.orientation,this.watchVisibility(),this.trigger("refreshed")},Owl.prototype.eventsCall=function(){this.e._onDragStart=$.proxy(function(e){this.onDragStart(e)},this),this.e._onDragMove=$.proxy(function(e){this.onDragMove(e)},this),this.e._onDragEnd=$.proxy(function(e){this.onDragEnd(e)},this),this.e._onResize=$.proxy(function(e){this.onResize(e)},this),this.e._transitionEnd=$.proxy(function(e){this.transitionEnd(e)},this),this.e._preventClick=$.proxy(function(e){this.preventClick(e)},this)},Owl.prototype.onThrottledResize=function(){window.clearTimeout(this.resizeTimer),this.resizeTimer=window.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},Owl.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.trigger("resize").isDefaultPrevented()?!1:(this._width=this.$element.width(),this.invalidate("width"),this.refresh(),void this.trigger("resized")):!1},Owl.prototype.eventsRouter=function(event){var type=event.type;"mousedown"===type||"touchstart"===type?this.onDragStart(event):"mousemove"===type||"touchmove"===type?this.onDragMove(event):"mouseup"===type||"touchend"===type?this.onDragEnd(event):"touchcancel"===type&&this.onDragEnd(event)},Owl.prototype.internalEvents=function(){var isTouchIE=(isTouchSupport(),isTouchSupportIE());this.settings.mouseDrag?(this.$stage.on("mousedown",$.proxy(function(event){this.eventsRouter(event)},this)),this.$stage.on("dragstart",function(){return!1}),this.$stage.get(0).onselectstart=function(){return!1}):this.$element.addClass("owl-text-select-on"),this.settings.touchDrag&&!isTouchIE&&this.$stage.on("touchstart touchcancel",$.proxy(function(event){this.eventsRouter(event)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(window,"resize",$.proxy(this.onThrottledResize,this))},Owl.prototype.onDragStart=function(event){var ev,pageX,pageY,animatedPos;if(ev=event.originalEvent||event||window.event,3===ev.which||this.state.isTouch)return!1;if("mousedown"===ev.type&&this.$stage.addClass("owl-grab"),this.trigger("drag"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,pageX=getTouches(ev).x,pageY=getTouches(ev).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d)animatedPos=this.getTransformProperty(),this.drag.offsetX=animatedPos,this.animate(animatedPos),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1,!1;this.drag.startX=pageX-this.drag.offsetX,this.drag.startY=pageY-this.drag.offsetY,this.drag.start=pageX-this.drag.startX,this.drag.targetEl=ev.target||ev.srcElement,this.drag.updatedX=this.drag.start,("IMG"===this.drag.targetEl.tagName||"A"===this.drag.targetEl.tagName)&&(this.drag.targetEl.draggable=!1),$(document).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",$.proxy(function(event){this.eventsRouter(event)},this))},Owl.prototype.onDragMove=function(event){var ev,pageX,pageY,minValue,maxValue,pull;this.state.isTouch&&(this.state.isScrolling||(ev=event.originalEvent||event||window.event,pageX=getTouches(ev).x,pageY=getTouches(ev).y,this.drag.currentX=pageX-this.drag.startX,this.drag.currentY=pageY-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?"right":"left":this.drag.distance>0&&(this.state.direction=this.settings.rtl?"left":"right"),this.settings.loop?this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&"right"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&"left"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(minValue=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),maxValue=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),pull=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,minValue+pull),maxValue+pull)),(this.drag.distance>8||this.drag.distance<-8)&&(ev.preventDefault!==undefined?ev.preventDefault():ev.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},Owl.prototype.onDragEnd=function(event){var compareTimes,distanceAbs,closest;if(this.state.isTouch){if("mouseup"===event.type&&this.$stage.removeClass("owl-grab"),this.trigger("dragged"),this.drag.targetEl.removeAttribute("draggable"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0)return this.state.inMotion=!1,!1;this.drag.endTime=(new Date).getTime(),compareTimes=this.drag.endTime-this.drag.startTime,distanceAbs=Math.abs(this.drag.distance),(distanceAbs>3||compareTimes>300)&&this.removeClick(this.drag.targetEl),closest=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(closest),this.invalidate("position"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(closest)||this.transitionEnd(),this.drag.distance=0,$(document).off(".owl.dragEvents")}},Owl.prototype.removeClick=function(target){this.drag.targetEl=target,$(target).on("click.preventClick",this.e._preventClick),window.setTimeout(function(){$(target).off("click.preventClick")},300)},Owl.prototype.preventClick=function(ev){ev.preventDefault?ev.preventDefault():ev.returnValue=!1,ev.stopPropagation&&ev.stopPropagation(),$(ev.target).off("click.preventClick")},Owl.prototype.getTransformProperty=function(){var transform,matrix3d;return transform=window.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+"transform"),transform=transform.replace(/matrix(3d)?\(|\)/g,"").split(","),matrix3d=16===transform.length,matrix3d!==!0?transform[4]:transform[12]},Owl.prototype.closest=function(coordinate){var position=-1,pull=30,width=this.width(),coordinates=this.coordinates();return this.settings.freeDrag||$.each(coordinates,$.proxy(function(index,value){return coordinate>value-pull&&value+pull>coordinate?position=index:this.op(coordinate,"<",value)&&this.op(coordinate,">",coordinates[index+1]||value-width)&&(position="left"===this.state.direction?index+1:index),-1===position},this)),this.settings.loop||(this.op(coordinate,">",coordinates[this.minimum()])?position=coordinate=this.minimum():this.op(coordinate,"<",coordinates[this.maximum()])&&(position=coordinate=this.maximum())),position},Owl.prototype.animate=function(coordinate){this.trigger("translate"),this.state.inMotion=this.speed()>0,this.support3d?this.$stage.css({transform:"translate3d("+coordinate+"px,0px, 0px)",transition:this.speed()/1e3+"s"}):this.state.isTouch?this.$stage.css({left:coordinate+"px"}):this.$stage.animate({left:coordinate},this.speed()/1e3,this.settings.fallbackEasing,$.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},Owl.prototype.current=function(position){if(position===undefined)return this._current;if(0===this._items.length)return undefined;if(position=this.normalize(position),this._current!==position){var event=this.trigger("change",{property:{name:"position",value:position}});event.data!==undefined&&(position=this.normalize(event.data)),this._current=position,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},Owl.prototype.invalidate=function(part){this._invalidated[part]=!0},Owl.prototype.reset=function(position){position=this.normalize(position),position!==undefined&&(this._speed=0,this._current=position,this.suppress(["translate","translated"]),this.animate(this.coordinates(position)),this.release(["translate","translated"]))},Owl.prototype.normalize=function(position,relative){var n=relative?this._items.length:this._items.length+this._clones.length;return!$.isNumeric(position)||1>n?undefined:position=this._clones.length?(position%n+n)%n:Math.max(this.minimum(relative),Math.min(this.maximum(relative),position))},Owl.prototype.relative=function(position){return position=this.normalize(position),position-=this._clones.length/2,this.normalize(position,!0)},Owl.prototype.maximum=function(relative){var maximum,width,coordinate,i=0,settings=this.settings;if(relative)return this._items.length-1;if(!settings.loop&&settings.center)maximum=this._items.length-1;else if(settings.loop||settings.center)if(settings.loop||settings.center)maximum=this._items.length+settings.items;else{if(!settings.autoWidth&&!settings.merge)throw"Can not detect maximum absolute position.";for(revert=settings.rtl?1:-1,width=this.$stage.width()-this.$element.width();(coordinate=this.coordinates(i))&&!(coordinate*revert>=width);)maximum=++i}else maximum=this._items.length-settings.items;return maximum},Owl.prototype.minimum=function(relative){return relative?0:this._clones.length/2},Owl.prototype.items=function(position){return position===undefined?this._items.slice():(position=this.normalize(position,!0),this._items[position])},Owl.prototype.mergers=function(position){return position===undefined?this._mergers.slice():(position=this.normalize(position,!0),this._mergers[position])},Owl.prototype.clones=function(position){var odd=this._clones.length/2,even=odd+this._items.length,map=function(index){return index%2===0?even+index/2:odd-(index+1)/2};return position===undefined?$.map(this._clones,function(v,i){return map(i)}):$.map(this._clones,function(v,i){return v===position?map(i):null})},Owl.prototype.speed=function(speed){return speed!==undefined&&(this._speed=speed),this._speed},Owl.prototype.coordinates=function(position){var coordinate=null;return position===undefined?$.map(this._coordinates,$.proxy(function(coordinate,index){return this.coordinates(index)},this)):(this.settings.center?(coordinate=this._coordinates[position],coordinate+=(this.width()-coordinate+(this._coordinates[position-1]||0))/2*(this.settings.rtl?-1:1)):coordinate=this._coordinates[position-1]||0,coordinate)},Owl.prototype.duration=function(from,to,factor){return Math.min(Math.max(Math.abs(to-from),1),6)*Math.abs(factor||this.settings.smartSpeed)},Owl.prototype.to=function(position,speed){if(this.settings.loop){var distance=position-this.relative(this.current()),revert=this.current(),before=this.current(),after=this.current()+distance,direction=0>before-after?!0:!1,items=this._clones.length+this._items.length;after<this.settings.items&&direction===!1?(revert=before+this._items.length,this.reset(revert)):after>=items-this.settings.items&&direction===!0&&(revert=before-this._items.length,this.reset(revert)),window.clearTimeout(this.e._goToLoop),this.e._goToLoop=window.setTimeout($.proxy(function(){this.speed(this.duration(this.current(),revert+distance,speed)),this.current(revert+distance),this.update()},this),30)}else this.speed(this.duration(this.current(),position,speed)),this.current(position),this.update()},Owl.prototype.next=function(speed){speed=speed||!1,this.to(this.relative(this.current())+1,speed)},Owl.prototype.prev=function(speed){speed=speed||!1,this.to(this.relative(this.current())-1,speed)},Owl.prototype.transitionEnd=function(event){return event!==undefined&&(event.stopPropagation(),(event.target||event.srcElement||event.originalTarget)!==this.$stage.get(0))?!1:(this.state.inMotion=!1,void this.trigger("translated"))},Owl.prototype.viewport=function(){var width;if(this.options.responsiveBaseElement!==window)width=$(this.options.responsiveBaseElement).width();else if(window.innerWidth)width=window.innerWidth;else{if(!document.documentElement||!document.documentElement.clientWidth)throw"Can not detect viewport width.";width=document.documentElement.clientWidth}return width},Owl.prototype.replace=function(content){this.$stage.empty(),this._items=[],content&&(content=content instanceof jQuery?content:$(content)),this.settings.nestedItemSelector&&(content=content.find("."+this.settings.nestedItemSelector)),content.filter(function(){return 1===this.nodeType}).each($.proxy(function(index,item){item=this.prepare(item),this.$stage.append(item),this._items.push(item),this._mergers.push(1*item.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)},this)),this.reset($.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},Owl.prototype.add=function(content,position){position=position===undefined?this._items.length:this.normalize(position,!0),this.trigger("add",{content:content,position:position}),0===this._items.length||position===this._items.length?(this.$stage.append(content),this._items.push(content),this._mergers.push(1*content.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)):(this._items[position].before(content),this._items.splice(position,0,content),this._mergers.splice(position,0,1*content.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)),this.invalidate("items"),this.trigger("added",{content:content,position:position})},Owl.prototype.remove=function(position){position=this.normalize(position,!0),position!==undefined&&(this.trigger("remove",{content:this._items[position],position:position}),this._items[position].remove(),this._items.splice(position,1),this._mergers.splice(position,1),this.invalidate("items"),this.trigger("removed",{content:null,position:position}))},Owl.prototype.addTriggerableEvents=function(){var handler=$.proxy(function(callback,event){return $.proxy(function(e){e.relatedTarget!==this&&(this.suppress([event]),callback.apply(this,[].slice.call(arguments,1)),this.release([event]))},this)},this);$.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},$.proxy(function(event,callback){this.$element.on(event+".owl.carousel",handler(callback,event+".owl.carousel"))},this))},Owl.prototype.watchVisibility=function(){function isElVisible(el){return el.offsetWidth>0&&el.offsetHeight>0}function checkVisible(){isElVisible(this.$element.get(0))&&(this.$element.removeClass("owl-hidden"),this.refresh(),window.clearInterval(this.e._checkVisibile))}isElVisible(this.$element.get(0))||(this.$element.addClass("owl-hidden"),window.clearInterval(this.e._checkVisibile),this.e._checkVisibile=window.setInterval($.proxy(checkVisible,this),500))},Owl.prototype.preloadAutoWidthImages=function(imgs){var loaded,that,$el,img;loaded=0,that=this,imgs.each(function(i,el){$el=$(el),img=new Image,img.onload=function(){loaded++,$el.attr("src",img.src),$el.css("opacity",1),loaded>=imgs.length&&(that.state.imagesLoaded=!0,that.initialize())},img.src=$el.attr("src")||$el.attr("data-src")||$el.attr("data-src-retina")})},Owl.prototype.destroy=function(){this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&$(window).off("resize.owl.carousel"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd);for(var i in this._plugins)this._plugins[i].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off("mousedown touchstart touchcancel"),$(document).off(".owl.dragEvents"),this.$stage.get(0).onselectstart=function(){},this.$stage.off("dragstart",function(){return!1})),this.$element.off(".owl"),this.$stage.children(".cloned").remove(),this.e=null,this.$element.removeData("owlCarousel"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},Owl.prototype.op=function(a,o,b){var rtl=this.settings.rtl;switch(o){case"<":return rtl?a>b:b>a;case">":return rtl?b>a:a>b;case">=":return rtl?b>=a:a>=b;case"<=":return rtl?a>=b:b>=a}},Owl.prototype.on=function(element,event,listener,capture){element.addEventListener?element.addEventListener(event,listener,capture):element.attachEvent&&element.attachEvent("on"+event,listener)},Owl.prototype.off=function(element,event,listener,capture){element.removeEventListener?element.removeEventListener(event,listener,capture):element.detachEvent&&element.detachEvent("on"+event,listener)},Owl.prototype.trigger=function(name,data,namespace){var status={item:{count:this._items.length,index:this.current()}},handler=$.camelCase($.grep(["on",name,namespace],function(v){return v}).join("-").toLowerCase()),event=$.Event([name,"owl",namespace||"carousel"].join(".").toLowerCase(),$.extend({relatedTarget:this},status,data));return this._supress[name]||($.each(this._plugins,function(name,plugin){plugin.onTrigger&&plugin.onTrigger(event)}),this.$element.trigger(event),this.settings&&"function"==typeof this.settings[handler]&&this.settings[handler].apply(this,event)),event},Owl.prototype.suppress=function(events){$.each(events,$.proxy(function(index,event){this._supress[event]=!0},this))},Owl.prototype.release=function(events){$.each(events,$.proxy(function(index,event){delete this._supress[event]},this))},Owl.prototype.browserSupport=function(){if(this.support3d=isPerspective(),this.support3d){this.transformVendor=isTransform();var endVendors=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"];this.transitionEndVendor=endVendors[isTransition()],this.vendorName=this.transformVendor.replace(/Transform/i,""),this.vendorName=""!==this.vendorName?"-"+this.vendorName.toLowerCase()+"-":""}this.state.orientation=window.orientation},$.fn.owlCarousel=function(options){return this.each(function(){$(this).data("owlCarousel")||$(this).data("owlCarousel",new Owl(this,options))})},$.fn.owlCarousel.Constructor=Owl}(window.Zepto||window.jQuery,window,document),function($,window,document,undefined){var Lazy=function(carousel){this._core=carousel,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel":$.proxy(function(e){if(e.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(e.property&&"position"==e.property.name||"initialized"==e.type))for(var settings=this._core.settings,n=settings.center&&Math.ceil(settings.items/2)||settings.items,i=settings.center&&-1*n||0,position=(e.property&&e.property.value||this._core.current())+i,clones=this._core.clones().length,load=$.proxy(function(i,v){this.load(v)},this);i++<n;)this.load(clones/2+this._core.relative(position)),clones&&$.each(this._core.clones(this._core.relative(position++)),load)},this)},this._core.options=$.extend({},Lazy.Defaults,this._core.options),this._core.$element.on(this._handlers)};Lazy.Defaults={lazyLoad:!1},Lazy.prototype.load=function(position){var $item=this._core.$stage.children().eq(position),$elements=$item&&$item.find(".owl-lazy");!$elements||$.inArray($item.get(0),this._loaded)>-1||($elements.each($.proxy(function(index,element){var image,$element=$(element),url=window.devicePixelRatio>1&&$element.attr("data-src-retina")||$element.attr("data-src");this._core.trigger("load",{element:$element,url:url},"lazy"),$element.is("img")?$element.one("load.owl.lazy",$.proxy(function(){$element.css("opacity",1),this._core.trigger("loaded",{element:$element,url:url},"lazy")},this)).attr("src",url):(image=new Image,image.onload=$.proxy(function(){$element.css({"background-image":"url("+url+")",opacity:"1"}),this._core.trigger("loaded",{element:$element,url:url},"lazy")},this),image.src=url)},this)),this._loaded.push($item.get(0)))},Lazy.prototype.destroy=function(){var handler,property;for(handler in this.handlers)this._core.$element.off(handler,this.handlers[handler]);for(property in Object.getOwnPropertyNames(this))"function"!=typeof this[property]&&(this[property]=null)},$.fn.owlCarousel.Constructor.Plugins.Lazy=Lazy}(window.Zepto||window.jQuery,window,document),function($,window,document,undefined){var AutoHeight=function(carousel){this._core=carousel,this._handlers={"initialized.owl.carousel":$.proxy(function(){this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":$.proxy(function(e){this._core.settings.autoHeight&&"position"==e.property.name&&this.update()},this),"loaded.owl.lazy":$.proxy(function(e){this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=$.extend({},AutoHeight.Defaults,this._core.options),this._core.$element.on(this._handlers)};AutoHeight.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},AutoHeight.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},AutoHeight.prototype.destroy=function(){var handler,property;for(handler in this._handlers)this._core.$element.off(handler,this._handlers[handler]);for(property in Object.getOwnPropertyNames(this))"function"!=typeof this[property]&&(this[property]=null)},$.fn.owlCarousel.Constructor.Plugins.AutoHeight=AutoHeight}(window.Zepto||window.jQuery,window,document),function($,window,document,undefined){var Video=function(carousel){this._core=carousel,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={"resize.owl.carousel":$.proxy(function(e){this._core.settings.video&&!this.isInFullScreen()&&e.preventDefault()},this),"refresh.owl.carousel changed.owl.carousel":$.proxy(function(e){this._playing&&this.stop()},this),"prepared.owl.carousel":$.proxy(function(e){var $element=$(e.content).find(".owl-video");$element.length&&($element.css("display","none"),this.fetch($element,$(e.content)))},this)},this._core.options=$.extend({},Video.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",$.proxy(function(e){this.play(e)},this))};Video.Defaults={video:!1,videoHeight:!1,videoWidth:!1},Video.prototype.fetch=function(target,item){var type=target.attr("data-vimeo-id")?"vimeo":"youtube",id=target.attr("data-vimeo-id")||target.attr("data-youtube-id"),width=target.attr("data-width")||this._core.settings.videoWidth,height=target.attr("data-height")||this._core.settings.videoHeight,url=target.attr("href");if(!url)throw new Error("Missing video URL.");if(id=url.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),id[3].indexOf("youtu")>-1)type="youtube";else{if(!(id[3].indexOf("vimeo")>-1))throw new Error("Video URL not supported.");type="vimeo"}id=id[6],this._videos[url]={type:type,id:id,width:width,height:height},item.attr("data-video",url),this.thumbnail(target,this._videos[url])},Video.prototype.thumbnail=function(target,video){var tnLink,icon,path,dimensions=video.width&&video.height?'style="width:'+video.width+"px;height:"+video.height+'px;"':"",customTn=target.find("img"),srcType="src",lazyClass="",settings=this._core.settings,create=function(path){icon='<div class="owl-video-play-icon"></div>',tnLink=settings.lazyLoad?'<div class="owl-video-tn '+lazyClass+'" '+srcType+'="'+path+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+path+')"></div>',target.after(tnLink),target.after(icon)};return target.wrap('<div class="owl-video-wrapper"'+dimensions+"></div>"),this._core.settings.lazyLoad&&(srcType="data-src",lazyClass="owl-lazy"),customTn.length?(create(customTn.attr(srcType)),customTn.remove(),!1):void("youtube"===video.type?(path="http://img.youtube.com/vi/"+video.id+"/hqdefault.jpg",create(path)):"vimeo"===video.type&&$.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+video.id+".json",jsonp:"callback",dataType:"jsonp",success:function(data){path=data[0].thumbnail_large,create(path)}}))},Video.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null},Video.prototype.play=function(ev){this._core.trigger("play",null,"video"),this._playing&&this.stop();var html,wrap,target=$(ev.target||ev.srcElement),item=target.closest("."+this._core.settings.itemClass),video=this._videos[item.attr("data-video")],width=video.width||"100%",height=video.height||this._core.$stage.height();"youtube"===video.type?html='<iframe width="'+width+'" height="'+height+'" src="http://www.youtube.com/embed/'+video.id+"?autoplay=1&v="+video.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===video.type&&(html='<iframe src="http://player.vimeo.com/video/'+video.id+'?autoplay=1" width="'+width+'" height="'+height+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),item.addClass("owl-video-playing"),
this._playing=item,wrap=$('<div style="height:'+height+"px; width:"+width+'px" class="owl-video-frame">'+html+"</div>"),target.after(wrap)},Video.prototype.isInFullScreen=function(){var element=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;return element&&$(element).parent().hasClass("owl-video-frame")&&(this._core.speed(0),this._fullscreen=!0),element&&this._fullscreen&&this._playing?!1:this._fullscreen?(this._fullscreen=!1,!1):this._playing&&this._core.state.orientation!==window.orientation?(this._core.state.orientation=window.orientation,!1):!0},Video.prototype.destroy=function(){var handler,property;this._core.$element.off("click.owl.video");for(handler in this._handlers)this._core.$element.off(handler,this._handlers[handler]);for(property in Object.getOwnPropertyNames(this))"function"!=typeof this[property]&&(this[property]=null)},$.fn.owlCarousel.Constructor.Plugins.Video=Video}(window.Zepto||window.jQuery,window,document),function($,window,document,undefined){var Animate=function(scope){this.core=scope,this.core.options=$.extend({},Animate.Defaults,this.core.options),this.swapping=!0,this.previous=undefined,this.next=undefined,this.handlers={"change.owl.carousel":$.proxy(function(e){"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":$.proxy(function(e){this.swapping="translated"==e.type},this),"translate.owl.carousel":$.proxy(function(e){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};Animate.Defaults={animateOut:!1,animateIn:!1},Animate.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var left,clear=$.proxy(this.clear,this),previous=this.core.$stage.children().eq(this.previous),next=this.core.$stage.children().eq(this.next),incoming=this.core.settings.animateIn,outgoing=this.core.settings.animateOut;this.core.current()!==this.previous&&(outgoing&&(left=this.core.coordinates(this.previous)-this.core.coordinates(this.next),previous.css({left:left+"px"}).addClass("animated owl-animated-out").addClass(outgoing).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",clear)),incoming&&next.addClass("animated owl-animated-in").addClass(incoming).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",clear))}},Animate.prototype.clear=function(e){$(e.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},Animate.prototype.destroy=function(){var handler,property;for(handler in this.handlers)this.core.$element.off(handler,this.handlers[handler]);for(property in Object.getOwnPropertyNames(this))"function"!=typeof this[property]&&(this[property]=null)},$.fn.owlCarousel.Constructor.Plugins.Animate=Animate}(window.Zepto||window.jQuery,window,document),function($,window,document,undefined){var Autoplay=function(scope){this.core=scope,this.core.options=$.extend({},Autoplay.Defaults,this.core.options),this.handlers={"translated.owl.carousel refreshed.owl.carousel":$.proxy(function(){this.autoplay()},this),"play.owl.autoplay":$.proxy(function(e,t,s){this.play(t,s)},this),"stop.owl.autoplay":$.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":$.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),"mouseleave.owl.autoplay":$.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};Autoplay.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},Autoplay.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(window.clearInterval(this.interval),this.interval=window.setInterval($.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):window.clearInterval(this.interval)},Autoplay.prototype.play=function(timeout,speed){return document.hidden===!0||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:this.core.settings.autoplay===!1?void window.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},Autoplay.prototype.stop=function(){window.clearInterval(this.interval)},Autoplay.prototype.pause=function(){window.clearInterval(this.interval)},Autoplay.prototype.destroy=function(){var handler,property;window.clearInterval(this.interval);for(handler in this.handlers)this.core.$element.off(handler,this.handlers[handler]);for(property in Object.getOwnPropertyNames(this))"function"!=typeof this[property]&&(this[property]=null)},$.fn.owlCarousel.Constructor.Plugins.autoplay=Autoplay}(window.Zepto||window.jQuery,window,document),function($,window,document,undefined){"use strict";var Navigation=function(carousel){this._core=carousel,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":$.proxy(function(e){this._core.settings.dotsData&&this._templates.push($(e.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"add.owl.carousel":$.proxy(function(e){this._core.settings.dotsData&&this._templates.splice(e.position,0,$(e.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"remove.owl.carousel prepared.owl.carousel":$.proxy(function(e){this._core.settings.dotsData&&this._templates.splice(e.position,1)},this),"change.owl.carousel":$.proxy(function(e){if("position"==e.property.name&&!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var current=this._core.current(),maximum=this._core.maximum(),minimum=this._core.minimum();e.data=e.property.value>maximum?current>=maximum?minimum:maximum:e.property.value<minimum?maximum:e.property.value}},this),"changed.owl.carousel":$.proxy(function(e){"position"==e.property.name&&this.draw()},this),"refreshed.owl.carousel":$.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation")},this)},this._core.options=$.extend({},Navigation.Defaults,this._core.options),this.$element.on(this._handlers)};Navigation.Defaults={nav:!1,navRewind:!0,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:"owl-controls"},Navigation.prototype.initialize=function(){var $container,override,options=this._core.settings;options.dotsData||(this._templates=[$("<div>").addClass(options.dotClass).append($("<span>")).prop("outerHTML")]),options.navContainer&&options.dotsContainer||(this._controls.$container=$("<div>").addClass(options.controlsClass).appendTo(this.$element)),this._controls.$indicators=options.dotsContainer?$(options.dotsContainer):$("<div>").hide().addClass(options.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on("click","div",$.proxy(function(e){var index=$(e.target).parent().is(this._controls.$indicators)?$(e.target).index():$(e.target).parent().index();e.preventDefault(),this.to(index,options.dotsSpeed)},this)),$container=options.navContainer?$(options.navContainer):$("<div>").addClass(options.navContainerClass).prependTo(this._controls.$container),this._controls.$next=$("<"+options.navElement+">"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(options.navClass[0]).html(options.navText[0]).hide().prependTo($container).on("click",$.proxy(function(e){this.prev(options.navSpeed)},this)),this._controls.$next.addClass(options.navClass[1]).html(options.navText[1]).hide().appendTo($container).on("click",$.proxy(function(e){this.next(options.navSpeed)},this));for(override in this._overrides)this._core[override]=$.proxy(this[override],this)},Navigation.prototype.destroy=function(){var handler,control,property,override;for(handler in this._handlers)this.$element.off(handler,this._handlers[handler]);for(control in this._controls)this._controls[control].remove();for(override in this.overides)this._core[override]=this._overrides[override];for(property in Object.getOwnPropertyNames(this))"function"!=typeof this[property]&&(this[property]=null)},Navigation.prototype.update=function(){var i,j,k,options=this._core.settings,lower=this._core.clones().length/2,upper=lower+this._core.items().length,size=options.center||options.autoWidth||options.dotData?1:options.dotsEach||options.items;if("page"!==options.slideBy&&(options.slideBy=Math.min(options.slideBy,options.items)),options.dots||"page"==options.slideBy)for(this._pages=[],i=lower,j=0,k=0;upper>i;i++)(j>=size||0===j)&&(this._pages.push({start:i-lower,end:i-lower+size-1}),j=0,++k),j+=this._core.mergers(this._core.relative(i))},Navigation.prototype.draw=function(){var difference,i,html="",options=this._core.settings,index=(this._core.$stage.children(),this._core.relative(this._core.current()));if(!options.nav||options.loop||options.navRewind||(this._controls.$previous.toggleClass("disabled",0>=index),this._controls.$next.toggleClass("disabled",index>=this._core.maximum())),this._controls.$previous.toggle(options.nav),this._controls.$next.toggle(options.nav),options.dots){if(difference=this._pages.length-this._controls.$indicators.children().length,options.dotData&&0!==difference){for(i=0;i<this._controls.$indicators.children().length;i++)html+=this._templates[this._core.relative(i)];this._controls.$indicators.html(html)}else difference>0?(html=new Array(difference+1).join(this._templates[0]),this._controls.$indicators.append(html)):0>difference&&this._controls.$indicators.children().slice(difference).remove();this._controls.$indicators.find(".active").removeClass("active"),this._controls.$indicators.children().eq($.inArray(this.current(),this._pages)).addClass("active")}this._controls.$indicators.toggle(options.dots)},Navigation.prototype.onTrigger=function(event){var settings=this._core.settings;event.page={index:$.inArray(this.current(),this._pages),count:this._pages.length,size:settings&&(settings.center||settings.autoWidth||settings.dotData?1:settings.dotsEach||settings.items)}},Navigation.prototype.current=function(){var index=this._core.relative(this._core.current());return $.grep(this._pages,function(o){return o.start<=index&&o.end>=index}).pop()},Navigation.prototype.getPosition=function(successor){var position,length,options=this._core.settings;return"page"==options.slideBy?(position=$.inArray(this.current(),this._pages),length=this._pages.length,successor?++position:--position,position=this._pages[(position%length+length)%length].start):(position=this._core.relative(this._core.current()),length=this._core.items().length,successor?position+=options.slideBy:position-=options.slideBy),position},Navigation.prototype.next=function(speed){$.proxy(this._overrides.to,this._core)(this.getPosition(!0),speed)},Navigation.prototype.prev=function(speed){$.proxy(this._overrides.to,this._core)(this.getPosition(!1),speed)},Navigation.prototype.to=function(position,speed,standard){var length;standard?$.proxy(this._overrides.to,this._core)(position,speed):(length=this._pages.length,$.proxy(this._overrides.to,this._core)(this._pages[(position%length+length)%length].start,speed))},$.fn.owlCarousel.Constructor.Plugins.Navigation=Navigation}(window.Zepto||window.jQuery,window,document),function($,window,document,undefined){"use strict";var Hash=function(carousel){this._core=carousel,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":$.proxy(function(){"URLHash"==this._core.settings.startPosition&&$(window).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":$.proxy(function(e){var hash=$(e.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");this._hashes[hash]=e.content},this)},this._core.options=$.extend({},Hash.Defaults,this._core.options),this.$element.on(this._handlers),$(window).on("hashchange.owl.navigation",$.proxy(function(){var hash=window.location.hash.substring(1),items=this._core.$stage.children(),position=this._hashes[hash]&&items.index(this._hashes[hash])||0;return hash?void this._core.to(position,!1,!0):!1},this))};Hash.Defaults={URLhashListener:!1},Hash.prototype.destroy=function(){var handler,property;$(window).off("hashchange.owl.navigation");for(handler in this._handlers)this._core.$element.off(handler,this._handlers[handler]);for(property in Object.getOwnPropertyNames(this))"function"!=typeof this[property]&&(this[property]=null)},$.fn.owlCarousel.Constructor.Plugins.Hash=Hash}(window.Zepto||window.jQuery,window,document),function(undefined){function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function deprecate(msg,fn){function printMsg(){moment.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}var firstTime=!0;return extend(function(){return firstTime&&(printMsg(),firstTime=!1),fn.apply(this,arguments)},fn)}function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.lang().ordinal(func.call(this,a),period)}}function Language(){}function Moment(config){checkOverflow(config),extend(this,config)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._bubble()}function extend(a,b){for(var i in b)b.hasOwnProperty(i)&&(a[i]=b[i]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function cloneMoment(m){var i,result={};for(i in m)m.hasOwnProperty(i)&&momentProperties.hasOwnProperty(i)&&(result[i]=m[i]);return result}function absRound(number){return 0>number?Math.ceil(number):Math.floor(number)}function leftZeroFill(number,targetLength,forceSign){for(var output=""+Math.abs(number),sign=number>=0;output.length<targetLength;)output="0"+output;return(sign?forceSign?"+":"":"-")+output}function addOrSubtractDurationFromMoment(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset?!0:updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&rawSetter(mom,"Date",rawGetter(mom,"Date")+days*isAdding),months&&rawMonthSetter(mom,rawGetter(mom,"Month")+months*isAdding),updateOffset&&moment.updateOffset(mom,days||months)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return"[object Date]"===Object.prototype.toString.call(input)||input instanceof Date}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;len>i;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function normalizeUnits(units){if(units){var lowered=units.toLowerCase().replace(/(.)s$/,"$1");units=unitAliases[units]||camelFunctions[lowered]||lowered}return units}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)inputObject.hasOwnProperty(prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function makeList(field){var count,setter;if(0===field.indexOf("week"))count=7,setter="day";else{if(0!==field.indexOf("month"))return;count=12,setter="month"}moment[field]=function(format,index){var i,getter,method=moment.fn._lang[field],results=[];if("number"==typeof format&&(index=format,format=undefined),getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment.fn._lang,m,format||"")},null!=index)return getter(index);for(i=0;count>i;i++)results.push(getter(i));return results}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=coercedNumber>=0?Math.floor(coercedNumber):Math.ceil(coercedNumber)),value}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function weeksInYear(year,dow,doy){return weekOfYear(moment([year,11,31+dow-doy]),dow,doy).week}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;m._a&&-2===m._pf.overflow&&(overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>23?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1,m._pf._overflowDayOfYear&&(YEAR>overflow||overflow>DATE)&&(overflow=DATE),m._pf.overflow=overflow)}function isValid(m){return null==m._isValid&&(m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated,m._strict&&(m._isValid=m._isValid&&0===m._pf.charsLeftOver&&0===m._pf.unusedTokens.length)),m._isValid}function normalizeLanguage(key){return key?key.toLowerCase().replace("_","-"):key}function makeAs(input,model){return model._isUTC?moment(input).zone(model._offset||0):moment(input).local()}function loadLang(key,values){return values.abbr=key,languages[key]||(languages[key]=new Language),languages[key].set(values),languages[key]}function unloadLang(key){delete languages[key]}function getLangDefinition(key){var j,lang,next,split,i=0,get=function(k){if(!languages[k]&&hasModule)try{require("./lang/"+k)}catch(e){}return languages[k]};if(!key)return moment.fn._lang;if(!isArray(key)){if(lang=get(key))return lang;key=[key]}for(;i<key.length;){for(split=normalizeLanguage(key[i]).split("-"),j=split.length,next=normalizeLanguage(key[i+1]),next=next?next.split("-"):null;j>0;){if(lang=get(split.slice(0,j).join("-")))return lang;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return moment.fn._lang}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;length>i;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;length>i;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.lang()),formatFunctions[format]||(formatFunctions[format]=makeFormatFunction(format)),formatFunctions[format](m)):m.lang().invalidDate()}function expandFormat(format,lang){function replaceLongDateFormatTokens(input){return lang.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function getParseRegexForToken(token,config){var a,strict=config._strict;switch(token){case"Q":return parseTokenOneDigit;case"DDDD":return parseTokenThreeDigits;case"YYYY":case"GGGG":case"gggg":return strict?parseTokenFourDigits:parseTokenOneToFourDigits;case"Y":case"G":case"g":return parseTokenSignedNumber;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return strict?parseTokenSixDigits:parseTokenOneToSixDigits;case"S":if(strict)return parseTokenOneDigit;case"SS":if(strict)return parseTokenTwoDigits;case"SSS":if(strict)return parseTokenThreeDigits;case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return getLangDefinition(config._l)._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"SSSS":return parseTokenDigits;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return strict?parseTokenTwoDigits:parseTokenOneOrTwoDigits;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return parseTokenOneOrTwoDigits;case"Do":return parseTokenOrdinal;default:return a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"))}}function timezoneMinutesFromString(string){string=string||"";var possibleTzMatches=string.match(parseTokenTimezone)||[],tzChunk=possibleTzMatches[possibleTzMatches.length-1]||[],parts=(tzChunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"Q":null!=input&&(datePartArray[MONTH]=3*(toInt(input)-1));break;case"M":case"MM":null!=input&&(datePartArray[MONTH]=toInt(input)-1);break;case"MMM":case"MMMM":a=getLangDefinition(config._l).monthsParse(input),null!=a?datePartArray[MONTH]=a:config._pf.invalidMonth=input;break;case"D":case"DD":null!=input&&(datePartArray[DATE]=toInt(input));break;case"Do":null!=input&&(datePartArray[DATE]=toInt(parseInt(input,10)));break;case"DDD":case"DDDD":null!=input&&(config._dayOfYear=toInt(input));break;case"YY":datePartArray[YEAR]=moment.parseTwoDigitYear(input);break;case"YYYY":case"YYYYY":case"YYYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._isPm=getLangDefinition(config._l).isPM(input);break;case"H":case"HH":case"h":case"hh":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":case"SSSS":datePartArray[MILLISECOND]=toInt(1e3*("0."+input));break;case"X":config._d=new Date(1e3*parseFloat(input));break;case"Z":case"ZZ":config._useUTC=!0,config._tzm=timezoneMinutesFromString(input);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":token=token.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":token=token.substr(0,2),input&&(config._w=config._w||{},config._w[token]=input)}}function dateFromConfig(config){var i,date,currentDate,yearToUse,fixYear,w,temp,lang,weekday,week,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&(fixYear=function(val){var intVal=parseInt(val,10);return val?val.length<3?intVal>68?1900+intVal:2e3+intVal:intVal:null==config._a[YEAR]?moment().weekYear():config._a[YEAR]},w=config._w,null!=w.GG||null!=w.W||null!=w.E?temp=dayOfYearFromWeeks(fixYear(w.GG),w.W||1,w.E,4,1):(lang=getLangDefinition(config._l),weekday=null!=w.d?parseWeekday(w.d,lang):null!=w.e?parseInt(w.e,10)+lang._week.dow:0,week=parseInt(w.w,10)||1,null!=w.d&&weekday<lang._week.dow&&week++,temp=dayOfYearFromWeeks(fixYear(w.gg),week,weekday,lang._week.doy,lang._week.dow)),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear),config._dayOfYear&&(yearToUse=null==config._a[YEAR]?currentDate[YEAR]:config._a[YEAR],config._dayOfYear>daysInYear(yearToUse)&&(config._pf._overflowDayOfYear=!0),date=makeUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];input[HOUR]+=toInt((config._tzm||0)/60),input[MINUTE]+=toInt((config._tzm||0)%60),config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input)}}function dateFromObject(config){var normalizedInput;config._d||(normalizedInput=normalizeObjectUnits(config._i),config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond],dateFromConfig(config))}function currentDateArray(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}function makeDateFromStringAndFormat(config){config._a=[],config._pf.empty=!0;var i,parsedInput,tokens,token,skipped,lang=getLangDefinition(config._l),string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,lang).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&config._pf.unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?config._pf.empty=!1:config._pf.unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&config._pf.unusedTokens.push(token);config._pf.charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&config._pf.unusedInput.push(string),config._isPm&&config._a[HOUR]<12&&(config._a[HOUR]+=12),config._isPm===!1&&12===config._a[HOUR]&&(config._a[HOUR]=0),dateFromConfig(config),checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return config._pf.invalidFormat=!0,void(config._d=new Date(NaN));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=extend({},config),tempConfig._pf=defaultParsingFlags(),tempConfig._f=config._f[i],makeDateFromStringAndFormat(tempConfig),isValid(tempConfig)&&(currentScore+=tempConfig._pf.charsLeftOver,currentScore+=10*tempConfig._pf.unusedTokens.length,tempConfig._pf.score=currentScore,(null==scoreToBeat||scoreToBeat>currentScore)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function makeDateFromString(config){var i,l,string=config._i,match=isoRegex.exec(string);if(match){for(config._pf.iso=!0,i=0,l=isoDates.length;l>i;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||" ");break}for(i=0,l=isoTimes.length;l>i;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}string.match(parseTokenTimezone)&&(config._f+="Z"),makeDateFromStringAndFormat(config)}else moment.createFromInputFallback(config)}function makeDateFromInput(config){var input=config._i,matched=aspNetJsonRegex.exec(input);input===undefined?config._d=new Date:matched?config._d=new Date(+matched[1]):"string"==typeof input?makeDateFromString(config):isArray(input)?(config._a=input.slice(0),dateFromConfig(config)):isDate(input)?config._d=new Date(+input):"object"==typeof input?dateFromObject(config):"number"==typeof input?config._d=new Date(input):moment.createFromInputFallback(config)}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return 1970>y&&date.setFullYear(y),date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return 1970>y&&date.setUTCFullYear(y),date}function parseWeekday(input,language){if("string"==typeof input)if(isNaN(input)){if(input=language.weekdaysParse(input),"number"!=typeof input)return null}else input=parseInt(input,10);return input}function substituteTimeAgo(string,number,withoutSuffix,isFuture,lang){return lang.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(milliseconds,withoutSuffix,lang){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=45>seconds&&["s",seconds]||1===minutes&&["m"]||45>minutes&&["mm",minutes]||1===hours&&["h"]||22>hours&&["hh",hours]||1===days&&["d"]||25>=days&&["dd",days]||45>=days&&["M"]||345>days&&["MM",round(days/30)]||1===years&&["y"]||["yy",years];return args[2]=withoutSuffix,args[3]=milliseconds>0,args[4]=lang,substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return daysToDayOfWeek>end&&(daysToDayOfWeek-=7),end-7>daysToDayOfWeek&&(daysToDayOfWeek+=7),adjustedMoment=moment(mom).add("d",daysToDayOfWeek),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var daysToAdd,dayOfYear,d=makeUTCDate(year,0,1).getUTCDay();return weekday=null!=weekday?weekday:firstDayOfWeek,daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(firstDayOfWeek>d?7:0),dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1,{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function makeMoment(config){var input=config._i,format=config._f;return null===input||format===undefined&&""===input?moment.invalid({nullInput:!0}):("string"==typeof input&&(config._i=input=getLangDefinition().preparse(input)),moment.isMoment(input)?(config=cloneMoment(input),config._d=new Date(+input._d)):format?isArray(format)?makeDateFromStringAndArray(config):makeDateFromStringAndFormat(config):makeDateFromInput(config),new Moment(config))}function rawMonthSetter(mom,value){var dayOfMonth;return"string"==typeof value&&(value=mom.lang().monthsParse(value),"number"!=typeof value)?mom:(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom)}function rawGetter(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function rawSetter(mom,unit,value){return"Month"===unit?rawMonthSetter(mom,value):mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function makeAccessor(unit,keepTime){return function(value){return null!=value?(rawSetter(this,unit,value),moment.updateOffset(this,keepTime),this):rawGetter(this,unit)}}function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}function makeGlobal(shouldDeprecate){"undefined"==typeof ender&&(oldGlobalMoment=globalScope.moment,shouldDeprecate?globalScope.moment=deprecate("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",moment):globalScope.moment=moment)}for(var moment,oldGlobalMoment,i,VERSION="2.6.0",globalScope="undefined"!=typeof global?global:this,round=Math.round,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,languages={},momentProperties={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},hasModule="undefined"!=typeof module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenOneToFourDigits=/\d{1,4}/,parseTokenOneToSixDigits=/[+\-]?\d{1,6}/,parseTokenDigits=/\d+/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/gi,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,parseTokenOrdinal=/\d{1,2}/,parseTokenOneDigit=/\d/,parseTokenTwoDigits=/\d\d/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenSixDigits=/[+-]?\d{6}/,parseTokenSignedNumber=/[+-]?\d+/,isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,unitMillisecondFactors=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),
{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},camelFunctions={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},formatFunctions={},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.lang().monthsShort(this,format)},MMMM:function(format){return this.lang().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.lang().weekdaysMin(this,format)},ddd:function(format){return this.lang().weekdaysShort(this,format)},dddd:function(format){return this.lang().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var y=this.year(),sign=y>=0?"+":"-";return sign+leftZeroFill(Math.abs(y),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+leftZeroFill(toInt(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);for(formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),extend(Language.prototype,{set:function(config){var prop,i;for(i in config)prop=config[i],"function"==typeof prop?this[i]=prop:this["_"+i]=prop},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[]),i=0;12>i;i++)if(this._monthsParse[i]||(mom=moment.utc([2e3,i]),regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),this._monthsParse[i].test(monthName))return i},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;7>i;i++)if(this._weekdaysParse[i]||(mom=moment([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];return!output&&this._longDateFormat[key.toUpperCase()]&&(output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key]=output),output},isPM:function(input){return"p"===(input+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return"function"==typeof output?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),moment=function(input,format,lang,strict){var c;return"boolean"==typeof lang&&(strict=lang,lang=undefined),c={},c._isAMomentObject=!0,c._i=input,c._f=format,c._l=lang,c._strict=strict,c._isUTC=!1,c._pf=defaultParsingFlags(),makeMoment(c)},moment.suppressDeprecationWarnings=!1,moment.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i)}),moment.utc=function(input,format,lang,strict){var c;return"boolean"==typeof lang&&(strict=lang,lang=undefined),c={},c._isAMomentObject=!0,c._useUTC=!0,c._isUTC=!0,c._l=lang,c._i=input,c._f=format,c._strict=strict,c._pf=defaultParsingFlags(),makeMoment(c).utc()},moment.unix=function(input){return moment(1e3*input)},moment.duration=function(input,key){var sign,ret,parseIso,duration=input,match=null;return moment.isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetTimeSpanJsonRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=isoDurationRegex.exec(input))&&(sign="-"===match[1]?-1:1,parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign},duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])}),ret=new Duration(duration),moment.isDuration(input)&&input.hasOwnProperty("_lang")&&(ret._lang=input._lang),ret},moment.version=VERSION,moment.defaultFormat=isoFormat,moment.momentProperties=momentProperties,moment.updateOffset=function(){},moment.lang=function(key,values){var r;return key?(values?loadLang(normalizeLanguage(key),values):null===values?(unloadLang(key),key="en"):languages[key]||getLangDefinition(key),r=moment.duration.fn._lang=moment.fn._lang=getLangDefinition(key),r._abbr):moment.fn._lang._abbr},moment.langData=function(key){return key&&key._lang&&key._lang._abbr&&(key=key._lang._abbr),getLangDefinition(key)},moment.isMoment=function(obj){return obj instanceof Moment||null!=obj&&obj.hasOwnProperty("_isAMomentObject")},moment.isDuration=function(obj){return obj instanceof Duration},i=lists.length-1;i>=0;--i)makeList(lists[i]);moment.normalizeUnits=function(units){return normalizeUnits(units)},moment.invalid=function(flags){var m=moment.utc(NaN);return null!=flags?extend(m._pf,flags):m._pf.userInvalidated=!0,m},moment.parseZone=function(){return moment.apply(null,arguments).parseZone()},moment.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)},extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var m=moment(this).utc();return 0<m.year()&&m.year()<=9999?formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){return this._a?this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0:!1},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.lang().postformat(output)},add:function(input,val){var dur;return dur="string"==typeof input?moment.duration(+val,input):moment.duration(input,val),addOrSubtractDurationFromMoment(this,dur,1),this},subtract:function(input,val){var dur;return dur="string"==typeof input?moment.duration(+val,input):moment.duration(input,val),addOrSubtractDurationFromMoment(this,dur,-1),this},diff:function(input,units,asFloat){var diff,output,that=makeAs(input,this),zoneDiff=6e4*(this.zone()-that.zone());return units=normalizeUnits(units),"year"===units||"month"===units?(diff=432e5*(this.daysInMonth()+that.daysInMonth()),output=12*(this.year()-that.year())+(this.month()-that.month()),output+=(this-moment(this).startOf("month")-(that-moment(that).startOf("month")))/diff,output-=6e4*(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone()))/diff,"year"===units&&(output/=12)):(diff=this-that,output="second"===units?diff/1e3:"minute"===units?diff/6e4:"hour"===units?diff/36e5:"day"===units?(diff-zoneDiff)/864e5:"week"===units?(diff-zoneDiff)/6048e5:diff),asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this.lang()._abbr).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var sod=makeAs(moment(),this).startOf("day"),diff=this.diff(sod,"days",!0),format=-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse";return this.format(this.lang().calendar(format,this))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.lang()),this.add({d:input-day})):day},month:makeAccessor("Month",!0),startOf:function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units?this.weekday(0):"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(units){return units=normalizeUnits(units),this.startOf(units).add("isoWeek"===units?"week":units,1).subtract("ms",1)},isAfter:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){return units=units||"ms",+this.clone().startOf(units)===+makeAs(input,this).startOf(units)},min:function(other){return other=moment.apply(null,arguments),this>other?this:other},max:function(other){return other=moment.apply(null,arguments),other>this?this:other},zone:function(input,keepTime){var offset=this._offset||0;return null==input?this._isUTC?offset:this._d.getTimezoneOffset():("string"==typeof input&&(input=timezoneMinutesFromString(input)),Math.abs(input)<16&&(input=60*input),this._offset=input,this._isUTC=!0,offset!==input&&(!keepTime||this._changeInProgress?addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,moment.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(input){return input=input?moment(input).zone():0,(this.zone()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add("d",input-dayOfYear)},quarter:function(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)},weekYear:function(input){var year=weekOfYear(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==input?year:this.add("y",input-year)},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add("y",input-year)},week:function(input){var week=this.lang().week(this);return null==input?week:this.add("d",7*(input-week))},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add("d",7*(input-week))},weekday:function(input){var weekday=(this.day()+7-this.lang()._week.dow)%7;return null==input?weekday:this.add("d",input-weekday)},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},isoWeeksInYear:function(){return weeksInYear(this.year(),1,4)},weeksInYear:function(){var weekInfo=this._lang._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},get:function(units){return units=normalizeUnits(units),this[units]()},set:function(units,value){return units=normalizeUnits(units),"function"==typeof this[units]&&this[units](value),this},lang:function(key){return key===undefined?this._lang:(this._lang=getLangDefinition(key),this)}}),moment.fn.millisecond=moment.fn.milliseconds=makeAccessor("Milliseconds",!1),moment.fn.second=moment.fn.seconds=makeAccessor("Seconds",!1),moment.fn.minute=moment.fn.minutes=makeAccessor("Minutes",!1),moment.fn.hour=moment.fn.hours=makeAccessor("Hours",!0),moment.fn.date=makeAccessor("Date",!0),moment.fn.dates=deprecate("dates accessor is deprecated. Use date instead.",makeAccessor("Date",!0)),moment.fn.year=makeAccessor("FullYear",!0),moment.fn.years=deprecate("years accessor is deprecated. Use year instead.",makeAccessor("FullYear",!0)),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.quarters=moment.fn.quarter,moment.fn.toJSON=moment.fn.toISOString,extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var seconds,minutes,hours,years,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;data.milliseconds=milliseconds%1e3,seconds=absRound(milliseconds/1e3),data.seconds=seconds%60,minutes=absRound(seconds/60),data.minutes=minutes%60,hours=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),data.days=days%30,months+=absRound(days/30),data.months=months%12,years=absRound(months/12),data.years=years},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(withSuffix){var difference=+this,output=relativeTime(difference,!withSuffix,this.lang());return withSuffix&&(output=this.lang().pastFuture(difference,output)),this.lang().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);return this._milliseconds+=dur._milliseconds,this._days+=dur._days,this._months+=dur._months,this._bubble(),this},subtract:function(input,val){var dur=moment.duration(input,val);return this._milliseconds-=dur._milliseconds,this._days-=dur._days,this._months-=dur._months,this._bubble(),this},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()+"s"]()},as:function(units){return units=normalizeUnits(units),this["as"+units.charAt(0).toUpperCase()+units.slice(1)+"s"]()},lang:moment.fn.lang,toIsoString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":""):"P0D"}});for(i in unitMillisecondFactors)unitMillisecondFactors.hasOwnProperty(i)&&(makeDurationAsGetter(i,unitMillisecondFactors[i]),makeDurationGetter(i.toLowerCase()));makeDurationAsGetter("Weeks",6048e5),moment.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},moment.lang("en",{ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),hasModule?module.exports=moment:"function"==typeof define&&define.amd?(define("moment",function(require,exports,module){return module.config&&module.config()&&module.config().noGlobal===!0&&(globalScope.moment=oldGlobalMoment),moment}),makeGlobal(!0)):makeGlobal()}.call(this),function(factory){"function"==typeof define&&define.amd?define(["jquery","moment"],factory):factory(jQuery,moment)}(function($,moment){function generateShortTimeFormat(options,langData){return langData.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function generateWeekColumnFormat(options,langData){var format=langData.longDateFormat("L");return format=format.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),options.isRTL?format+=" ddd":format="ddd "+format,format}function setDefaults(d){mergeOptions(defaults,d)}function mergeOptions(target){function mergeIntoTarget(name,value){$.isPlainObject(value)&&$.isPlainObject(target[name])&&!isForcedAtomicOption(name)?target[name]=mergeOptions({},target[name],value):void 0!==value&&(target[name]=value)}for(var i=1;i<arguments.length;i++)$.each(arguments[i],mergeIntoTarget);return target}function isForcedAtomicOption(name){return/(Time|Duration)$/.test(name)}function Calendar(element,instanceOptions){function render(inc){content?elementVisible()&&(calcSize(),_renderView(inc)):initialRender()}function initialRender(){tm=options.theme?"ui":"fc",element.addClass("fc"),element.addClass(options.isRTL?"fc-rtl":"fc-ltr"),options.theme&&element.addClass("ui-widget"),content=$("<div class='fc-content' />").prependTo(element),header=new Header(t,options),headerElement=header.render(),headerElement&&element.prepend(headerElement),changeView(options.defaultView),options.handleWindowResize&&$(window).resize(windowResize),bodyVisible()||lateRender()}function lateRender(){setTimeout(function(){!currentView.start&&bodyVisible()&&renderView()},0)}function destroy(){currentView&&(trigger("viewDestroy",currentView,currentView,currentView.element),currentView.triggerEventDestroy()),$(window).unbind("resize",windowResize),header.destroy(),content.remove(),element.removeClass("fc fc-rtl ui-widget")}function elementVisible(){return element.is(":visible")}function bodyVisible(){return $("body").is(":visible")}function changeView(newViewName){currentView&&newViewName==currentView.name||_changeView(newViewName)}function _changeView(newViewName){ignoreWindowResize++,currentView&&(trigger("viewDestroy",currentView,currentView,currentView.element),unselect(),currentView.triggerEventDestroy(),freezeContentHeight(),currentView.element.remove(),header.deactivateButton(currentView.name)),header.activateButton(newViewName),currentView=new fcViews[newViewName]($("<div class='fc-view fc-view-"+newViewName+"' />").appendTo(content),t),renderView(),unfreezeContentHeight(),ignoreWindowResize--}function renderView(inc){currentView.start&&!inc&&date.isWithin(currentView.intervalStart,currentView.intervalEnd)||elementVisible()&&_renderView(inc)}function _renderView(inc){ignoreWindowResize++,currentView.start&&(trigger("viewDestroy",currentView,currentView,currentView.element),unselect(),clearEvents()),freezeContentHeight(),inc&&(date=currentView.incrementDate(date,inc)),currentView.render(date.clone()),setSize(),unfreezeContentHeight(),(currentView.afterRender||noop)(),updateTitle(),updateTodayButton(),trigger("viewRender",currentView,currentView,currentView.element),ignoreWindowResize--,getAndRenderEvents()}function updateSize(){elementVisible()&&(unselect(),clearEvents(),calcSize(),setSize(),renderEvents())}function calcSize(){suggestedViewHeight=options.contentHeight?options.contentHeight:options.height?options.height-(headerElement?headerElement.height():0)-vsides(content):Math.round(content.width()/Math.max(options.aspectRatio,.5))}function setSize(){void 0===suggestedViewHeight&&calcSize(),ignoreWindowResize++,currentView.setHeight(suggestedViewHeight),currentView.setWidth(content.width()),ignoreWindowResize--,elementOuterWidth=element.outerWidth()}function windowResize(){if(!ignoreWindowResize)if(currentView.start){var uid=++resizeUID;setTimeout(function(){uid==resizeUID&&!ignoreWindowResize&&elementVisible()&&elementOuterWidth!=(elementOuterWidth=element.outerWidth())&&(ignoreWindowResize++,updateSize(),currentView.trigger("windowResize",_element),ignoreWindowResize--)},200)}else lateRender()}function refetchEvents(){clearEvents(),fetchAndRenderEvents()}function rerenderEvents(modifiedEventID){clearEvents(),renderEvents(modifiedEventID)}function renderEvents(modifiedEventID){elementVisible()&&(currentView.renderEvents(events,modifiedEventID),currentView.trigger("eventAfterAllRender"))}function clearEvents(){currentView.triggerEventDestroy(),currentView.clearEvents(),currentView.clearEventData()}function getAndRenderEvents(){!options.lazyFetching||isFetchNeeded(currentView.start,currentView.end)?fetchAndRenderEvents():renderEvents()}function fetchAndRenderEvents(){fetchEvents(currentView.start,currentView.end)}function reportEvents(_events){events=_events,renderEvents()}function reportEventChange(eventID){rerenderEvents(eventID)}function updateTitle(){header.updateTitle(currentView.title)}function updateTodayButton(){var now=t.getNow();now.isWithin(currentView.intervalStart,currentView.intervalEnd)?header.disableButton("today"):header.enableButton("today")}function select(start,end){currentView.select(start,end)}function unselect(){currentView&&currentView.unselect()}function prev(){renderView(-1)}function next(){renderView(1)}function prevYear(){date.add("years",-1),renderView()}function nextYear(){date.add("years",1),renderView()}function today(){date=t.getNow(),renderView()}function gotoDate(dateInput){date=t.moment(dateInput),renderView()}function incrementDate(){date.add.apply(date,arguments),renderView()}function getDate(){return date.clone()}function freezeContentHeight(){content.css({width:"100%",height:content.height(),overflow:"hidden"})}function unfreezeContentHeight(){content.css({width:"",height:"",overflow:""})}function getCalendar(){return t}function getView(){return currentView}function option(name,value){return void 0===value?options[name]:void(("height"==name||"contentHeight"==name||"aspectRatio"==name)&&(options[name]=value,updateSize()))}function trigger(name,thisObj){return options[name]?options[name].apply(thisObj||_element,Array.prototype.slice.call(arguments,2)):void 0}var t=this;instanceOptions=instanceOptions||{};var langOptions,options=mergeOptions({},defaults,instanceOptions);langOptions=options.lang in langOptionHash?langOptionHash[options.lang]:langOptionHash[defaults.lang],langOptions&&(options=mergeOptions({},defaults,langOptions,instanceOptions)),options.isRTL&&(options=mergeOptions({},defaults,rtlDefaults,langOptions||{},instanceOptions)),t.options=options,t.render=render,t.destroy=destroy,t.refetchEvents=refetchEvents,t.reportEvents=reportEvents,t.reportEventChange=reportEventChange,t.rerenderEvents=rerenderEvents,t.changeView=changeView,t.select=select,t.unselect=unselect,t.prev=prev,t.next=next,t.prevYear=prevYear,t.nextYear=nextYear,t.today=today,t.gotoDate=gotoDate,t.incrementDate=incrementDate,t.getDate=getDate,t.getCalendar=getCalendar,t.getView=getView,t.option=option,t.trigger=trigger;var langData=createObject(moment.langData(options.lang));if(options.monthNames&&(langData._months=options.monthNames),options.monthNamesShort&&(langData._monthsShort=options.monthNamesShort),options.dayNames&&(langData._weekdays=options.dayNames),options.dayNamesShort&&(langData._weekdaysShort=options.dayNamesShort),options.firstDay){var _week=createObject(langData._week);_week.dow=options.firstDay,langData._week=_week}t.defaultAllDayEventDuration=moment.duration(options.defaultAllDayEventDuration),t.defaultTimedEventDuration=moment.duration(options.defaultTimedEventDuration),t.moment=function(){var mom;return mom="local"===options.timezone?fc.moment.apply(null,arguments):"UTC"===options.timezone?fc.moment.utc.apply(null,arguments):fc.moment.parseZone.apply(null,arguments),mom._lang=langData,mom},t.getIsAmbigTimezone=function(){return"local"!==options.timezone&&"UTC"!==options.timezone},t.rezoneDate=function(date){return t.moment(date.toArray())},t.getNow=function(){var now=options.now;return"function"==typeof now&&(now=now()),t.moment(now)},t.calculateWeekNumber=function(mom){var calc=options.weekNumberCalculation;return"function"==typeof calc?calc(mom):"local"===calc?mom.week():"ISO"===calc.toUpperCase()?mom.isoWeek():void 0},t.getEventEnd=function(event){return event.end?event.end.clone():t.getDefaultEventEnd(event.allDay,event.start)},t.getDefaultEventEnd=function(allDay,start){var end=start.clone();return allDay?end.stripTime().add(t.defaultAllDayEventDuration):end.add(t.defaultTimedEventDuration),t.getIsAmbigTimezone()&&end.stripZone(),end},t.formatRange=function(m1,m2,formatStr){return"function"==typeof formatStr&&(formatStr=formatStr.call(t,options,langData)),formatRange(m1,m2,formatStr,null,options.isRTL)},t.formatDate=function(mom,formatStr){return"function"==typeof formatStr&&(formatStr=formatStr.call(t,options,langData)),formatDate(mom,formatStr)},EventManager.call(t,options);var header,headerElement,content,tm,currentView,elementOuterWidth,suggestedViewHeight,date,_dragElement,isFetchNeeded=t.isFetchNeeded,fetchEvents=t.fetchEvents,_element=element[0],resizeUID=0,ignoreWindowResize=0,events=[];date=null!=options.defaultDate?t.moment(options.defaultDate):t.getNow(),options.droppable&&$(document).bind("dragstart",function(ev,ui){var _e=ev.target,e=$(_e);if(!e.parents(".fc").length){var accept=options.dropAccept;($.isFunction(accept)?accept.call(_e,e):e.is(accept))&&(_dragElement=_e,currentView.dragStart(_dragElement,ev,ui))}}).bind("dragstop",function(ev,ui){_dragElement&&(currentView.dragStop(_dragElement,ev,ui),_dragElement=null)})}function Header(calendar,options){function render(){tm=options.theme?"ui":"fc";var sections=options.header;return sections?element=$("<table class='fc-header' style='width:100%'/>").append($("<tr/>").append(renderSection("left")).append(renderSection("center")).append(renderSection("right"))):void 0}function destroy(){element.remove()}function renderSection(position){var e=$("<td class='fc-header-"+position+"'/>"),buttonStr=options.header[position];return buttonStr&&$.each(buttonStr.split(" "),function(i){i>0&&e.append("<span class='fc-header-space'/>");var prevButton;$.each(this.split(","),function(j,buttonName){if("title"==buttonName)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),prevButton&&prevButton.addClass(tm+"-corner-right"),prevButton=null;else{var buttonClick;if(calendar[buttonName]?buttonClick=calendar[buttonName]:fcViews[buttonName]&&(buttonClick=function(){button.removeClass(tm+"-state-hover"),calendar.changeView(buttonName)}),buttonClick){var html,themeIcon=smartProperty(options.themeButtonIcons,buttonName),normalIcon=smartProperty(options.buttonIcons,buttonName),text=smartProperty(options.buttonText,buttonName);html=themeIcon&&options.theme?"<span class='ui-icon ui-icon-"+themeIcon+"'></span>":normalIcon&&!options.theme?"<span class='fc-icon fc-icon-"+normalIcon+"'></span>":htmlEscape(text||buttonName);var button=$("<span class='fc-button fc-button-"+buttonName+" "+tm+"-state-default'>"+html+"</span>").click(function(){button.hasClass(tm+"-state-disabled")||buttonClick()}).mousedown(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){button.removeClass(tm+"-state-down")}).hover(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){button.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}).appendTo(e);disableTextSelection(button),prevButton||button.addClass(tm+"-corner-left"),prevButton=button}}}),prevButton&&prevButton.addClass(tm+"-corner-right")}),e}function updateTitle(html){element.find("h2").html(html)}function activateButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-active")}function deactivateButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-active")}function disableButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-disabled")}function enableButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-disabled")}var t=this;t.render=render,t.destroy=destroy,t.updateTitle=updateTitle,t.activateButton=activateButton,t.deactivateButton=deactivateButton,t.disableButton=disableButton,t.enableButton=enableButton;var tm,element=$([])}function EventManager(options){function isFetchNeeded(start,end){return!rangeStart||start.clone().stripZone()<rangeStart.clone().stripZone()||end.clone().stripZone()>rangeEnd.clone().stripZone()}function fetchEvents(start,end){rangeStart=start,rangeEnd=end,cache=[];var fetchID=++currentFetchID,len=sources.length;pendingSourceCnt=len;for(var i=0;len>i;i++)fetchEventSource(sources[i],fetchID)}function fetchEventSource(source,fetchID){_fetchEventSource(source,function(events){
if(fetchID==currentFetchID){if(events)for(var i=0;i<events.length;i++){var event=buildEvent(events[i],source);event&&cache.push(event)}pendingSourceCnt--,pendingSourceCnt||reportEvents(cache)}})}function _fetchEventSource(source,callback){var i,res,fetchers=fc.sourceFetchers;for(i=0;i<fetchers.length;i++){if(res=fetchers[i].call(t,source,rangeStart.clone(),rangeEnd.clone(),options.timezone,callback),res===!0)return;if("object"==typeof res)return void _fetchEventSource(res,callback)}var events=source.events;if(events)$.isFunction(events)?(pushLoading(),events.call(t,rangeStart.clone(),rangeEnd.clone(),options.timezone,function(events){callback(events),popLoading()})):$.isArray(events)?callback(events):callback();else{var url=source.url;if(url){var customData,success=source.success,error=source.error,complete=source.complete;customData=$.isFunction(source.data)?source.data():source.data;var data=$.extend({},customData||{}),startParam=firstDefined(source.startParam,options.startParam),endParam=firstDefined(source.endParam,options.endParam),timezoneParam=firstDefined(source.timezoneParam,options.timezoneParam);startParam&&(data[startParam]=rangeStart.format()),endParam&&(data[endParam]=rangeEnd.format()),options.timezone&&"local"!=options.timezone&&(data[timezoneParam]=options.timezone),pushLoading(),$.ajax($.extend({},ajaxDefaults,source,{data:data,success:function(events){events=events||[];var res=applyAll(success,this,arguments);$.isArray(res)&&(events=res),callback(events)},error:function(){applyAll(error,this,arguments),callback()},complete:function(){applyAll(complete,this,arguments),popLoading()}}))}else callback()}}function addEventSource(source){source=_addEventSource(source),source&&(pendingSourceCnt++,fetchEventSource(source,currentFetchID))}function _addEventSource(source){return $.isFunction(source)||$.isArray(source)?source={events:source}:"string"==typeof source&&(source={url:source}),"object"==typeof source?(normalizeSource(source),sources.push(source),source):void 0}function removeEventSource(source){sources=$.grep(sources,function(src){return!isSourcesEqual(src,source)}),cache=$.grep(cache,function(e){return!isSourcesEqual(e.source,source)}),reportEvents(cache)}function updateEvent(event){mutateEvent(event),propagateMiscProperties(event),reportEvents(cache)}function propagateMiscProperties(event){var i,cachedEvent,j,prop;for(i=0;i<cache.length;i++)if(cachedEvent=cache[i],cachedEvent._id==event._id&&cachedEvent!==event)for(j=0;j<miscCopyableProps.length;j++)prop=miscCopyableProps[j],void 0!==event[prop]&&(cachedEvent[prop]=event[prop])}function renderEvent(eventData,stick){var event=buildEvent(eventData);event&&(event.source||(stick&&(stickySource.events.push(event),event.source=stickySource),cache.push(event)),reportEvents(cache))}function removeEvents(filter){var i;if(filter){if(!$.isFunction(filter)){var id=filter+"";filter=function(e){return e._id==id}}for(cache=$.grep(cache,filter,!0),i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=$.grep(sources[i].events,filter,!0))}else for(cache=[],i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=[]);reportEvents(cache)}function clientEvents(filter){return $.isFunction(filter)?$.grep(cache,filter):filter?(filter+="",$.grep(cache,function(e){return e._id==filter})):cache}function pushLoading(){loadingLevel++||trigger("loading",null,!0,getView())}function popLoading(){--loadingLevel||trigger("loading",null,!1,getView())}function buildEvent(data,source){var start,end,allDay,allDayDefault,out={};return options.eventDataTransform&&(data=options.eventDataTransform(data)),source&&source.eventDataTransform&&(data=source.eventDataTransform(data)),start=t.moment(data.start||data.date),start.isValid()&&(end=null,!data.end||(end=t.moment(data.end),end.isValid()))?(allDay=data.allDay,void 0===allDay&&(allDayDefault=firstDefined(source?source.allDayDefault:void 0,options.allDayDefault),allDay=void 0!==allDayDefault?allDayDefault:!(start.hasTime()||end&&end.hasTime())),allDay?(start.hasTime()&&start.stripTime(),end&&end.hasTime()&&end.stripTime()):(start.hasTime()||(start=t.rezoneDate(start)),end&&!end.hasTime()&&(end=t.rezoneDate(end))),$.extend(out,data),source&&(out.source=source),out._id=data._id||(void 0===data.id?"_fc"+eventGUID++:data.id+""),data.className?"string"==typeof data.className?out.className=data.className.split(/\s+/):out.className=data.className:out.className=[],out.allDay=allDay,out.start=start,out.end=end,options.forceEventDuration&&!out.end&&(out.end=getEventEnd(out)),backupEventDates(out),out):void 0}function mutateEvent(event,newStart,newEnd){var newAllDay,dateDelta,durationDelta,oldAllDay=event._allDay,oldStart=event._start,oldEnd=event._end,clearEnd=!1;return newStart||newEnd||(newStart=event.start,newEnd=event.end),newAllDay=event.allDay!=oldAllDay?event.allDay:!(newStart||newEnd).hasTime(),newAllDay&&(newStart&&(newStart=newStart.clone().stripTime()),newEnd&&(newEnd=newEnd.clone().stripTime())),newStart&&(dateDelta=newAllDay?dayishDiff(newStart,oldStart.clone().stripTime()):dayishDiff(newStart,oldStart)),newAllDay!=oldAllDay?clearEnd=!0:newEnd&&(durationDelta=dayishDiff(newEnd||t.getDefaultEventEnd(newAllDay,newStart||oldStart),newStart||oldStart).subtract(dayishDiff(oldEnd||t.getDefaultEventEnd(oldAllDay,oldStart),oldStart))),mutateEvents(clientEvents(event._id),clearEnd,newAllDay,dateDelta,durationDelta)}function mutateEvents(events,clearEnd,forceAllDay,dateDelta,durationDelta){var isAmbigTimezone=t.getIsAmbigTimezone(),undoFunctions=[];return $.each(events,function(i,event){var oldAllDay=event._allDay,oldStart=event._start,oldEnd=event._end,newAllDay=null!=forceAllDay?forceAllDay:oldAllDay,newStart=oldStart.clone(),newEnd=!clearEnd&&oldEnd?oldEnd.clone():null;newAllDay?(newStart.stripTime(),newEnd&&newEnd.stripTime()):(newStart.hasTime()||(newStart=t.rezoneDate(newStart)),newEnd&&!newEnd.hasTime()&&(newEnd=t.rezoneDate(newEnd))),newEnd||!options.forceEventDuration&&!+durationDelta||(newEnd=t.getDefaultEventEnd(newAllDay,newStart)),newStart.add(dateDelta),newEnd&&newEnd.add(dateDelta).add(durationDelta),isAmbigTimezone&&(+dateDelta&&newStart.stripZone(),newEnd&&(+dateDelta||+durationDelta)&&newEnd.stripZone()),event.allDay=newAllDay,event.start=newStart,event.end=newEnd,backupEventDates(event),undoFunctions.push(function(){event.allDay=oldAllDay,event.start=oldStart,event.end=oldEnd,backupEventDates(event)})}),function(){for(var i=0;i<undoFunctions.length;i++)undoFunctions[i]()}}function normalizeSource(source){source.className?"string"==typeof source.className&&(source.className=source.className.split(/\s+/)):source.className=[];for(var normalizers=fc.sourceNormalizers,i=0;i<normalizers.length;i++)normalizers[i].call(t,source)}function isSourcesEqual(source1,source2){return source1&&source2&&getSourcePrimitive(source1)==getSourcePrimitive(source2)}function getSourcePrimitive(source){return("object"==typeof source?source.events||source.url:"")||source}var t=this;t.isFetchNeeded=isFetchNeeded,t.fetchEvents=fetchEvents,t.addEventSource=addEventSource,t.removeEventSource=removeEventSource,t.updateEvent=updateEvent,t.renderEvent=renderEvent,t.removeEvents=removeEvents,t.clientEvents=clientEvents,t.mutateEvent=mutateEvent;var rangeStart,rangeEnd,trigger=t.trigger,getView=t.getView,reportEvents=t.reportEvents,getEventEnd=t.getEventEnd,stickySource={events:[]},sources=[stickySource],currentFetchID=0,pendingSourceCnt=0,loadingLevel=0,cache=[],_sources=options.eventSources||[];options.events&&_sources.push(options.events);for(var i=0;i<_sources.length;i++)_addEventSource(_sources[i]);var miscCopyableProps=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"]}function backupEventDates(event){event._allDay=event.allDay,event._start=event.start.clone(),event._end=event.end?event.end.clone():null}function createObject(proto){var f=function(){};return f.prototype=proto,new f}function extend(a,b){for(var i in b)b.hasOwnProperty(i)&&(a[i]=b[i])}function dayishDiff(d1,d0){return moment.duration({days:d1.clone().stripTime().diff(d0.clone().stripTime(),"days"),ms:d1.time()-d0.time()})}function isNativeDate(input){return"[object Date]"===Object.prototype.toString.call(input)||input instanceof Date}function lazySegBind(container,segs,bindHandlers){container.unbind("mouseover").mouseover(function(ev){for(var e,i,seg,parent=ev.target;parent!=this;)e=parent,parent=parent.parentNode;void 0!==(i=e._fci)&&(e._fci=void 0,seg=segs[i],bindHandlers(seg.event,seg.element,seg),$(ev.target).trigger(ev)),ev.stopPropagation()})}function setOuterWidth(element,width,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.width(Math.max(0,width-hsides(e,includeMargins)))}function setOuterHeight(element,height,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.height(Math.max(0,height-vsides(e,includeMargins)))}function hsides(element,includeMargins){return hpadding(element)+hborders(element)+(includeMargins?hmargins(element):0)}function hpadding(element){return(parseFloat($.css(element[0],"paddingLeft",!0))||0)+(parseFloat($.css(element[0],"paddingRight",!0))||0)}function hmargins(element){return(parseFloat($.css(element[0],"marginLeft",!0))||0)+(parseFloat($.css(element[0],"marginRight",!0))||0)}function hborders(element){return(parseFloat($.css(element[0],"borderLeftWidth",!0))||0)+(parseFloat($.css(element[0],"borderRightWidth",!0))||0)}function vsides(element,includeMargins){return vpadding(element)+vborders(element)+(includeMargins?vmargins(element):0)}function vpadding(element){return(parseFloat($.css(element[0],"paddingTop",!0))||0)+(parseFloat($.css(element[0],"paddingBottom",!0))||0)}function vmargins(element){return(parseFloat($.css(element[0],"marginTop",!0))||0)+(parseFloat($.css(element[0],"marginBottom",!0))||0)}function vborders(element){return(parseFloat($.css(element[0],"borderTopWidth",!0))||0)+(parseFloat($.css(element[0],"borderBottomWidth",!0))||0)}function noop(){}function dateCompare(a,b){return a-b}function arrayMax(a){return Math.max.apply(Math,a)}function smartProperty(obj,name){if(void 0!==obj[name])return obj[name];for(var res,parts=name.split(/(?=[A-Z])/),i=parts.length-1;i>=0;i--)if(res=obj[parts[i].toLowerCase()],void 0!==res)return res;return obj["default"]}function htmlEscape(s){return(s+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function stripHTMLEntities(text){return text.replace(/&.*?;/g,"")}function disableTextSelection(element){element.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function markFirstLast(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function getSkinCss(event,opt){var source=event.source||{},eventColor=event.color,sourceColor=source.color,optionColor=opt("eventColor"),backgroundColor=event.backgroundColor||eventColor||source.backgroundColor||sourceColor||opt("eventBackgroundColor")||optionColor,borderColor=event.borderColor||eventColor||source.borderColor||sourceColor||opt("eventBorderColor")||optionColor,textColor=event.textColor||source.textColor||opt("eventTextColor"),statements=[];return backgroundColor&&statements.push("background-color:"+backgroundColor),borderColor&&statements.push("border-color:"+borderColor),textColor&&statements.push("color:"+textColor),statements.join(";")}function applyAll(functions,thisObj,args){if($.isFunction(functions)&&(functions=[functions]),functions){var i,ret;for(i=0;i<functions.length;i++)ret=functions[i].apply(thisObj,args)||ret;return ret}}function firstDefined(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]}function makeMoment(args,parseUTC,parseZone){var ambigMatch,mom,input=args[0],isSingleString=1==args.length&&"string"==typeof input,isAmbigTime=!1,isAmbigZone=!1;return isSingleString?ambigDateOfMonthRegex.test(input)?(input+="-01",isAmbigTime=!0,isAmbigZone=!0):(ambigMatch=ambigTimeOrZoneRegex.exec(input))&&(isAmbigTime=!ambigMatch[5],isAmbigZone=!0):$.isArray(input)&&(isAmbigZone=!0),mom=parseUTC||parseZone||isAmbigTime?moment.utc.apply(moment,args):moment.apply(null,args),moment.isMoment(input)&&transferAmbigs(input,mom),isAmbigTime&&(mom._ambigTime=!0,mom._ambigZone=!0),parseZone&&(isAmbigZone?mom._ambigZone=!0:isSingleString?mom.zone(input):(isNativeDate(input)||void 0===input)&&mom.local()),new FCMoment(mom)}function FCMoment(config){extend(this,config)}function transferAmbigs(src,dest){src._ambigTime?dest._ambigTime=!0:dest._ambigTime&&delete dest._ambigTime,src._ambigZone?dest._ambigZone=!0:dest._ambigZone&&delete dest._ambigZone}function commonlyAmbiguate(inputs){var i,outputs=[],anyAmbigTime=!1,anyAmbigZone=!1;for(i=0;i<inputs.length;i++)outputs.push(fc.moment(inputs[i])),anyAmbigTime=anyAmbigTime||outputs[i]._ambigTime,anyAmbigZone=anyAmbigZone||outputs[i]._ambigZone;for(i=0;i<outputs.length;i++)anyAmbigTime?outputs[i].stripTime():anyAmbigZone&&outputs[i].stripZone();return outputs}function momentFormat(mom,formatStr){return moment.fn.format.call(mom,formatStr)}function formatDate(date,formatStr){return formatDateWithChunks(date,getFormatStringChunks(formatStr))}function formatDateWithChunks(date,chunks){var i,s="";for(i=0;i<chunks.length;i++)s+=formatDateWithChunk(date,chunks[i]);return s}function formatDateWithChunk(date,chunk){var token,maybeStr;return"string"==typeof chunk?chunk:(token=chunk.token)?tokenOverrides[token]?tokenOverrides[token](date):momentFormat(date,token):chunk.maybe&&(maybeStr=formatDateWithChunks(date,chunk.maybe),maybeStr.match(/[1-9]/))?maybeStr:""}function formatRange(date1,date2,formatStr,separator,isRTL){return formatStr=date1.lang().longDateFormat(formatStr)||formatStr,separator=separator||" - ",formatRangeWithChunks(date1,date2,getFormatStringChunks(formatStr),separator,isRTL)}function formatRangeWithChunks(date1,date2,chunks,separator,isRTL){var chunkStr,leftI,rightI,middleI,leftStr="",rightStr="",middleStr1="",middleStr2="",middleStr="";for(leftI=0;leftI<chunks.length&&(chunkStr=formatSimilarChunk(date1,date2,chunks[leftI]),chunkStr!==!1);leftI++)leftStr+=chunkStr;for(rightI=chunks.length-1;rightI>leftI&&(chunkStr=formatSimilarChunk(date1,date2,chunks[rightI]),chunkStr!==!1);rightI--)rightStr=chunkStr+rightStr;for(middleI=leftI;rightI>=middleI;middleI++)middleStr1+=formatDateWithChunk(date1,chunks[middleI]),middleStr2+=formatDateWithChunk(date2,chunks[middleI]);return(middleStr1||middleStr2)&&(middleStr=isRTL?middleStr2+separator+middleStr1:middleStr1+separator+middleStr2),leftStr+middleStr+rightStr}function formatSimilarChunk(date1,date2,chunk){var token,unit;return"string"==typeof chunk?chunk:(token=chunk.token)&&(unit=similarUnitMap[token.charAt(0)],unit&&date1.isSame(date2,unit))?momentFormat(date1,token):!1}function getFormatStringChunks(formatStr){return formatStr in formatStringChunkCache?formatStringChunkCache[formatStr]:formatStringChunkCache[formatStr]=chunkFormatString(formatStr)}function chunkFormatString(formatStr){for(var match,chunks=[],chunker=/\[([^\]]*)\]|\(([^\)]*)\)|((\w)\4*o?T?)|([^\w\[\(]+)/g;match=chunker.exec(formatStr);)match[1]?chunks.push(match[1]):match[2]?chunks.push({maybe:chunkFormatString(match[2])}):match[3]?chunks.push({token:match[3]}):match[5]&&chunks.push(match[5]);return chunks}function MonthView(element,calendar){function incrementDate(date,delta){return date.clone().stripTime().add("months",delta).startOf("month")}function render(date){t.intervalStart=date.clone().stripTime().startOf("month"),t.intervalEnd=t.intervalStart.clone().add("months",1),t.start=t.intervalStart.clone().startOf("week"),t.start=t.skipHiddenDays(t.start),t.end=t.intervalEnd.clone().add("days",(7-t.intervalEnd.weekday())%7),t.end=t.skipHiddenDays(t.end,-1,!0);var rowCnt=Math.ceil(t.end.diff(t.start,"weeks",!0));"fixed"==t.opt("weekMode")&&(t.end.add("weeks",6-rowCnt),rowCnt=6),t.title=calendar.formatDate(t.intervalStart,t.opt("titleFormat")),t.renderBasic(rowCnt,t.getCellsPerWeek(),!0)}var t=this;t.incrementDate=incrementDate,t.render=render,BasicView.call(t,element,calendar,"month")}function BasicWeekView(element,calendar){function incrementDate(date,delta){return date.clone().stripTime().add("weeks",delta).startOf("week")}function render(date){t.intervalStart=date.clone().stripTime().startOf("week"),t.intervalEnd=t.intervalStart.clone().add("weeks",1),t.start=t.skipHiddenDays(t.intervalStart),t.end=t.skipHiddenDays(t.intervalEnd,-1,!0),t.title=calendar.formatRange(t.start,t.end.clone().subtract(1),t.opt("titleFormat"),"  "),t.renderBasic(1,t.getCellsPerWeek(),!1)}var t=this;t.incrementDate=incrementDate,t.render=render,BasicView.call(t,element,calendar,"basicWeek")}function BasicDayView(element,calendar){function incrementDate(date,delta){var out=date.clone().stripTime().add("days",delta);return out=t.skipHiddenDays(out,0>delta?-1:1)}function render(date){t.start=t.intervalStart=date.clone().stripTime(),t.end=t.intervalEnd=t.start.clone().add("days",1),t.title=calendar.formatDate(t.start,t.opt("titleFormat")),t.renderBasic(1,1,!1)}var t=this;t.incrementDate=incrementDate,t.render=render,BasicView.call(t,element,calendar,"basicDay")}function BasicView(element,calendar,viewName){function renderBasic(_rowCnt,_colCnt,_showNumbers){rowCnt=_rowCnt,colCnt=_colCnt,showNumbers=_showNumbers,updateOptions(),body||buildEventContainer(),buildTable()}function updateOptions(){tm=opt("theme")?"ui":"fc",colFormat=opt("columnFormat"),showWeekNumbers=opt("weekNumbers")}function buildEventContainer(){daySegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(element)}function buildTable(){var html=buildTableHTML();table&&table.remove(),table=$(html).appendTo(element),head=table.find("thead"),headCells=head.find(".fc-day-header"),body=table.find("tbody"),bodyRows=body.find("tr"),bodyCells=body.find(".fc-day"),bodyFirstCells=bodyRows.find("td:first-child"),firstRowCellInners=bodyRows.eq(0).find(".fc-day > div"),firstRowCellContentInners=bodyRows.eq(0).find(".fc-day-content > div"),markFirstLast(head.add(head.find("tr"))),markFirstLast(bodyRows),bodyRows.eq(0).addClass("fc-first"),bodyRows.filter(":last").addClass("fc-last"),bodyCells.each(function(i,_cell){var date=cellToDate(Math.floor(i/colCnt),i%colCnt);trigger("dayRender",t,date,$(_cell))}),dayBind(bodyCells)}function buildTableHTML(){var html="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+buildHeadHTML()+buildBodyHTML()+"</table>";return html}function buildHeadHTML(){var col,date,headerClass=tm+"-widget-header",html="";for(html+="<thead><tr>",showWeekNumbers&&(html+="<th class='fc-week-number "+headerClass+"'>"+htmlEscape(opt("weekNumberTitle"))+"</th>"),col=0;colCnt>col;col++)date=cellToDate(0,col),html+="<th class='fc-day-header fc-"+dayIDs[date.day()]+" "+headerClass+"'>"+htmlEscape(formatDate(date,colFormat))+"</th>";return html+="</tr></thead>"}function buildBodyHTML(){var row,col,date,contentClass=tm+"-widget-content",html="";for(html+="<tbody>",row=0;rowCnt>row;row++){for(html+="<tr class='fc-week'>",showWeekNumbers&&(date=cellToDate(row,0),html+="<td class='fc-week-number "+contentClass+"'><div>"+htmlEscape(calculateWeekNumber(date))+"</div></td>"),col=0;colCnt>col;col++)date=cellToDate(row,col),html+=buildCellHTML(date);html+="</tr>"}return html+="</tbody>"}function buildCellHTML(date){var month=t.intervalStart.month(),today=calendar.getNow().stripTime(),html="",contentClass=tm+"-widget-content",classNames=["fc-day","fc-"+dayIDs[date.day()],contentClass];return date.month()!=month&&classNames.push("fc-other-month"),date.isSame(today,"day")?classNames.push("fc-today",tm+"-state-highlight"):classNames.push(today>date?"fc-past":"fc-future"),html+="<td class='"+classNames.join(" ")+"' data-date='"+date.format()+"'><div>",showNumbers&&(html+="<div class='fc-day-number'>"+date.date()+"</div>"),html+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function setHeight(height){viewHeight=height;var rowHeight,rowHeightLast,cell,bodyHeight=Math.max(viewHeight-head.height(),0);"variable"==opt("weekMode")?rowHeight=rowHeightLast=Math.floor(bodyHeight/(1==rowCnt?2:6)):(rowHeight=Math.floor(bodyHeight/rowCnt),rowHeightLast=bodyHeight-rowHeight*(rowCnt-1)),bodyFirstCells.each(function(i,_cell){rowCnt>i&&(cell=$(_cell),cell.find("> div").css("min-height",(i==rowCnt-1?rowHeightLast:rowHeight)-vsides(cell)))})}function setWidth(width){viewWidth=width,colPositions.clear(),colContentPositions.clear(),weekNumberWidth=0,showWeekNumbers&&(weekNumberWidth=head.find("th.fc-week-number").outerWidth()),colWidth=Math.floor((viewWidth-weekNumberWidth)/colCnt),setOuterWidth(headCells.slice(0,-1),colWidth)}function dayBind(days){days.click(dayClick).mousedown(daySelectionMousedown)}function dayClick(ev){if(!opt("selectable")){var date=calendar.moment($(this).data("date"));trigger("dayClick",this,date,ev)}}function renderDayOverlay(overlayStart,overlayEnd,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();for(var segments=rangeToSegments(overlayStart,overlayEnd),i=0;i<segments.length;i++){var segment=segments[i];dayBind(renderCellOverlay(segment.row,segment.leftCol,segment.row,segment.rightCol))}}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,element);return renderOverlay(rect,element)}function defaultSelectionEnd(start){return start.clone().stripTime().add("days",1)}function renderSelection(start,end){renderDayOverlay(start,end,!0)}function clearSelection(){clearOverlays()}function reportDayClick(date,ev){var cell=dateToCell(date),_element=bodyCells[cell.row*colCnt+cell.col];trigger("dayClick",_element,date,ev)}function dragStart(_dragElement,ev,ui){hoverListener.start(function(cell){if(clearOverlays(),cell){var d1=cellToDate(cell),d2=d1.clone().add(calendar.defaultAllDayEventDuration);renderDayOverlay(d1,d2)}},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();clearOverlays(),cell&&trigger("drop",_dragElement,cellToDate(cell),ev,ui)}function colLeft(col){return colPositions.left(col)}function colRight(col){return colPositions.right(col)}function colContentLeft(col){return colContentPositions.left(col)}function colContentRight(col){return colContentPositions.right(col)}function allDayRow(i){return bodyRows.eq(i)}var t=this;t.renderBasic=renderBasic,t.setHeight=setHeight,t.setWidth=setWidth,t.renderDayOverlay=renderDayOverlay,t.defaultSelectionEnd=defaultSelectionEnd,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,t.getHoverListener=function(){return hoverListener},t.colLeft=colLeft,t.colRight=colRight,t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.getIsCellAllDay=function(){return!0},t.allDayRow=allDayRow,t.getRowCnt=function(){return rowCnt},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getDaySegmentContainer=function(){return daySegmentContainer},View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),BasicEventRenderer.call(t);var table,head,headCells,body,bodyRows,bodyCells,bodyFirstCells,firstRowCellInners,firstRowCellContentInners,daySegmentContainer,viewWidth,viewHeight,colWidth,weekNumberWidth,rowCnt,colCnt,showNumbers,coordinateGrid,hoverListener,colPositions,colContentPositions,tm,colFormat,showWeekNumbers,opt=t.opt,trigger=t.trigger,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,daySelectionMousedown=t.daySelectionMousedown,cellToDate=t.cellToDate,dateToCell=t.dateToCell,rangeToSegments=t.rangeToSegments,formatDate=calendar.formatDate,calculateWeekNumber=calendar.calculateWeekNumber;disableTextSelection(element.addClass("fc-grid")),coordinateGrid=new CoordinateGrid(function(rows,cols){var e,n,p;headCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),bodyRows.each(function(i,_e){rowCnt>i&&(e=$(_e),n=e.offset().top,i&&(p[1]=n),p=[n],rows[i]=p)}),p[1]=n+e.outerHeight()}),hoverListener=new HoverListener(coordinateGrid),colPositions=new HorizontalPositionCache(function(col){return firstRowCellInners.eq(col)}),colContentPositions=new HorizontalPositionCache(function(col){return firstRowCellContentInners.eq(col)})}function BasicEventRenderer(){function renderEvents(events,modifiedEventId){t.renderDayEvents(events,modifiedEventId)}function clearEvents(){t.getDaySegmentContainer().empty()}var t=this;t.renderEvents=renderEvents,t.clearEvents=clearEvents,DayEventRenderer.call(t)}function AgendaWeekView(element,calendar){function incrementDate(date,delta){return date.clone().stripTime().add("weeks",delta).startOf("week")}function render(date){t.intervalStart=date.clone().stripTime().startOf("week"),t.intervalEnd=t.intervalStart.clone().add("weeks",1),t.start=t.skipHiddenDays(t.intervalStart),t.end=t.skipHiddenDays(t.intervalEnd,-1,!0),t.title=calendar.formatRange(t.start,t.end.clone().subtract(1),t.opt("titleFormat"),"  "),t.renderAgenda(t.getCellsPerWeek())}var t=this;t.incrementDate=incrementDate,t.render=render,AgendaView.call(t,element,calendar,"agendaWeek")}function AgendaDayView(element,calendar){function incrementDate(date,delta){var out=date.clone().stripTime().add("days",delta);return out=t.skipHiddenDays(out,0>delta?-1:1)}function render(date){t.start=t.intervalStart=date.clone().stripTime(),t.end=t.intervalEnd=t.start.clone().add("days",1),t.title=calendar.formatDate(t.start,t.opt("titleFormat")),t.renderAgenda(1)}var t=this;t.incrementDate=incrementDate,t.render=render,AgendaView.call(t,element,calendar,"agendaDay")}function generateAgendaAxisFormat(options,langData){return langData.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function generateAgendaTimeFormat(options,langData){return langData.longDateFormat("LT").replace(/\s*a$/i,"")}function AgendaView(element,calendar,viewName){function renderAgenda(c){colCnt=c,updateOptions(),dayTable?buildDayTable():buildSkeleton()}function updateOptions(){tm=opt("theme")?"ui":"fc",rtl=opt("isRTL"),colFormat=opt("columnFormat"),minTime=moment.duration(opt("minTime")),maxTime=moment.duration(opt("maxTime")),slotDuration=moment.duration(opt("slotDuration")),snapDuration=opt("snapDuration"),snapDuration=snapDuration?moment.duration(snapDuration):slotDuration}function buildSkeleton(){var s,slotTime,slotDate,minutes,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content",slotNormal=slotDuration.asMinutes()%15===0;for(buildDayTable(),slotLayer=$("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(element),opt("allDaySlot")?(daySegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotLayer),s="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+headerClass+" fc-agenda-axis'>"+(opt("allDayHTML")||htmlEscape(opt("allDayText")))+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+headerClass+" fc-agenda-gutter'>&nbsp;</th></tr></table>",allDayTable=$(s).appendTo(slotLayer),allDayRow=allDayTable.find("tr"),dayBind(allDayRow.find("td")),slotLayer.append("<div class='fc-agenda-divider "+headerClass+"'><div class='fc-agenda-divider-inner'/></div>")):daySegmentContainer=$([]),slotScroller=$("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(slotLayer),slotContainer=$("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(slotScroller),slotSegmentContainer=$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotContainer),s="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",slotTime=moment.duration(+minTime),slotCnt=0;maxTime>slotTime;)slotDate=t.start.clone().time(slotTime),minutes=slotDate.minutes(),s+="<tr class='fc-slot"+slotCnt+" "+(minutes?"fc-minor":"")+"'><th class='fc-agenda-axis "+headerClass+"'>"+(slotNormal&&minutes?"&nbsp;":htmlEscape(formatDate(slotDate,opt("axisFormat"))))+"</th><td class='"+contentClass+"'><div style='position:relative'>&nbsp;</div></td></tr>",slotTime.add(slotDuration),slotCnt++;s+="</tbody></table>",slotTable=$(s).appendTo(slotContainer),slotBind(slotTable.find("td"))}function buildDayTable(){var html=buildDayTableHTML();dayTable&&dayTable.remove(),dayTable=$(html).appendTo(element),dayHead=dayTable.find("thead"),dayHeadCells=dayHead.find("th").slice(1,-1),dayBody=dayTable.find("tbody"),dayBodyCells=dayBody.find("td").slice(0,-1),dayBodyCellInners=dayBodyCells.find("> div"),dayBodyCellContentInners=dayBodyCells.find(".fc-day-content > div"),dayBodyFirstCell=dayBodyCells.eq(0),dayBodyFirstCellStretcher=dayBodyCellInners.eq(0),markFirstLast(dayHead.add(dayHead.find("tr"))),markFirstLast(dayBody.add(dayBody.find("tr")))}function buildDayTableHTML(){var html="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+buildDayTableHeadHTML()+buildDayTableBodyHTML()+"</table>";return html}function buildDayTableHeadHTML(){var date,weekText,col,headerClass=tm+"-widget-header",html="";for(html+="<thead><tr>",opt("weekNumbers")?(date=cellToDate(0,0),weekText=calculateWeekNumber(date),rtl?weekText+=opt("weekNumberTitle"):weekText=opt("weekNumberTitle")+weekText,html+="<th class='fc-agenda-axis fc-week-number "+headerClass+"'>"+htmlEscape(weekText)+"</th>"):html+="<th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",col=0;colCnt>col;col++)date=cellToDate(0,col),html+="<th class='fc-"+dayIDs[date.day()]+" fc-col"+col+" "+headerClass+"'>"+htmlEscape(formatDate(date,colFormat))+"</th>";return html+="<th class='fc-agenda-gutter "+headerClass+"'>&nbsp;</th></tr></thead>"}function buildDayTableBodyHTML(){var date,col,cellsHTML,cellHTML,classNames,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content",today=calendar.getNow().stripTime(),html="";for(html+="<tbody><tr><th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",cellsHTML="",col=0;colCnt>col;col++)date=cellToDate(0,col),classNames=["fc-col"+col,"fc-"+dayIDs[date.day()],contentClass],date.isSame(today,"day")?classNames.push(tm+"-state-highlight","fc-today"):classNames.push(today>date?"fc-past":"fc-future"),cellHTML="<td class='"+classNames.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",cellsHTML+=cellHTML;return html+=cellsHTML,html+="<td class='fc-agenda-gutter "+contentClass+"'>&nbsp;</td></tr></tbody>"}function setHeight(height){void 0===height&&(height=viewHeight),viewHeight=height,slotTopCache={};var headHeight=dayBody.position().top,allDayHeight=slotScroller.position().top,bodyHeight=Math.min(height-headHeight,slotTable.height()+allDayHeight+1);dayBodyFirstCellStretcher.height(bodyHeight-vsides(dayBodyFirstCell)),slotLayer.css("top",headHeight),slotScroller.height(bodyHeight-allDayHeight-1);var slotHeight0=slotTable.find("tr:first").height()+1,slotHeight1=slotTable.find("tr:eq(1)").height();slotHeight=(slotHeight0+slotHeight1)/2,snapRatio=slotDuration/snapDuration,snapHeight=slotHeight/snapRatio}function setWidth(width){viewWidth=width,colPositions.clear(),colContentPositions.clear();var axisFirstCells=dayHead.find("th:first");allDayTable&&(axisFirstCells=axisFirstCells.add(allDayTable.find("th:first"))),axisFirstCells=axisFirstCells.add(slotTable.find("th:first")),axisWidth=0,setOuterWidth(axisFirstCells.width("").each(function(i,_cell){axisWidth=Math.max(axisWidth,$(_cell).outerWidth())}),axisWidth);var gutterCells=dayTable.find(".fc-agenda-gutter");allDayTable&&(gutterCells=gutterCells.add(allDayTable.find("th.fc-agenda-gutter")));var slotTableWidth=slotScroller[0].clientWidth;gutterWidth=slotScroller.width()-slotTableWidth,
gutterWidth?(setOuterWidth(gutterCells,gutterWidth),gutterCells.show().prev().removeClass("fc-last")):gutterCells.hide().prev().addClass("fc-last"),colWidth=Math.floor((slotTableWidth-axisWidth)/colCnt),setOuterWidth(dayHeadCells.slice(0,-1),colWidth)}function resetScroll(){function scroll(){slotScroller.scrollTop(top)}var top=computeTimeTop(moment.duration(opt("scrollTime")))+1;scroll(),setTimeout(scroll,0)}function afterRender(){resetScroll()}function dayBind(cells){cells.click(slotClick).mousedown(daySelectionMousedown)}function slotBind(cells){cells.click(slotClick).mousedown(slotSelectionMousedown)}function slotClick(ev){if(!opt("selectable")){var col=Math.min(colCnt-1,Math.floor((ev.pageX-dayTable.offset().left-axisWidth)/colWidth)),date=cellToDate(0,col),match=this.parentNode.className.match(/fc-slot(\d+)/);if(match){var slotIndex=parseInt(match[1]);date.add(minTime+slotIndex*slotDuration),date=calendar.rezoneDate(date),trigger("dayClick",dayBodyCells[col],date,ev)}else trigger("dayClick",dayBodyCells[col],date,ev)}}function renderDayOverlay(overlayStart,overlayEnd,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();for(var segments=rangeToSegments(overlayStart,overlayEnd),i=0;i<segments.length;i++){var segment=segments[i];dayBind(renderCellOverlay(segment.row,segment.leftCol,segment.row,segment.rightCol))}}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,slotLayer);return renderOverlay(rect,slotLayer)}function renderSlotOverlay(overlayStart,overlayEnd){overlayStart=overlayStart.clone().stripZone(),overlayEnd=overlayEnd.clone().stripZone();for(var i=0;colCnt>i;i++){var dayStart=cellToDate(0,i),dayEnd=dayStart.clone().add("days",1),stretchStart=overlayStart>dayStart?overlayStart:dayStart,stretchEnd=overlayEnd>dayEnd?dayEnd:overlayEnd;if(stretchEnd>stretchStart){var rect=coordinateGrid.rect(0,i,0,i,slotContainer),top=computeDateTop(stretchStart,dayStart),bottom=computeDateTop(stretchEnd,dayStart);rect.top=top,rect.height=bottom-top,slotBind(renderOverlay(rect,slotContainer))}}}function colLeft(col){return colPositions.left(col)}function colContentLeft(col){return colContentPositions.left(col)}function colRight(col){return colPositions.right(col)}function colContentRight(col){return colContentPositions.right(col)}function getIsCellAllDay(cell){return opt("allDaySlot")&&!cell.row}function realCellToDate(cell){var date=cellToDate(0,cell.col),slotIndex=cell.row;return opt("allDaySlot")&&slotIndex--,slotIndex>=0&&(date.time(moment.duration(minTime+slotIndex*slotDuration)),date=calendar.rezoneDate(date)),date}function computeDateTop(date,startOfDayDate){return computeTimeTop(moment.duration(date.clone().stripZone()-startOfDayDate.clone().stripTime()))}function computeTimeTop(time){if(minTime>time)return 0;if(time>=maxTime)return slotTable.height();var slots=(time-minTime)/slotDuration,slotIndex=Math.floor(slots),slotPartial=slots-slotIndex,slotTop=slotTopCache[slotIndex];void 0===slotTop&&(slotTop=slotTopCache[slotIndex]=slotTable.find("tr").eq(slotIndex).find("td div")[0].offsetTop);var top=slotTop-1+slotPartial*slotHeight;return top=Math.max(top,0)}function defaultSelectionEnd(start){return start.hasTime()?start.clone().add(slotDuration):start.clone().add("days",1)}function renderSelection(start,end){start.hasTime()||end.hasTime()?renderSlotSelection(start,end):opt("allDaySlot")&&renderDayOverlay(start,end,!0)}function renderSlotSelection(startDate,endDate){var helperOption=opt("selectHelper");if(coordinateGrid.build(),helperOption){var col=dateToCell(startDate).col;if(col>=0&&colCnt>col){var rect=coordinateGrid.rect(0,col,0,col,slotContainer),top=computeDateTop(startDate,startDate),bottom=computeDateTop(endDate,startDate);if(bottom>top){if(rect.top=top,rect.height=bottom-top,rect.left+=2,rect.width-=5,$.isFunction(helperOption)){var helperRes=helperOption(startDate,endDate);helperRes&&(rect.position="absolute",selectionHelper=$(helperRes).css(rect).appendTo(slotContainer))}else rect.isStart=!0,rect.isEnd=!0,selectionHelper=$(slotSegHtml({title:"",start:startDate,end:endDate,className:["fc-select-helper"],editable:!1},rect)),selectionHelper.css("opacity",opt("dragOpacity"));selectionHelper&&(slotBind(selectionHelper),slotContainer.append(selectionHelper),setOuterWidth(selectionHelper,rect.width,!0),setOuterHeight(selectionHelper,rect.height,!0))}}}else renderSlotOverlay(startDate,endDate)}function clearSelection(){clearOverlays(),selectionHelper&&(selectionHelper.remove(),selectionHelper=null)}function slotSelectionMousedown(ev){if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){if(clearSelection(),cell&&cell.col==origCell.col&&!getIsCellAllDay(cell)){var d1=realCellToDate(origCell),d2=realCellToDate(cell);dates=[d1,d1.clone().add(snapDuration),d2,d2.clone().add(snapDuration)].sort(dateCompare),renderSlotSelection(dates[0],dates[3])}else dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],ev),reportSelection(dates[0],dates[3],ev))})}}function reportDayClick(date,ev){trigger("dayClick",dayBodyCells[dateToCell(date).col],date,ev)}function dragStart(_dragElement,ev,ui){hoverListener.start(function(cell){if(clearOverlays(),cell){var d1=realCellToDate(cell),d2=d1.clone();d1.hasTime()?(d2.add(calendar.defaultTimedEventDuration),renderSlotOverlay(d1,d2)):(d2.add(calendar.defaultAllDayEventDuration),renderDayOverlay(d1,d2))}},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();clearOverlays(),cell&&trigger("drop",_dragElement,realCellToDate(cell),ev,ui)}var t=this;t.renderAgenda=renderAgenda,t.setWidth=setWidth,t.setHeight=setHeight,t.afterRender=afterRender,t.computeDateTop=computeDateTop,t.getIsCellAllDay=getIsCellAllDay,t.allDayRow=function(){return allDayRow},t.getCoordinateGrid=function(){return coordinateGrid},t.getHoverListener=function(){return hoverListener},t.colLeft=colLeft,t.colRight=colRight,t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.getDaySegmentContainer=function(){return daySegmentContainer},t.getSlotSegmentContainer=function(){return slotSegmentContainer},t.getSlotContainer=function(){return slotContainer},t.getRowCnt=function(){return 1},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getSnapHeight=function(){return snapHeight},t.getSnapDuration=function(){return snapDuration},t.getSlotHeight=function(){return slotHeight},t.getSlotDuration=function(){return slotDuration},t.getMinTime=function(){return minTime},t.getMaxTime=function(){return maxTime},t.defaultSelectionEnd=defaultSelectionEnd,t.renderDayOverlay=renderDayOverlay,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),AgendaEventRenderer.call(t);var dayTable,dayHead,dayHeadCells,dayBody,dayBodyCells,dayBodyCellInners,dayBodyCellContentInners,dayBodyFirstCell,dayBodyFirstCellStretcher,slotLayer,daySegmentContainer,allDayTable,allDayRow,slotScroller,slotContainer,slotSegmentContainer,slotTable,selectionHelper,viewWidth,viewHeight,axisWidth,colWidth,gutterWidth,slotDuration,slotHeight,snapDuration,snapRatio,snapHeight,colCnt,slotCnt,coordinateGrid,hoverListener,colPositions,colContentPositions,tm,rtl,minTime,maxTime,colFormat,opt=t.opt,trigger=t.trigger,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,reportSelection=t.reportSelection,unselect=t.unselect,daySelectionMousedown=t.daySelectionMousedown,slotSegHtml=t.slotSegHtml,cellToDate=t.cellToDate,dateToCell=t.dateToCell,rangeToSegments=t.rangeToSegments,formatDate=calendar.formatDate,calculateWeekNumber=calendar.calculateWeekNumber,slotTopCache={};disableTextSelection(element.addClass("fc-agenda")),coordinateGrid=new CoordinateGrid(function(rows,cols){function constrain(n){return Math.max(slotScrollerTop,Math.min(slotScrollerBottom,n))}var e,n,p;dayHeadCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),opt("allDaySlot")&&(e=allDayRow,n=e.offset().top,rows[0]=[n,n+e.outerHeight()]);for(var slotTableTop=slotContainer.offset().top,slotScrollerTop=slotScroller.offset().top,slotScrollerBottom=slotScrollerTop+slotScroller.outerHeight(),i=0;slotCnt*snapRatio>i;i++)rows.push([constrain(slotTableTop+snapHeight*i),constrain(slotTableTop+snapHeight*(i+1))])}),hoverListener=new HoverListener(coordinateGrid),colPositions=new HorizontalPositionCache(function(col){return dayBodyCellInners.eq(col)}),colContentPositions=new HorizontalPositionCache(function(col){return dayBodyCellContentInners.eq(col)})}function AgendaEventRenderer(){function renderEvents(events,modifiedEventId){var i,len=events.length,dayEvents=[],slotEvents=[];for(i=0;len>i;i++)events[i].allDay?dayEvents.push(events[i]):slotEvents.push(events[i]);opt("allDaySlot")&&(renderDayEvents(dayEvents,modifiedEventId),setHeight()),renderSlotSegs(compileSlotSegs(slotEvents),modifiedEventId)}function clearEvents(){getDaySegmentContainer().empty(),getSlotSegmentContainer().empty()}function compileSlotSegs(events){var cellDate,i,j,seg,colSegs,colCnt=getColCnt(),minTime=getMinTime(),maxTime=getMaxTime(),segs=[];for(i=0;colCnt>i;i++)for(cellDate=cellToDate(0,i),colSegs=sliceSegs(events,cellDate.clone().time(minTime),cellDate.clone().time(maxTime)),colSegs=placeSlotSegs(colSegs),j=0;j<colSegs.length;j++)seg=colSegs[j],seg.col=i,segs.push(seg);return segs}function sliceSegs(events,rangeStart,rangeEnd){rangeStart=rangeStart.clone().stripZone(),rangeEnd=rangeEnd.clone().stripZone();var i,event,eventStart,eventEnd,segStart,segEnd,isStart,isEnd,segs=[],len=events.length;for(i=0;len>i;i++)event=events[i],eventStart=event.start.clone().stripZone(),eventEnd=getEventEnd(event).stripZone(),eventEnd>rangeStart&&rangeEnd>eventStart&&(rangeStart>eventStart?(segStart=rangeStart.clone(),isStart=!1):(segStart=eventStart,isStart=!0),eventEnd>rangeEnd?(segEnd=rangeEnd.clone(),isEnd=!1):(segEnd=eventEnd,isEnd=!0),segs.push({event:event,start:segStart,end:segEnd,isStart:isStart,isEnd:isEnd}));return segs.sort(compareSlotSegs)}function renderSlotSegs(segs,modifiedEventId){var i,seg,event,top,bottom,columnLeft,columnRight,columnWidth,width,left,right,eventElements,eventElement,triggerRes,titleElement,height,segCnt=segs.length,html="",slotSegmentContainer=getSlotSegmentContainer(),isRTL=opt("isRTL");for(i=0;segCnt>i;i++)seg=segs[i],event=seg.event,top=computeDateTop(seg.start,seg.start),bottom=computeDateTop(seg.end,seg.start),columnLeft=colContentLeft(seg.col),columnRight=colContentRight(seg.col),columnWidth=columnRight-columnLeft,columnRight-=.025*columnWidth,columnWidth=columnRight-columnLeft,width=columnWidth*(seg.forwardCoord-seg.backwardCoord),opt("slotEventOverlap")&&(width=Math.max(2*(width-10),width)),isRTL?(right=columnRight-seg.backwardCoord*columnWidth,left=right-width):(left=columnLeft+seg.backwardCoord*columnWidth,right=left+width),left=Math.max(left,columnLeft),right=Math.min(right,columnRight),width=right-left,seg.top=top,seg.left=left,seg.outerWidth=width,seg.outerHeight=bottom-top,html+=slotSegHtml(event,seg);for(slotSegmentContainer[0].innerHTML=html,eventElements=slotSegmentContainer.children(),i=0;segCnt>i;i++)seg=segs[i],event=seg.event,eventElement=$(eventElements[i]),triggerRes=trigger("eventRender",event,event,eventElement),triggerRes===!1?eventElement.remove():(triggerRes&&triggerRes!==!0&&(eventElement.remove(),eventElement=$(triggerRes).css({position:"absolute",top:seg.top,left:seg.left}).appendTo(slotSegmentContainer)),seg.element=eventElement,event._id===modifiedEventId?bindSlotSeg(event,eventElement,seg):eventElement[0]._fci=i,reportEventElement(event,eventElement));for(lazySegBind(slotSegmentContainer,segs,bindSlotSeg),i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(seg.vsides=vsides(eventElement,!0),seg.hsides=hsides(eventElement,!0),titleElement=eventElement.find(".fc-event-title"),titleElement.length&&(seg.contentTop=titleElement[0].offsetTop));for(i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(eventElement[0].style.width=Math.max(0,seg.outerWidth-seg.hsides)+"px",height=Math.max(0,seg.outerHeight-seg.vsides),eventElement[0].style.height=height+"px",event=seg.event,void 0!==seg.contentTop&&height-seg.contentTop<10&&(eventElement.find("div.fc-event-time").text(formatDate(event.start,opt("timeFormat"))+" - "+event.title),eventElement.find("div.fc-event-title").remove()),trigger("eventAfterRender",event,event,eventElement))}function slotSegHtml(event,seg){var html="<",url=event.url,skinCss=getSkinCss(event,opt),classes=["fc-event","fc-event-vert"];return isEventDraggable(event)&&classes.push("fc-event-draggable"),seg.isStart&&classes.push("fc-event-start"),seg.isEnd&&classes.push("fc-event-end"),classes=classes.concat(event.className),event.source&&(classes=classes.concat(event.source.className||[])),html+=url?"a href='"+htmlEscape(event.url)+"'":"div",html+=" class='"+classes.join(" ")+"' style='position:absolute;top:"+seg.top+"px;left:"+seg.left+"px;"+skinCss+"'><div class='fc-event-inner'><div class='fc-event-time'>",html+=htmlEscape(event.end?formatRange(event.start,event.end,opt("timeFormat")):formatDate(event.start,opt("timeFormat"))),html+="</div><div class='fc-event-title'>"+htmlEscape(event.title||"")+"</div></div><div class='fc-event-bg'></div>",seg.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),html+="</"+(url?"a":"div")+">"}function bindSlotSeg(event,eventElement,seg){var timeElement=eventElement.find("div.fc-event-time");isEventDraggable(event)&&draggableSlotEvent(event,eventElement,timeElement),seg.isEnd&&isEventResizable(event)&&resizableSlotEvent(event,eventElement,timeElement),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement,seg){function resetElement(){allDay||(eventElement.width(origWidth).height("").draggable("option","grid",null),allDay=!0)}var origWidth,revert,dayDelta,isStart=seg.isStart,allDay=!0,hoverListener=getHoverListener(),colWidth=getColWidth(),minTime=getMinTime(),slotDuration=getSlotDuration(),slotHeight=getSlotHeight(),snapDuration=getSnapDuration(),snapHeight=getSnapHeight();eventElement.draggable({opacity:opt("dragOpacity","month"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),origWidth=eventElement.width(),hoverListener.start(function(cell,origCell){if(clearOverlays(),cell){revert=!1;var origDate=cellToDate(0,origCell.col),date=cellToDate(0,cell.col);dayDelta=date.diff(origDate,"days"),cell.row?isStart?allDay&&(eventElement.width(colWidth-10),setOuterHeight(eventElement,calendar.defaultTimedEventDuration/slotDuration*slotHeight),eventElement.draggable("option","grid",[colWidth,1]),allDay=!1):revert=!0:(renderDayOverlay(event.start.clone().add("days",dayDelta),getEventEnd(event).add("days",dayDelta)),resetElement()),revert=revert||allDay&&!dayDelta}else resetElement(),revert=!0;eventElement.draggable("option","revert",revert)},ev,"drag")},stop:function(ev,ui){if(hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),revert)resetElement(),eventElement.css("filter",""),showEvents(event,eventElement);else{var snapTime,snapIndex,eventStart=event.start.clone().add("days",dayDelta);allDay||(snapIndex=Math.round((eventElement.offset().top-getSlotContainer().offset().top)/snapHeight),snapTime=moment.duration(minTime+snapIndex*snapDuration),eventStart=calendar.rezoneDate(eventStart.clone().time(snapTime))),eventDrop(this,event,eventStart,ev,ui)}}})}function draggableSlotEvent(event,eventElement,timeElement){function updateUI(){clearOverlays(),isInBounds&&(isAllDay?(timeElement.hide(),eventElement.draggable("option","grid",null),renderDayOverlay(eventStart,eventEnd)):(updateTimeText(),timeElement.css("display",""),eventElement.draggable("option","grid",[colWidth,snapHeight])))}function updateTimeText(){var text;eventStart&&(text=event.end?formatRange(eventStart,eventEnd,opt("timeFormat")):formatDate(eventStart,opt("timeFormat")),timeElement.text(text))}var origPosition,origCell,isInBounds,prevIsInBounds,isAllDay,prevIsAllDay,colDelta,prevColDelta,dayDelta,snapDelta,prevSnapDelta,eventStart,eventEnd,coordinateGrid=t.getCoordinateGrid(),colCnt=getColCnt(),colWidth=getColWidth(),snapHeight=getSnapHeight(),snapDuration=getSnapDuration();eventElement.draggable({scroll:!1,grid:[colWidth,snapHeight],axis:1==colCnt?"y":!1,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),coordinateGrid.build(),origPosition=eventElement.position(),origCell=coordinateGrid.cell(ev.pageX,ev.pageY),isInBounds=prevIsInBounds=!0,isAllDay=prevIsAllDay=getIsCellAllDay(origCell),colDelta=prevColDelta=0,dayDelta=0,snapDelta=prevSnapDelta=0,eventStart=null,eventEnd=null},drag:function(ev,ui){var cell=coordinateGrid.cell(ev.pageX,ev.pageY);if(isInBounds=!!cell){if(isAllDay=getIsCellAllDay(cell),colDelta=Math.round((ui.position.left-origPosition.left)/colWidth),colDelta!=prevColDelta){var origDate=cellToDate(0,origCell.col),col=origCell.col+colDelta;col=Math.max(0,col),col=Math.min(colCnt-1,col);var date=cellToDate(0,col);dayDelta=date.diff(origDate,"days")}isAllDay||(snapDelta=Math.round((ui.position.top-origPosition.top)/snapHeight))}(isInBounds!=prevIsInBounds||isAllDay!=prevIsAllDay||colDelta!=prevColDelta||snapDelta!=prevSnapDelta)&&(isAllDay?(eventStart=event.start.clone().stripTime().add("days",dayDelta),eventEnd=eventStart.clone().add(calendar.defaultAllDayEventDuration)):(eventStart=event.start.clone().add(snapDelta*snapDuration).add("days",dayDelta),eventEnd=getEventEnd(event).add(snapDelta*snapDuration).add("days",dayDelta)),updateUI(),prevIsInBounds=isInBounds,prevIsAllDay=isAllDay,prevColDelta=colDelta,prevSnapDelta=snapDelta),eventElement.draggable("option","revert",!isInBounds)},stop:function(ev,ui){clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),isInBounds&&(isAllDay||dayDelta||snapDelta)?eventDrop(this,event,eventStart,ev,ui):(isInBounds=!0,isAllDay=!1,colDelta=0,dayDelta=0,snapDelta=0,updateUI(),eventElement.css("filter",""),eventElement.css(origPosition),showEvents(event,eventElement))}})}function resizableSlotEvent(event,eventElement,timeElement){var snapDelta,prevSnapDelta,eventEnd,snapHeight=getSnapHeight(),snapDuration=getSnapDuration();eventElement.resizable({handles:{s:".ui-resizable-handle"},grid:snapHeight,start:function(ev,ui){snapDelta=prevSnapDelta=0,hideEvents(event,eventElement),trigger("eventResizeStart",this,event,ev,ui)},resize:function(ev,ui){if(snapDelta=Math.round((Math.max(snapHeight,eventElement.height())-ui.originalSize.height)/snapHeight),snapDelta!=prevSnapDelta){eventEnd=getEventEnd(event).add(snapDuration*snapDelta);var text;text=snapDelta||event.end?formatRange(event.start,eventEnd,opt("timeFormat")):formatDate(event.start,opt("timeFormat")),timeElement.text(text),prevSnapDelta=snapDelta}},stop:function(ev,ui){trigger("eventResizeStop",this,event,ev,ui),snapDelta?eventResize(this,event,eventEnd,ev,ui):showEvents(event,eventElement)}})}var t=this;t.renderEvents=renderEvents,t.clearEvents=clearEvents,t.slotSegHtml=slotSegHtml,DayEventRenderer.call(t);var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,eventElementHandlers=t.eventElementHandlers,setHeight=t.setHeight,getDaySegmentContainer=t.getDaySegmentContainer,getSlotSegmentContainer=t.getSlotSegmentContainer,getHoverListener=t.getHoverListener,computeDateTop=t.computeDateTop,getIsCellAllDay=t.getIsCellAllDay,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,cellToDate=t.cellToDate,getColCnt=t.getColCnt,getColWidth=t.getColWidth,getSnapHeight=t.getSnapHeight,getSnapDuration=t.getSnapDuration,getSlotHeight=t.getSlotHeight,getSlotDuration=t.getSlotDuration,getSlotContainer=t.getSlotContainer,reportEventElement=t.reportEventElement,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,eventResize=t.eventResize,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,renderDayEvents=t.renderDayEvents,getMinTime=t.getMinTime,getMaxTime=t.getMaxTime,calendar=t.calendar,formatDate=calendar.formatDate,formatRange=calendar.formatRange,getEventEnd=calendar.getEventEnd;t.draggableDayEvent=draggableDayEvent}function placeSlotSegs(segs){var i,levels=buildSlotSegLevels(segs),level0=levels[0];if(computeForwardSlotSegs(levels),level0){for(i=0;i<level0.length;i++)computeSlotSegPressures(level0[i]);for(i=0;i<level0.length;i++)computeSlotSegCoords(level0[i],0,0)}return flattenSlotSegLevels(levels)}function buildSlotSegLevels(segs){var i,seg,j,levels=[];for(i=0;i<segs.length;i++){for(seg=segs[i],j=0;j<levels.length&&computeSlotSegCollisions(seg,levels[j]).length;j++);(levels[j]||(levels[j]=[])).push(seg)}return levels}function computeForwardSlotSegs(levels){var i,level,j,seg,k;for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)for(seg=level[j],seg.forwardSegs=[],k=i+1;k<levels.length;k++)computeSlotSegCollisions(seg,levels[k],seg.forwardSegs)}function computeSlotSegPressures(seg){var i,forwardSeg,forwardSegs=seg.forwardSegs,forwardPressure=0;if(void 0===seg.forwardPressure){for(i=0;i<forwardSegs.length;i++)forwardSeg=forwardSegs[i],computeSlotSegPressures(forwardSeg),forwardPressure=Math.max(forwardPressure,1+forwardSeg.forwardPressure);seg.forwardPressure=forwardPressure}}function computeSlotSegCoords(seg,seriesBackwardPressure,seriesBackwardCoord){var i,forwardSegs=seg.forwardSegs;if(void 0===seg.forwardCoord)for(forwardSegs.length?(forwardSegs.sort(compareForwardSlotSegs),computeSlotSegCoords(forwardSegs[0],seriesBackwardPressure+1,seriesBackwardCoord),seg.forwardCoord=forwardSegs[0].backwardCoord):seg.forwardCoord=1,seg.backwardCoord=seg.forwardCoord-(seg.forwardCoord-seriesBackwardCoord)/(seriesBackwardPressure+1),i=0;i<forwardSegs.length;i++)computeSlotSegCoords(forwardSegs[i],0,seg.forwardCoord)}function flattenSlotSegLevels(levels){var i,level,j,segs=[];for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)segs.push(level[j]);return segs}function computeSlotSegCollisions(seg,otherSegs,results){results=results||[];for(var i=0;i<otherSegs.length;i++)isSlotSegCollision(seg,otherSegs[i])&&results.push(otherSegs[i]);return results}function isSlotSegCollision(seg1,seg2){return seg1.end>seg2.start&&seg1.start<seg2.end}function compareForwardSlotSegs(seg1,seg2){return seg2.forwardPressure-seg1.forwardPressure||(seg1.backwardCoord||0)-(seg2.backwardCoord||0)||compareSlotSegs(seg1,seg2)}function compareSlotSegs(seg1,seg2){return seg1.start-seg2.start||seg2.end-seg2.start-(seg1.end-seg1.start)||(seg1.event.title||"").localeCompare(seg2.event.title)}function View(element,calendar,viewName){function opt(name,viewNameOverride){var v=options[name];return $.isPlainObject(v)&&!isForcedAtomicOption(name)?smartProperty(v,viewNameOverride||viewName):v}function trigger(name,thisObj){return calendar.trigger.apply(calendar,[name,thisObj||t].concat(Array.prototype.slice.call(arguments,2),[t]))}function isEventDraggable(event){var source=event.source||{};return firstDefined(event.startEditable,source.startEditable,opt("eventStartEditable"),event.editable,source.editable,opt("editable"))}function isEventResizable(event){var source=event.source||{};return firstDefined(event.durationEditable,source.durationEditable,opt("eventDurationEditable"),event.editable,source.editable,opt("editable"))}function clearEventData(){eventElementsByID={},eventElementCouples=[]}function reportEventElement(event,element){eventElementCouples.push({event:event,element:element}),eventElementsByID[event._id]?eventElementsByID[event._id].push(element):eventElementsByID[event._id]=[element]}function triggerEventDestroy(){$.each(eventElementCouples,function(i,couple){t.trigger("eventDestroy",couple.event,couple.event,couple.element)})}function eventElementHandlers(event,eventElement){eventElement.click(function(ev){return eventElement.hasClass("ui-draggable-dragging")||eventElement.hasClass("ui-resizable-resizing")?void 0:trigger("eventClick",this,event,ev)}).hover(function(ev){trigger("eventMouseover",this,event,ev)},function(ev){trigger("eventMouseout",this,event,ev)})}function showEvents(event,exceptElement){eachEventElement(event,exceptElement,"show")}function hideEvents(event,exceptElement){eachEventElement(event,exceptElement,"hide")}function eachEventElement(event,exceptElement,funcName){var i,elements=eventElementsByID[event._id],len=elements.length;for(i=0;len>i;i++)exceptElement&&elements[i][0]==exceptElement[0]||elements[i][funcName]()}function eventDrop(el,event,newStart,ev,ui){var undoMutation=calendar.mutateEvent(event,newStart,null);trigger("eventDrop",el,event,function(){undoMutation(),reportEventChange(event._id)},ev,ui),reportEventChange(event._id)}function eventResize(el,event,newEnd,ev,ui){var undoMutation=calendar.mutateEvent(event,null,newEnd);trigger("eventResize",el,event,function(){undoMutation(),reportEventChange(event._id)},ev,ui),reportEventChange(event._id)}function isHiddenDay(day){return moment.isMoment(day)&&(day=day.day()),isHiddenDayHash[day]}function getCellsPerWeek(){return cellsPerWeek}function skipHiddenDays(date,inc,isExclusive){var out=date.clone();for(inc=inc||1;isHiddenDayHash[(out.day()+(isExclusive?inc:0)+7)%7];)out.add("days",inc);return out}function cellToDate(){var cellOffset=cellToCellOffset.apply(null,arguments),dayOffset=cellOffsetToDayOffset(cellOffset),date=dayOffsetToDate(dayOffset);return date}function cellToCellOffset(row,col){var colCnt=t.getColCnt(),dis=isRTL?-1:1,dit=isRTL?colCnt-1:0;"object"==typeof row&&(col=row.col,row=row.row);var cellOffset=row*colCnt+(col*dis+dit);return cellOffset}function cellOffsetToDayOffset(cellOffset){var day0=t.start.day();return cellOffset+=dayToCellMap[day0],7*Math.floor(cellOffset/cellsPerWeek)+cellToDayMap[(cellOffset%cellsPerWeek+cellsPerWeek)%cellsPerWeek]-day0}function dayOffsetToDate(dayOffset){return t.start.clone().add("days",dayOffset)}function dateToCell(date){var dayOffset=dateToDayOffset(date),cellOffset=dayOffsetToCellOffset(dayOffset),cell=cellOffsetToCell(cellOffset);return cell}function dateToDayOffset(date){return date.clone().stripTime().diff(t.start,"days")}function dayOffsetToCellOffset(dayOffset){var day0=t.start.day();return dayOffset+=day0,Math.floor(dayOffset/7)*cellsPerWeek+dayToCellMap[(dayOffset%7+7)%7]-dayToCellMap[day0]}function cellOffsetToCell(cellOffset){var colCnt=t.getColCnt(),dis=isRTL?-1:1,dit=isRTL?colCnt-1:0,row=Math.floor(cellOffset/colCnt),col=(cellOffset%colCnt+colCnt)%colCnt*dis+dit;return{row:row,col:col}}function rangeToSegments(start,end){var rowCnt=t.getRowCnt(),colCnt=t.getColCnt(),segments=[],rangeDayOffsetStart=dateToDayOffset(start),rangeDayOffsetEnd=dateToDayOffset(end),endTimeMS=+end.time();endTimeMS&&endTimeMS>=nextDayThreshold&&rangeDayOffsetEnd++,rangeDayOffsetEnd=Math.max(rangeDayOffsetEnd,rangeDayOffsetStart+1);for(var rangeCellOffsetFirst=dayOffsetToCellOffset(rangeDayOffsetStart),rangeCellOffsetLast=dayOffsetToCellOffset(rangeDayOffsetEnd)-1,row=0;rowCnt>row;row++){var rowCellOffsetFirst=row*colCnt,rowCellOffsetLast=rowCellOffsetFirst+colCnt-1,segmentCellOffsetFirst=Math.max(rangeCellOffsetFirst,rowCellOffsetFirst),segmentCellOffsetLast=Math.min(rangeCellOffsetLast,rowCellOffsetLast);if(segmentCellOffsetLast>=segmentCellOffsetFirst){var segmentCellFirst=cellOffsetToCell(segmentCellOffsetFirst),segmentCellLast=cellOffsetToCell(segmentCellOffsetLast),cols=[segmentCellFirst.col,segmentCellLast.col].sort(),isStart=cellOffsetToDayOffset(segmentCellOffsetFirst)==rangeDayOffsetStart,isEnd=cellOffsetToDayOffset(segmentCellOffsetLast)+1==rangeDayOffsetEnd;segments.push({row:row,leftCol:cols[0],rightCol:cols[1],isStart:isStart,isEnd:isEnd})}}return segments}var t=this;t.element=element,t.calendar=calendar,t.name=viewName,t.opt=opt,t.trigger=trigger,t.isEventDraggable=isEventDraggable,t.isEventResizable=isEventResizable,t.clearEventData=clearEventData,t.reportEventElement=reportEventElement,t.triggerEventDestroy=triggerEventDestroy,t.eventElementHandlers=eventElementHandlers,t.showEvents=showEvents,t.hideEvents=hideEvents,t.eventDrop=eventDrop,t.eventResize=eventResize;var reportEventChange=calendar.reportEventChange,eventElementsByID={},eventElementCouples=[],options=calendar.options,nextDayThreshold=moment.duration(options.nextDayThreshold);t.isHiddenDay=isHiddenDay,t.skipHiddenDays=skipHiddenDays,t.getCellsPerWeek=getCellsPerWeek,t.dateToCell=dateToCell,t.dateToDayOffset=dateToDayOffset,t.dayOffsetToCellOffset=dayOffsetToCellOffset,t.cellOffsetToCell=cellOffsetToCell,t.cellToDate=cellToDate,t.cellToCellOffset=cellToCellOffset,t.cellOffsetToDayOffset=cellOffsetToDayOffset,t.dayOffsetToDate=dayOffsetToDate,t.rangeToSegments=rangeToSegments;var cellsPerWeek,hiddenDays=opt("hiddenDays")||[],isHiddenDayHash=[],dayToCellMap=[],cellToDayMap=[],isRTL=opt("isRTL");!function(){opt("weekends")===!1&&hiddenDays.push(0,6);for(var dayIndex=0,cellIndex=0;7>dayIndex;dayIndex++)dayToCellMap[dayIndex]=cellIndex,isHiddenDayHash[dayIndex]=-1!=$.inArray(dayIndex,hiddenDays),isHiddenDayHash[dayIndex]||(cellToDayMap[cellIndex]=dayIndex,cellIndex++);if(cellsPerWeek=cellIndex,!cellsPerWeek)throw"invalid hiddenDays"}()}function DayEventRenderer(){function renderDayEvents(events,modifiedEventId){var segments=_renderDayEvents(events,!1,!0);segmentElementEach(segments,function(segment,element){reportEventElement(segment.event,element)}),attachHandlers(segments,modifiedEventId),segmentElementEach(segments,function(segment,element){trigger("eventAfterRender",segment.event,segment.event,element)})}function renderTempDayEvent(event,adjustRow,adjustTop){var segments=_renderDayEvents([event],!0,!1),elements=[];return segmentElementEach(segments,function(segment,element){segment.row===adjustRow&&element.css("top",adjustTop),elements.push(element[0])}),elements}function _renderDayEvents(events,doAppend,doRowHeights){var html,elements,finalContainer=getDaySegmentContainer(),renderContainer=doAppend?$("<div/>"):finalContainer,segments=buildSegments(events);return calculateHorizontals(segments),html=buildHTML(segments),renderContainer[0].innerHTML=html,elements=renderContainer.children(),doAppend&&finalContainer.append(elements),resolveElements(segments,elements),segmentElementEach(segments,function(segment,element){segment.hsides=hsides(element,!0)}),segmentElementEach(segments,function(segment,element){element.width(Math.max(0,segment.outerWidth-segment.hsides))}),segmentElementEach(segments,function(segment,element){segment.outerHeight=element.outerHeight(!0)}),setVerticals(segments,doRowHeights),segments}function buildSegments(events){for(var segments=[],i=0;i<events.length;i++){var eventSegments=buildSegmentsForEvent(events[i]);segments.push.apply(segments,eventSegments)}return segments}function buildSegmentsForEvent(event){for(var segments=rangeToSegments(event.start,getEventEnd(event)),i=0;i<segments.length;i++)segments[i].event=event;return segments}function calculateHorizontals(segments){for(var isRTL=opt("isRTL"),i=0;i<segments.length;i++){var segment=segments[i],leftFunc=(isRTL?segment.isEnd:segment.isStart)?colContentLeft:colLeft,rightFunc=(isRTL?segment.isStart:segment.isEnd)?colContentRight:colRight,left=leftFunc(segment.leftCol),right=rightFunc(segment.rightCol);segment.left=left,segment.outerWidth=right-left}}function buildHTML(segments){for(var html="",i=0;i<segments.length;i++)html+=buildHTMLForSegment(segments[i]);return html}function buildHTMLForSegment(segment){var html="",isRTL=opt("isRTL"),event=segment.event,url=event.url,classNames=["fc-event","fc-event-hori"];isEventDraggable(event)&&classNames.push("fc-event-draggable"),
segment.isStart&&classNames.push("fc-event-start"),segment.isEnd&&classNames.push("fc-event-end"),classNames=classNames.concat(event.className),event.source&&(classNames=classNames.concat(event.source.className||[]));var skinCss=getSkinCss(event,opt);return html+=url?"<a href='"+htmlEscape(url)+"'":"<div",html+=" class='"+classNames.join(" ")+"' style='position:absolute;left:"+segment.left+"px;"+skinCss+"'><div class='fc-event-inner'>",!event.allDay&&segment.isStart&&(html+="<span class='fc-event-time'>"+htmlEscape(formatDate(event.start,opt("timeFormat")))+"</span>"),html+="<span class='fc-event-title'>"+htmlEscape(event.title||"")+"</span></div>",event.allDay&&segment.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-"+(isRTL?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),html+="</"+(url?"a":"div")+">"}function resolveElements(segments,elements){for(var i=0;i<segments.length;i++){var segment=segments[i],event=segment.event,element=elements.eq(i),triggerRes=trigger("eventRender",event,event,element);triggerRes===!1?element.remove():(triggerRes&&triggerRes!==!0&&(triggerRes=$(triggerRes).css({position:"absolute",left:segment.left}),element.replaceWith(triggerRes),element=triggerRes),segment.element=element)}}function setVerticals(segments,doRowHeights){var i,rowContentHeights=calculateVerticals(segments),rowContentElements=getRowContentElements(),rowContentTops=[];if(doRowHeights)for(i=0;i<rowContentElements.length;i++)rowContentElements[i].height(rowContentHeights[i]);for(i=0;i<rowContentElements.length;i++)rowContentTops.push(rowContentElements[i].position().top);segmentElementEach(segments,function(segment,element){element.css("top",rowContentTops[segment.row]+segment.top)})}function calculateVerticals(segments){for(var colI,rowCnt=getRowCnt(),colCnt=getColCnt(),rowContentHeights=[],segmentRows=buildSegmentRows(segments),rowI=0;rowCnt>rowI;rowI++){var segmentRow=segmentRows[rowI],colHeights=[];for(colI=0;colCnt>colI;colI++)colHeights.push(0);for(var segmentI=0;segmentI<segmentRow.length;segmentI++){var segment=segmentRow[segmentI];for(segment.top=arrayMax(colHeights.slice(segment.leftCol,segment.rightCol+1)),colI=segment.leftCol;colI<=segment.rightCol;colI++)colHeights[colI]=segment.top+segment.outerHeight}rowContentHeights.push(arrayMax(colHeights))}return rowContentHeights}function buildSegmentRows(segments){var segmentI,segment,rowI,rowCnt=getRowCnt(),segmentRows=[];for(segmentI=0;segmentI<segments.length;segmentI++)segment=segments[segmentI],rowI=segment.row,segment.element&&(segmentRows[rowI]?segmentRows[rowI].push(segment):segmentRows[rowI]=[segment]);for(rowI=0;rowCnt>rowI;rowI++)segmentRows[rowI]=sortSegmentRow(segmentRows[rowI]||[]);return segmentRows}function sortSegmentRow(segments){for(var sortedSegments=[],subrows=buildSegmentSubrows(segments),i=0;i<subrows.length;i++)sortedSegments.push.apply(sortedSegments,subrows[i]);return sortedSegments}function buildSegmentSubrows(segments){segments.sort(compareDaySegments);for(var subrows=[],i=0;i<segments.length;i++){for(var segment=segments[i],j=0;j<subrows.length&&isDaySegmentCollision(segment,subrows[j]);j++);subrows[j]?subrows[j].push(segment):subrows[j]=[segment]}return subrows}function getRowContentElements(){var i,rowCnt=getRowCnt(),rowDivs=[];for(i=0;rowCnt>i;i++)rowDivs[i]=allDayRow(i).find("div.fc-day-content > div");return rowDivs}function attachHandlers(segments,modifiedEventId){var segmentContainer=getDaySegmentContainer();segmentElementEach(segments,function(segment,element,i){var event=segment.event;event._id===modifiedEventId?bindDaySeg(event,element,segment):element[0]._fci=i}),lazySegBind(segmentContainer,segments,bindDaySeg)}function bindDaySeg(event,eventElement,segment){isEventDraggable(event)&&t.draggableDayEvent(event,eventElement,segment),event.allDay&&segment.isEnd&&isEventResizable(event)&&t.resizableDayEvent(event,eventElement,segment),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement){var dayDelta,eventStart,hoverListener=getHoverListener();eventElement.draggable({delay:50,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),hoverListener.start(function(cell,origCell,rowDelta,colDelta){if(eventElement.draggable("option","revert",!cell||!rowDelta&&!colDelta),clearOverlays(),cell){var origCellDate=cellToDate(origCell),cellDate=cellToDate(cell);dayDelta=cellDate.diff(origCellDate,"days"),eventStart=event.start.clone().add("days",dayDelta),renderDayOverlay(eventStart,getEventEnd(event).add("days",dayDelta))}else dayDelta=0},ev,"drag")},stop:function(ev,ui){hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),dayDelta?eventDrop(this,event,eventStart,ev,ui):(eventElement.css("filter",""),showEvents(event,eventElement))}})}function resizableDayEvent(event,element,segment){var isRTL=opt("isRTL"),direction=isRTL?"w":"e",handle=element.find(".ui-resizable-"+direction),isResizing=!1;disableTextSelection(element),element.mousedown(function(ev){ev.preventDefault()}).click(function(ev){isResizing&&(ev.preventDefault(),ev.stopImmediatePropagation())}),handle.mousedown(function(ev){function mouseup(ev){trigger("eventResizeStop",this,event,ev),$("body").css("cursor",""),hoverListener.stop(),clearOverlays(),dayDelta&&eventResize(this,event,eventEnd,ev),setTimeout(function(){isResizing=!1},0)}if(1==ev.which){isResizing=!0;var dayDelta,eventEnd,helpers,hoverListener=getHoverListener(),elementTop=element.css("top"),eventCopy=$.extend({},event),minCellOffset=dayOffsetToCellOffset(dateToDayOffset(event.start));clearSelection(),$("body").css("cursor",direction+"-resize").one("mouseup",mouseup),trigger("eventResizeStart",this,event,ev),hoverListener.start(function(cell,origCell){if(cell){var origCellOffset=cellToCellOffset(origCell),cellOffset=cellToCellOffset(cell);if(cellOffset=Math.max(cellOffset,minCellOffset),dayDelta=cellOffsetToDayOffset(cellOffset)-cellOffsetToDayOffset(origCellOffset),eventEnd=getEventEnd(event).add("days",dayDelta),dayDelta){eventCopy.end=eventEnd;var oldHelpers=helpers;helpers=renderTempDayEvent(eventCopy,segment.row,elementTop),helpers=$(helpers),helpers.find("*").css("cursor",direction+"-resize"),oldHelpers&&oldHelpers.remove(),hideEvents(event)}else helpers&&(showEvents(event),helpers.remove(),helpers=null);clearOverlays(),renderDayOverlay(event.start,eventEnd)}},ev)}})}var t=this;t.renderDayEvents=renderDayEvents,t.draggableDayEvent=draggableDayEvent,t.resizableDayEvent=resizableDayEvent;var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,reportEventElement=t.reportEventElement,eventElementHandlers=t.eventElementHandlers,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,eventResize=t.eventResize,getRowCnt=t.getRowCnt,getColCnt=t.getColCnt,allDayRow=t.allDayRow,colLeft=t.colLeft,colRight=t.colRight,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,getDaySegmentContainer=t.getDaySegmentContainer,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,clearSelection=t.clearSelection,getHoverListener=t.getHoverListener,rangeToSegments=t.rangeToSegments,cellToDate=t.cellToDate,cellToCellOffset=t.cellToCellOffset,cellOffsetToDayOffset=t.cellOffsetToDayOffset,dateToDayOffset=t.dateToDayOffset,dayOffsetToCellOffset=t.dayOffsetToCellOffset,calendar=t.calendar,getEventEnd=calendar.getEventEnd,formatDate=calendar.formatDate}function isDaySegmentCollision(segment,otherSegments){for(var i=0;i<otherSegments.length;i++){var otherSegment=otherSegments[i];if(otherSegment.leftCol<=segment.rightCol&&otherSegment.rightCol>=segment.leftCol)return!0}return!1}function segmentElementEach(segments,callback){for(var i=0;i<segments.length;i++){var segment=segments[i],element=segment.element;element&&callback(segment,element,i)}}function compareDaySegments(a,b){return b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay||a.event.start-b.event.start||(a.event.title||"").localeCompare(b.event.title)}function SelectionManager(){function select(start,end){unselect(),start=calendar.moment(start),end=end?calendar.moment(end):defaultSelectionEnd(start),renderSelection(start,end),reportSelection(start,end)}function unselect(ev){selected&&(selected=!1,clearSelection(),trigger("unselect",null,ev))}function reportSelection(start,end,ev){selected=!0,trigger("select",null,start,end,ev)}function daySelectionMousedown(ev){var cellToDate=t.cellToDate,getIsCellAllDay=t.getIsCellAllDay,hoverListener=t.getHoverListener(),reportDayClick=t.reportDayClick;if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){clearSelection(),cell&&getIsCellAllDay(cell)?(dates=[cellToDate(origCell),cellToDate(cell)].sort(dateCompare),renderSelection(dates[0],dates[1].clone().add("days",1))):dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],ev),reportSelection(dates[0],dates[1].clone().add("days",1),ev))})}}var t=this;t.select=select,t.unselect=unselect,t.reportSelection=reportSelection,t.daySelectionMousedown=daySelectionMousedown;var calendar=t.calendar,opt=t.opt,trigger=t.trigger,defaultSelectionEnd=t.defaultSelectionEnd,renderSelection=t.renderSelection,clearSelection=t.clearSelection,selected=!1;opt("selectable")&&opt("unselectAuto")&&$(document).mousedown(function(ev){var ignore=opt("unselectCancel");ignore&&$(ev.target).parents(ignore).length||unselect(ev)})}function OverlayManager(){function renderOverlay(rect,parent){var e=unusedOverlays.shift();return e||(e=$("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),e[0].parentNode!=parent[0]&&e.appendTo(parent),usedOverlays.push(e.css(rect).show()),e}function clearOverlays(){for(var e;e=usedOverlays.shift();)unusedOverlays.push(e.hide().unbind())}var t=this;t.renderOverlay=renderOverlay,t.clearOverlays=clearOverlays;var usedOverlays=[],unusedOverlays=[]}function CoordinateGrid(buildFunc){var rows,cols,t=this;t.build=function(){rows=[],cols=[],buildFunc(rows,cols)},t.cell=function(x,y){var i,rowCnt=rows.length,colCnt=cols.length,r=-1,c=-1;for(i=0;rowCnt>i;i++)if(y>=rows[i][0]&&y<rows[i][1]){r=i;break}for(i=0;colCnt>i;i++)if(x>=cols[i][0]&&x<cols[i][1]){c=i;break}return r>=0&&c>=0?{row:r,col:c}:null},t.rect=function(row0,col0,row1,col1,originElement){var origin=originElement.offset();return{top:rows[row0][0]-origin.top,left:cols[col0][0]-origin.left,width:cols[col1][1]-cols[col0][0],height:rows[row1][1]-rows[row0][0]}}}function HoverListener(coordinateGrid){function mouse(ev){_fixUIEvent(ev);var newCell=coordinateGrid.cell(ev.pageX,ev.pageY);(Boolean(newCell)!==Boolean(cell)||newCell&&(newCell.row!=cell.row||newCell.col!=cell.col))&&(newCell?(firstCell||(firstCell=newCell),change(newCell,firstCell,newCell.row-firstCell.row,newCell.col-firstCell.col)):change(newCell,firstCell),cell=newCell)}var bindType,change,firstCell,cell,t=this;t.start=function(_change,ev,_bindType){change=_change,firstCell=cell=null,coordinateGrid.build(),mouse(ev),bindType=_bindType||"mousemove",$(document).bind(bindType,mouse)},t.stop=function(){return $(document).unbind(bindType,mouse),cell}}function _fixUIEvent(event){void 0===event.pageX&&(event.pageX=event.originalEvent.pageX,event.pageY=event.originalEvent.pageY)}function HorizontalPositionCache(getElement){function e(i){return elements[i]=elements[i]||getElement(i)}var t=this,elements={},lefts={},rights={};t.left=function(i){return lefts[i]=void 0===lefts[i]?e(i).position().left:lefts[i]},t.right=function(i){return rights[i]=void 0===rights[i]?t.left(i)+e(i).width():rights[i]},t.clear=function(){elements={},lefts={},rights={}}}var defaults={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:generateWeekColumnFormat,day:"dddd"},timeFormat:{"default":generateShortTimeFormat},isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},langOptionHash={en:{columnFormat:{week:"ddd M/D"}}},rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},fc=$.fullCalendar={version:"2.0.0-beta2"},fcViews=fc.views={};$.fn.fullCalendar=function(options){var args=Array.prototype.slice.call(arguments,1),res=this;return this.each(function(i,_element){var singleRes,element=$(_element),calendar=element.data("fullCalendar");"string"==typeof options?calendar&&$.isFunction(calendar[options])&&(singleRes=calendar[options].apply(calendar,args),i||(res=singleRes),"destroy"===options&&element.removeData("fullCalendar")):calendar||(calendar=new Calendar(element,options),element.data("fullCalendar",calendar),calendar.render())}),res},fc.langs=langOptionHash,fc.datepickerLang=function(langCode,datepickerLangCode,options){var langOptions=langOptionHash[langCode];langOptions||(langOptions=langOptionHash[langCode]={}),mergeOptions(langOptions,{isRTL:options.isRTL,weekNumberTitle:options.weekHeader,titleFormat:{month:options.showMonthAfterYear?"YYYY["+options.yearSuffix+"] MMMM":"MMMM YYYY["+options.yearSuffix+"]"},buttonText:{prev:stripHTMLEntities(options.prevText),next:stripHTMLEntities(options.nextText),today:stripHTMLEntities(options.currentText)}}),$.datepicker&&($.datepicker.regional[datepickerLangCode]=$.datepicker.regional[langCode]=options,$.datepicker.regional.en=$.datepicker.regional[""],$.datepicker.setDefaults(options))},fc.lang=function(langCode,options){var langOptions;options&&(langOptions=langOptionHash[langCode],langOptions||(langOptions=langOptionHash[langCode]={}),mergeOptions(langOptions,options||{})),defaults.lang=langCode},fc.sourceNormalizers=[],fc.sourceFetchers=[];var ajaxDefaults={dataType:"json",cache:!1},eventGUID=1;fc.applyAll=applyAll;var dayIDs=["sun","mon","tue","wed","thu","fri","sat"],ambigDateOfMonthRegex=/^\s*\d{4}-\d\d$/,ambigTimeOrZoneRegex=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;fc.moment=function(){return makeMoment(arguments)},fc.moment.utc=function(){return makeMoment(arguments,!0)},fc.moment.parseZone=function(){return makeMoment(arguments,!0,!0)},FCMoment.prototype=createObject(moment.fn),FCMoment.prototype.clone=function(){return makeMoment([this])},FCMoment.prototype.time=function(time){return null==time?moment.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}):(delete this._ambigTime,moment.isDuration(time)||moment.isMoment(time)||(time=moment.duration(time)),this.hours(time.hours()+24*time.days()).minutes(time.minutes()).seconds(time.seconds()).milliseconds(time.milliseconds()))},FCMoment.prototype.stripTime=function(){var a=this.toArray();return moment.fn.utc.call(this),this._ambigTime=!0,this._ambigZone=!0,this.year(a[0]).month(a[1]).date(a[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this},FCMoment.prototype.hasTime=function(){return!this._ambigTime},FCMoment.prototype.stripZone=function(){var a=this.toArray();return moment.fn.utc.call(this),this._ambigZone=!0,this.year(a[0]).month(a[1]).date(a[2]).hours(a[3]).minutes(a[4]).seconds(a[5]).milliseconds(a[6]),this},FCMoment.prototype.hasZone=function(){return!this._ambigZone},FCMoment.prototype.zone=function(tzo){return null!=tzo&&delete this._ambigZone,moment.fn.zone.apply(this,arguments)},FCMoment.prototype.local=function(){return delete this._ambigZone,moment.fn.local.apply(this,arguments)},FCMoment.prototype.utc=function(){return delete this._ambigZone,moment.fn.utc.apply(this,arguments)},FCMoment.prototype.format=function(){return arguments[0]?formatDate(this,arguments[0]):this._ambigTime?momentFormat(this,"YYYY-MM-DD"):this._ambigZone?momentFormat(this,"YYYY-MM-DD[T]HH:mm:ss"):momentFormat(this)},FCMoment.prototype.toISOString=function(){return this._ambigTime?momentFormat(this,"YYYY-MM-DD"):this._ambigZone?momentFormat(this,"YYYY-MM-DD[T]HH:mm:ss"):moment.fn.toISOString.apply(this,arguments)},FCMoment.prototype.isWithin=function(start,end){var a=commonlyAmbiguate([this,start,end]);return a[0]>=a[1]&&a[0]<a[2]},$.each(["isBefore","isAfter","isSame"],function(i,methodName){FCMoment.prototype[methodName]=function(input,units){var a=commonlyAmbiguate([this,input]);return moment.fn[methodName].call(a[0],a[1],units)}});var tokenOverrides={t:function(date){return momentFormat(date,"a").charAt(0)},T:function(date){return momentFormat(date,"A").charAt(0)}};fc.formatRange=formatRange;var similarUnitMap={Y:"year",M:"month",D:"day",d:"day"},formatStringChunkCache={};fcViews.month=MonthView,fcViews.basicWeek=BasicWeekView,fcViews.basicDay=BasicDayView,setDefaults({weekMode:"fixed"}),fcViews.agendaWeek=AgendaWeekView,fcViews.agendaDay=AgendaDayView,setDefaults({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:generateAgendaAxisFormat,timeFormat:{agenda:generateAgendaTimeFormat},dragOpacity:{agenda:.5},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0})}),function($){var _=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(str){return!str||/^\s*$/.test(str)},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(obj){return"string"==typeof obj},isNumber:function(obj){return"number"==typeof obj},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return"undefined"==typeof obj},toStr:function(s){return _.isUndefined(s)||null===s?"":s+""},bind:$.proxy,each:function(collection,cb){function reverseArgs(index,value){return cb(value,index)}$.each(collection,reverseArgs)},map:$.map,filter:$.grep,every:function(obj,test){var result=!0;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?void 0:!1}),!!result):result},some:function(obj,test){var result=!1;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?!1:void 0}),!!result):result},mixin:$.extend,getUniqueId:function(){var counter=0;return function(){return counter++}}(),templatify:function(obj){function template(){return String(obj)}return $.isFunction(obj)?obj:template},defer:function(fn){setTimeout(fn,0)},debounce:function(func,wait,immediate){var timeout,result;return function(){var later,callNow,context=this,args=arguments;return later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout,clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&(result=func.apply(context,args)),result}},throttle:function(func,wait){var context,args,timeout,result,previous,later;return previous=0,later=function(){previous=new Date,timeout=null,result=func.apply(context,args)},function(){var now=new Date,remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||(timeout=setTimeout(later,remaining)),result}},noop:function(){}}}(),VERSION="0.10.5",tokenizers=function(){"use strict";function whitespace(str){return str=_.toStr(str),str?str.split(/\s+/):[]}function nonword(str){return str=_.toStr(str),str?str.split(/\W+/):[]}function getObjTokenizer(tokenizer){return function(){var args=[].slice.call(arguments,0);return function(o){var tokens=[];return _.each(args,function(k){tokens=tokens.concat(tokenizer(_.toStr(o[k])))}),tokens}}}return{nonword:nonword,whitespace:whitespace,obj:{nonword:getObjTokenizer(nonword),whitespace:getObjTokenizer(whitespace)}}}(),LruCache=function(){"use strict";function LruCache(maxSize){this.maxSize=_.isNumber(maxSize)?maxSize:100,this.reset(),this.maxSize<=0&&(this.set=this.get=$.noop)}function List(){this.head=this.tail=null}function Node(key,val){this.key=key,this.val=val,this.prev=this.next=null}return _.mixin(LruCache.prototype,{set:function(key,val){var node,tailItem=this.list.tail;this.size>=this.maxSize&&(this.list.remove(tailItem),delete this.hash[tailItem.key]),(node=this.hash[key])?(node.val=val,this.list.moveToFront(node)):(node=new Node(key,val),this.list.add(node),this.hash[key]=node,this.size++)},get:function(key){var node=this.hash[key];return node?(this.list.moveToFront(node),node.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new List}}),_.mixin(List.prototype,{add:function(node){this.head&&(node.next=this.head,this.head.prev=node),this.head=node,this.tail=this.tail||node},remove:function(node){node.prev?node.prev.next=node.next:this.head=node.next,node.next?node.next.prev=node.prev:this.tail=node.prev},moveToFront:function(node){this.remove(node),this.add(node)}}),LruCache}(),PersistentStorage=function(){"use strict";function PersistentStorage(namespace){this.prefix=["__",namespace,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+_.escapeRegExChars(this.prefix))}function now(){return(new Date).getTime()}function encode(val){return JSON.stringify(_.isUndefined(val)?null:val)}function decode(val){return JSON.parse(val)}var ls,methods;try{ls=window.localStorage,ls.setItem("~~~","!"),ls.removeItem("~~~")}catch(err){ls=null}return methods=ls&&window.JSON?{_prefix:function(key){return this.prefix+key},_ttlKey:function(key){return this._prefix(key)+this.ttlKey},get:function(key){return this.isExpired(key)&&this.remove(key),decode(ls.getItem(this._prefix(key)))},set:function(key,val,ttl){return _.isNumber(ttl)?ls.setItem(this._ttlKey(key),encode(now()+ttl)):ls.removeItem(this._ttlKey(key)),ls.setItem(this._prefix(key),encode(val))},remove:function(key){return ls.removeItem(this._ttlKey(key)),ls.removeItem(this._prefix(key)),this},clear:function(){var i,key,keys=[],len=ls.length;for(i=0;len>i;i++)(key=ls.key(i)).match(this.keyMatcher)&&keys.push(key.replace(this.keyMatcher,""));for(i=keys.length;i--;)this.remove(keys[i]);return this},isExpired:function(key){var ttl=decode(ls.getItem(this._ttlKey(key)));return _.isNumber(ttl)&&now()>ttl?!0:!1}}:{get:_.noop,set:_.noop,remove:_.noop,clear:_.noop,isExpired:_.noop},_.mixin(PersistentStorage.prototype,methods),PersistentStorage}(),Transport=function(){"use strict";function Transport(o){o=o||{},this.cancelled=!1,this.lastUrl=null,this._send=o.transport?callbackToDeferred(o.transport):$.ajax,this._get=o.rateLimiter?o.rateLimiter(this._get):this._get,this._cache=o.cache===!1?new LruCache(0):sharedCache}function callbackToDeferred(fn){return function(url,o){function onSuccess(resp){_.defer(function(){deferred.resolve(resp)})}function onError(err){_.defer(function(){deferred.reject(err)})}var deferred=$.Deferred();return fn(url,o,onSuccess,onError),deferred}}var pendingRequestsCount=0,pendingRequests={},maxPendingRequests=6,sharedCache=new LruCache(10);return Transport.setMaxPendingRequests=function(num){maxPendingRequests=num},Transport.resetCache=function(){sharedCache.reset()},_.mixin(Transport.prototype,{_get:function(url,o,cb){function done(resp){cb&&cb(null,resp),that._cache.set(url,resp)}function fail(){cb&&cb(!0)}function always(){pendingRequestsCount--,delete pendingRequests[url],that.onDeckRequestArgs&&(that._get.apply(that,that.onDeckRequestArgs),that.onDeckRequestArgs=null)}var jqXhr,that=this;this.cancelled||url!==this.lastUrl||((jqXhr=pendingRequests[url])?jqXhr.done(done).fail(fail):maxPendingRequests>pendingRequestsCount?(pendingRequestsCount++,pendingRequests[url]=this._send(url,o).done(done).fail(fail).always(always)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(url,o,cb){var resp;return _.isFunction(o)&&(cb=o,o={}),this.cancelled=!1,this.lastUrl=url,(resp=this._cache.get(url))?_.defer(function(){cb&&cb(null,resp)}):this._get(url,o,cb),!!resp},cancel:function(){this.cancelled=!0}}),Transport}(),SearchIndex=function(){"use strict";function SearchIndex(o){o=o||{},o.datumTokenizer&&o.queryTokenizer||$.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=o.datumTokenizer,this.queryTokenizer=o.queryTokenizer,this.reset()}function normalizeTokens(tokens){return tokens=_.filter(tokens,function(token){return!!token}),tokens=_.map(tokens,function(token){return token.toLowerCase()})}function newNode(){return{ids:[],children:{}}}function unique(array){for(var seen={},uniques=[],i=0,len=array.length;len>i;i++)seen[array[i]]||(seen[array[i]]=!0,uniques.push(array[i]));return uniques}function getIntersection(arrayA,arrayB){function compare(a,b){return a-b}var ai=0,bi=0,intersection=[];arrayA=arrayA.sort(compare),arrayB=arrayB.sort(compare);for(var lenArrayA=arrayA.length,lenArrayB=arrayB.length;lenArrayA>ai&&lenArrayB>bi;)arrayA[ai]<arrayB[bi]?ai++:arrayA[ai]>arrayB[bi]?bi++:(intersection.push(arrayA[ai]),ai++,bi++);return intersection}return _.mixin(SearchIndex.prototype,{bootstrap:function(o){this.datums=o.datums,this.trie=o.trie},add:function(data){var that=this;data=_.isArray(data)?data:[data],_.each(data,function(datum){var id,tokens;id=that.datums.push(datum)-1,tokens=normalizeTokens(that.datumTokenizer(datum)),_.each(tokens,function(token){var node,chars,ch;for(node=that.trie,chars=token.split("");ch=chars.shift();)node=node.children[ch]||(node.children[ch]=newNode()),node.ids.push(id)})})},get:function(query){var tokens,matches,that=this;return tokens=normalizeTokens(this.queryTokenizer(query)),_.each(tokens,function(token){var node,chars,ch,ids;if(matches&&0===matches.length)return!1;for(node=that.trie,chars=token.split("");node&&(ch=chars.shift());)node=node.children[ch];return node&&0===chars.length?(ids=node.ids.slice(0),void(matches=matches?getIntersection(matches,ids):ids)):(matches=[],!1)}),matches?_.map(unique(matches),function(id){return that.datums[id]}):[]},reset:function(){this.datums=[],this.trie=newNode()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),SearchIndex}(),oParser=function(){"use strict";function getLocal(o){return o.local||null}function getPrefetch(o){var prefetch,defaults;return defaults={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(prefetch=o.prefetch||null)&&(prefetch=_.isString(prefetch)?{url:prefetch}:prefetch,prefetch=_.mixin(defaults,prefetch),prefetch.thumbprint=VERSION+prefetch.thumbprint,prefetch.ajax.type=prefetch.ajax.type||"GET",prefetch.ajax.dataType=prefetch.ajax.dataType||"json",!prefetch.url&&$.error("prefetch requires url to be set")),prefetch}function getRemote(o){function byDebounce(wait){return function(fn){return _.debounce(fn,wait)}}function byThrottle(wait){return function(fn){return _.throttle(fn,wait)}}var remote,defaults;return defaults={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(remote=o.remote||null)&&(remote=_.isString(remote)?{url:remote}:remote,remote=_.mixin(defaults,remote),remote.rateLimiter=/^throttle$/i.test(remote.rateLimitBy)?byThrottle(remote.rateLimitWait):byDebounce(remote.rateLimitWait),remote.ajax.type=remote.ajax.type||"GET",remote.ajax.dataType=remote.ajax.dataType||"json",delete remote.rateLimitBy,delete remote.rateLimitWait,!remote.url&&$.error("remote requires url to be set")),remote}return{local:getLocal,prefetch:getPrefetch,remote:getRemote}}();!function(root){"use strict";function Bloodhound(o){o&&(o.local||o.prefetch||o.remote)||$.error("one of local, prefetch, or remote is required"),this.limit=o.limit||5,this.sorter=getSorter(o.sorter),this.dupDetector=o.dupDetector||ignoreDuplicates,this.local=oParser.local(o),this.prefetch=oParser.prefetch(o),this.remote=oParser.remote(o),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new SearchIndex({datumTokenizer:o.datumTokenizer,queryTokenizer:o.queryTokenizer}),this.storage=this.cacheKey?new PersistentStorage(this.cacheKey):null}function getSorter(sortFn){function sort(array){return array.sort(sortFn)}function noSort(array){return array}return _.isFunction(sortFn)?sort:noSort}function ignoreDuplicates(){return!1}var old,keys;return old=root.Bloodhound,keys={data:"data",protocol:"protocol",thumbprint:"thumbprint"},root.Bloodhound=Bloodhound,Bloodhound.noConflict=function(){return root.Bloodhound=old,Bloodhound},Bloodhound.tokenizers=tokenizers,_.mixin(Bloodhound.prototype,{_loadPrefetch:function(o){function handlePrefetchResponse(resp){that.clear(),that.add(o.filter?o.filter(resp):resp),that._saveToStorage(that.index.serialize(),o.thumbprint,o.ttl)}var serialized,deferred,that=this;return(serialized=this._readFromStorage(o.thumbprint))?(this.index.bootstrap(serialized),deferred=$.Deferred().resolve()):deferred=$.ajax(o.url,o.ajax).done(handlePrefetchResponse),deferred},_getFromRemote:function(query,cb){function handleRemoteResponse(err,resp){cb(err?[]:that.remote.filter?that.remote.filter(resp):resp)}var url,uriEncodedQuery,that=this;if(this.transport)return query=query||"",uriEncodedQuery=encodeURIComponent(query),url=this.remote.replace?this.remote.replace(this.remote.url,query):this.remote.url.replace(this.remote.wildcard,uriEncodedQuery),this.transport.get(url,this.remote.ajax,handleRemoteResponse)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(data,thumbprint,ttl){this.storage&&(this.storage.set(keys.data,data,ttl),this.storage.set(keys.protocol,location.protocol,ttl),this.storage.set(keys.thumbprint,thumbprint,ttl))},_readFromStorage:function(thumbprint){var isExpired,stored={};return this.storage&&(stored.data=this.storage.get(keys.data),stored.protocol=this.storage.get(keys.protocol),stored.thumbprint=this.storage.get(keys.thumbprint)),isExpired=stored.thumbprint!==thumbprint||stored.protocol!==location.protocol,stored.data&&!isExpired?stored.data:null},_initialize:function(){function addLocalToIndex(){that.add(_.isFunction(local)?local():local)}var deferred,that=this,local=this.local;return deferred=this.prefetch?this._loadPrefetch(this.prefetch):$.Deferred().resolve(),local&&deferred.done(addLocalToIndex),this.transport=this.remote?new Transport(this.remote):null,this.initPromise=deferred.promise()},initialize:function(force){return!this.initPromise||force?this._initialize():this.initPromise},add:function(data){this.index.add(data)},get:function(query,cb){function returnRemoteMatches(remoteMatches){var matchesWithBackfill=matches.slice(0);_.each(remoteMatches,function(remoteMatch){var isDuplicate;return isDuplicate=_.some(matchesWithBackfill,function(match){return that.dupDetector(remoteMatch,match)}),!isDuplicate&&matchesWithBackfill.push(remoteMatch),matchesWithBackfill.length<that.limit}),cb&&cb(that.sorter(matchesWithBackfill))}var that=this,matches=[],cacheHit=!1;matches=this.index.get(query),matches=this.sorter(matches).slice(0,this.limit),matches.length<this.limit?cacheHit=this._getFromRemote(query,returnRemoteMatches):this._cancelLastRemoteRequest(),cacheHit||(matches.length>0||!this.transport)&&cb&&cb(matches)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear();
},clearRemoteCache:function(){this.transport&&Transport.resetCache()},ttAdapter:function(){return _.bind(this.get,this)}}),Bloodhound}(this);var html=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),css=function(){"use strict";var css={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return _.isMsie()&&_.mixin(css.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),_.isMsie()&&_.isMsie()<=7&&_.mixin(css.input,{marginTop:"-1px"}),css}(),EventBus=function(){"use strict";function EventBus(o){o&&o.el||$.error("EventBus initialized without el"),this.$el=$(o.el)}var namespace="typeahead:";return _.mixin(EventBus.prototype,{trigger:function(type){var args=[].slice.call(arguments,1);this.$el.trigger(namespace+type,args)}}),EventBus}(),EventEmitter=function(){"use strict";function on(method,types,cb,context){var type;if(!cb)return this;for(types=types.split(splitter),cb=context?bindContext(cb,context):cb,this._callbacks=this._callbacks||{};type=types.shift();)this._callbacks[type]=this._callbacks[type]||{sync:[],async:[]},this._callbacks[type][method].push(cb);return this}function onAsync(types,cb,context){return on.call(this,"async",types,cb,context)}function onSync(types,cb,context){return on.call(this,"sync",types,cb,context)}function off(types){var type;if(!this._callbacks)return this;for(types=types.split(splitter);type=types.shift();)delete this._callbacks[type];return this}function trigger(types){var type,callbacks,args,syncFlush,asyncFlush;if(!this._callbacks)return this;for(types=types.split(splitter),args=[].slice.call(arguments,1);(type=types.shift())&&(callbacks=this._callbacks[type]);)syncFlush=getFlush(callbacks.sync,this,[type].concat(args)),asyncFlush=getFlush(callbacks.async,this,[type].concat(args)),syncFlush()&&nextTick(asyncFlush);return this}function getFlush(callbacks,context,args){function flush(){for(var cancelled,i=0,len=callbacks.length;!cancelled&&len>i;i+=1)cancelled=callbacks[i].apply(context,args)===!1;return!cancelled}return flush}function getNextTick(){var nextTickFn;return nextTickFn=window.setImmediate?function(fn){setImmediate(function(){fn()})}:function(fn){setTimeout(function(){fn()},0)}}function bindContext(fn,context){return fn.bind?fn.bind(context):function(){fn.apply(context,[].slice.call(arguments,0))}}var splitter=/\s+/,nextTick=getNextTick();return{onSync:onSync,onAsync:onAsync,off:off,trigger:trigger}}(),highlight=function(doc){"use strict";function getRegex(patterns,caseSensitive,wordsOnly){for(var regexStr,escapedPatterns=[],i=0,len=patterns.length;len>i;i++)escapedPatterns.push(_.escapeRegExChars(patterns[i]));return regexStr=wordsOnly?"\\b("+escapedPatterns.join("|")+")\\b":"("+escapedPatterns.join("|")+")",caseSensitive?new RegExp(regexStr):new RegExp(regexStr,"i")}var defaults={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function hightlightTextNode(textNode){var match,patternNode,wrapperNode;return(match=regex.exec(textNode.data))&&(wrapperNode=doc.createElement(o.tagName),o.className&&(wrapperNode.className=o.className),patternNode=textNode.splitText(match.index),patternNode.splitText(match[0].length),wrapperNode.appendChild(patternNode.cloneNode(!0)),textNode.parentNode.replaceChild(wrapperNode,patternNode)),!!match}function traverse(el,hightlightTextNode){for(var childNode,TEXT_NODE_TYPE=3,i=0;i<el.childNodes.length;i++)childNode=el.childNodes[i],childNode.nodeType===TEXT_NODE_TYPE?i+=hightlightTextNode(childNode)?1:0:traverse(childNode,hightlightTextNode)}var regex;o=_.mixin({},defaults,o),o.node&&o.pattern&&(o.pattern=_.isArray(o.pattern)?o.pattern:[o.pattern],regex=getRegex(o.pattern,o.caseSensitive,o.wordsOnly),traverse(o.node,hightlightTextNode))}}(window.document),Input=function(){"use strict";function Input(o){var onBlur,onFocus,onKeydown,onInput,that=this;o=o||{},o.input||$.error("input is missing"),onBlur=_.bind(this._onBlur,this),onFocus=_.bind(this._onFocus,this),onKeydown=_.bind(this._onKeydown,this),onInput=_.bind(this._onInput,this),this.$hint=$(o.hint),this.$input=$(o.input).on("blur.tt",onBlur).on("focus.tt",onFocus).on("keydown.tt",onKeydown),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=_.noop),_.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function($e){specialKeyCodeMap[$e.which||$e.keyCode]||_.defer(_.bind(that._onInput,that,$e))}):this.$input.on("input.tt",onInput),this.query=this.$input.val(),this.$overflowHelper=buildOverflowHelper(this.$input)}function buildOverflowHelper($input){return $('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:$input.css("font-family"),fontSize:$input.css("font-size"),fontStyle:$input.css("font-style"),fontVariant:$input.css("font-variant"),fontWeight:$input.css("font-weight"),wordSpacing:$input.css("word-spacing"),letterSpacing:$input.css("letter-spacing"),textIndent:$input.css("text-indent"),textRendering:$input.css("text-rendering"),textTransform:$input.css("text-transform")}).insertAfter($input)}function areQueriesEquivalent(a,b){return Input.normalizeQuery(a)===Input.normalizeQuery(b)}function withModifier($e){return $e.altKey||$e.ctrlKey||$e.metaKey||$e.shiftKey}var specialKeyCodeMap;return specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},Input.normalizeQuery=function(str){return(str||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},_.mixin(Input.prototype,EventEmitter,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function($e){var keyName=specialKeyCodeMap[$e.which||$e.keyCode];this._managePreventDefault(keyName,$e),keyName&&this._shouldTrigger(keyName,$e)&&this.trigger(keyName+"Keyed",$e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(keyName,$e){var preventDefault,hintValue,inputValue;switch(keyName){case"tab":hintValue=this.getHint(),inputValue=this.getInputValue(),preventDefault=hintValue&&hintValue!==inputValue&&!withModifier($e);break;case"up":case"down":preventDefault=!withModifier($e);break;default:preventDefault=!1}preventDefault&&$e.preventDefault()},_shouldTrigger:function(keyName,$e){var trigger;switch(keyName){case"tab":trigger=!withModifier($e);break;default:trigger=!0}return trigger},_checkInputValue:function(){var inputValue,areEquivalent,hasDifferentWhitespace;inputValue=this.getInputValue(),areEquivalent=areQueriesEquivalent(inputValue,this.query),hasDifferentWhitespace=areEquivalent?this.query.length!==inputValue.length:!1,this.query=inputValue,areEquivalent?hasDifferentWhitespace&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(query){this.query=query},getInputValue:function(){return this.$input.val()},setInputValue:function(value,silent){this.$input.val(value),silent?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(value){this.$hint.val(value)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var val,hint,valIsPrefixOfHint,isValid;val=this.getInputValue(),hint=this.getHint(),valIsPrefixOfHint=val!==hint&&0===hint.indexOf(val),isValid=""!==val&&valIsPrefixOfHint&&!this.hasOverflow(),!isValid&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var constraint=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=constraint},isCursorAtEnd:function(){var valueLength,selectionStart,range;return valueLength=this.$input.val().length,selectionStart=this.$input[0].selectionStart,_.isNumber(selectionStart)?selectionStart===valueLength:document.selection?(range=document.selection.createRange(),range.moveStart("character",-valueLength),valueLength===range.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),Input}(),Dataset=function(){"use strict";function Dataset(o){o=o||{},o.templates=o.templates||{},o.source||$.error("missing source"),o.name&&!isValidName(o.name)&&$.error("invalid dataset name: "+o.name),this.query=null,this.highlight=!!o.highlight,this.name=o.name||_.getUniqueId(),this.source=o.source,this.displayFn=getDisplayFn(o.display||o.displayKey),this.templates=getTemplates(o.templates,this.displayFn),this.$el=$(html.dataset.replace("%CLASS%",this.name))}function getDisplayFn(display){function displayFn(obj){return obj[display]}return display=display||"value",_.isFunction(display)?display:displayFn}function getTemplates(templates,displayFn){function suggestionTemplate(context){return"<p>"+displayFn(context)+"</p>"}return{empty:templates.empty&&_.templatify(templates.empty),header:templates.header&&_.templatify(templates.header),footer:templates.footer&&_.templatify(templates.footer),suggestion:templates.suggestion||suggestionTemplate}}function isValidName(str){return/^[_a-zA-Z0-9-]+$/.test(str)}var datasetKey="ttDataset",valueKey="ttValue",datumKey="ttDatum";return Dataset.extractDatasetName=function(el){return $(el).data(datasetKey)},Dataset.extractValue=function(el){return $(el).data(valueKey)},Dataset.extractDatum=function(el){return $(el).data(datumKey)},_.mixin(Dataset.prototype,EventEmitter,{_render:function(query,suggestions){function getEmptyHtml(){return that.templates.empty({query:query,isEmpty:!0})}function getSuggestionsHtml(){function getSuggestionNode(suggestion){var $el;return $el=$(html.suggestion).append(that.templates.suggestion(suggestion)).data(datasetKey,that.name).data(valueKey,that.displayFn(suggestion)).data(datumKey,suggestion),$el.children().each(function(){$(this).css(css.suggestionChild)}),$el}var $suggestions,nodes;return $suggestions=$(html.suggestions).css(css.suggestions),nodes=_.map(suggestions,getSuggestionNode),$suggestions.append.apply($suggestions,nodes),that.highlight&&highlight({className:"tt-highlight",node:$suggestions[0],pattern:query}),$suggestions}function getHeaderHtml(){return that.templates.header({query:query,isEmpty:!hasSuggestions})}function getFooterHtml(){return that.templates.footer({query:query,isEmpty:!hasSuggestions})}if(this.$el){var hasSuggestions,that=this;this.$el.empty(),hasSuggestions=suggestions&&suggestions.length,!hasSuggestions&&this.templates.empty?this.$el.html(getEmptyHtml()).prepend(that.templates.header?getHeaderHtml():null).append(that.templates.footer?getFooterHtml():null):hasSuggestions&&this.$el.html(getSuggestionsHtml()).prepend(that.templates.header?getHeaderHtml():null).append(that.templates.footer?getFooterHtml():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(query){function render(suggestions){that.canceled||query!==that.query||that._render(query,suggestions)}var that=this;this.query=query,this.canceled=!1,this.source(query,render)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),Dataset}(),Dropdown=function(){"use strict";function Dropdown(o){var onSuggestionClick,onSuggestionMouseEnter,onSuggestionMouseLeave,that=this;o=o||{},o.menu||$.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=_.map(o.datasets,initializeDataset),onSuggestionClick=_.bind(this._onSuggestionClick,this),onSuggestionMouseEnter=_.bind(this._onSuggestionMouseEnter,this),onSuggestionMouseLeave=_.bind(this._onSuggestionMouseLeave,this),this.$menu=$(o.menu).on("click.tt",".tt-suggestion",onSuggestionClick).on("mouseenter.tt",".tt-suggestion",onSuggestionMouseEnter).on("mouseleave.tt",".tt-suggestion",onSuggestionMouseLeave),_.each(this.datasets,function(dataset){that.$menu.append(dataset.getRoot()),dataset.onSync("rendered",that._onRendered,that)})}function initializeDataset(oDataset){return new Dataset(oDataset)}return _.mixin(Dropdown.prototype,EventEmitter,{_onSuggestionClick:function($e){this.trigger("suggestionClicked",$($e.currentTarget))},_onSuggestionMouseEnter:function($e){this._removeCursor(),this._setCursor($($e.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function isDatasetEmpty(dataset){return dataset.isEmpty()}this.isEmpty=_.every(this.datasets,isDatasetEmpty),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function($el,silent){$el.first().addClass("tt-cursor"),!silent&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(increment){var $suggestions,$oldCursor,newCursorIndex,$newCursor;if(this.isOpen){if($oldCursor=this._getCursor(),$suggestions=this._getSuggestions(),this._removeCursor(),newCursorIndex=$suggestions.index($oldCursor)+increment,newCursorIndex=(newCursorIndex+1)%($suggestions.length+1)-1,-1===newCursorIndex)return void this.trigger("cursorRemoved");-1>newCursorIndex&&(newCursorIndex=$suggestions.length-1),this._setCursor($newCursor=$suggestions.eq(newCursorIndex)),this._ensureVisible($newCursor)}},_ensureVisible:function($el){var elTop,elBottom,menuScrollTop,menuHeight;elTop=$el.position().top,elBottom=elTop+$el.outerHeight(!0),menuScrollTop=this.$menu.scrollTop(),menuHeight=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>elTop?this.$menu.scrollTop(menuScrollTop+elTop):elBottom>menuHeight&&this.$menu.scrollTop(menuScrollTop+(elBottom-menuHeight))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(dir){this.$menu.css("ltr"===dir?css.ltr:css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function($el){var datum=null;return $el.length&&(datum={raw:Dataset.extractDatum($el),value:Dataset.extractValue($el),datasetName:Dataset.extractDatasetName($el)}),datum},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(query){function updateDataset(dataset){dataset.update(query)}_.each(this.datasets,updateDataset)},empty:function(){function clearDataset(dataset){dataset.clear()}_.each(this.datasets,clearDataset),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function destroyDataset(dataset){dataset.destroy()}this.$menu.off(".tt"),this.$menu=null,_.each(this.datasets,destroyDataset)}}),Dropdown}(),Typeahead=function(){"use strict";function Typeahead(o){var $menu,$input,$hint;o=o||{},o.input||$.error("missing input"),this.isActivated=!1,this.autoselect=!!o.autoselect,this.minLength=_.isNumber(o.minLength)?o.minLength:1,this.$node=buildDom(o.input,o.withHint),$menu=this.$node.find(".tt-dropdown-menu"),$input=this.$node.find(".tt-input"),$hint=this.$node.find(".tt-hint"),$input.on("blur.tt",function($e){var active,isActive,hasActive;active=document.activeElement,isActive=$menu.is(active),hasActive=$menu.has(active).length>0,_.isMsie()&&(isActive||hasActive)&&($e.preventDefault(),$e.stopImmediatePropagation(),_.defer(function(){$input.focus()}))}),$menu.on("mousedown.tt",function($e){$e.preventDefault()}),this.eventBus=o.eventBus||new EventBus({el:$input}),this.dropdown=new Dropdown({menu:$menu,datasets:o.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new Input({input:$input,hint:$hint}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function buildDom(input,withHint){var $input,$wrapper,$dropdown,$hint;$input=$(input),$wrapper=$(html.wrapper).css(css.wrapper),$dropdown=$(html.dropdown).css(css.dropdown),$hint=$input.clone().css(css.hint).css(getBackgroundStyles($input)),$hint.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),$input.data(attrsKey,{dir:$input.attr("dir"),autocomplete:$input.attr("autocomplete"),spellcheck:$input.attr("spellcheck"),style:$input.attr("style")}),$input.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(withHint?css.input:css.inputWithNoHint);try{!$input.attr("dir")&&$input.attr("dir","auto")}catch(e){}return $input.wrap($wrapper).parent().prepend(withHint?$hint:null).append($dropdown)}function getBackgroundStyles($el){return{backgroundAttachment:$el.css("background-attachment"),backgroundClip:$el.css("background-clip"),backgroundColor:$el.css("background-color"),backgroundImage:$el.css("background-image"),backgroundOrigin:$el.css("background-origin"),backgroundPosition:$el.css("background-position"),backgroundRepeat:$el.css("background-repeat"),backgroundSize:$el.css("background-size")}}function destroyDomStructure($node){var $input=$node.find(".tt-input");_.each($input.data(attrsKey),function(val,key){_.isUndefined(val)?$input.removeAttr(key):$input.attr(key,val)}),$input.detach().removeData(attrsKey).removeClass("tt-input").insertAfter($node),$node.remove()}var attrsKey="ttAttrs";return _.mixin(Typeahead.prototype,{_onSuggestionClicked:function(type,$el){var datum;(datum=this.dropdown.getDatumForSuggestion($el))&&this._select(datum)},_onCursorMoved:function(){var datum=this.dropdown.getDatumForCursor();this.input.setInputValue(datum.value,!0),this.eventBus.trigger("cursorchanged",datum.raw,datum.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(type,$e){var cursorDatum,topSuggestionDatum;cursorDatum=this.dropdown.getDatumForCursor(),topSuggestionDatum=this.dropdown.getDatumForTopSuggestion(),cursorDatum?(this._select(cursorDatum),$e.preventDefault()):this.autoselect&&topSuggestionDatum&&(this._select(topSuggestionDatum),$e.preventDefault())},_onTabKeyed:function(type,$e){var datum;(datum=this.dropdown.getDatumForCursor())?(this._select(datum),$e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var query=this.input.getQuery();this.dropdown.isEmpty&&query.length>=this.minLength?this.dropdown.update(query):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var query=this.input.getQuery();this.dropdown.isEmpty&&query.length>=this.minLength?this.dropdown.update(query):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,query){this.input.clearHintIfInvalid(),query.length>=this.minLength?this.dropdown.update(query):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var dir;this.dir!==(dir=this.input.getLanguageDirection())&&(this.dir=dir,this.$node.css("direction",dir),this.dropdown.setLanguageDirection(dir))},_updateHint:function(){var datum,val,query,escapedQuery,frontMatchRegEx,match;datum=this.dropdown.getDatumForTopSuggestion(),datum&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(val=this.input.getInputValue(),query=Input.normalizeQuery(val),escapedQuery=_.escapeRegExChars(query),frontMatchRegEx=new RegExp("^(?:"+escapedQuery+")(.+$)","i"),match=frontMatchRegEx.exec(datum.value),match?this.input.setHint(val+match[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(laxCursor){var hint,query,isCursorAtEnd,datum;hint=this.input.getHint(),query=this.input.getQuery(),isCursorAtEnd=laxCursor||this.input.isCursorAtEnd(),hint&&query!==hint&&isCursorAtEnd&&(datum=this.dropdown.getDatumForTopSuggestion(),datum&&this.input.setInputValue(datum.value),this.eventBus.trigger("autocompleted",datum.raw,datum.datasetName))},_select:function(datum){this.input.setQuery(datum.value),this.input.setInputValue(datum.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",datum.raw,datum.datasetName),this.dropdown.close(),_.defer(_.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(val){val=_.toStr(val),this.isActivated?this.input.setInputValue(val):(this.input.setQuery(val),this.input.setInputValue(val,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),destroyDomStructure(this.$node),this.$node=null}}),Typeahead}();!function(){"use strict";var old,typeaheadKey,methods;old=$.fn.typeahead,typeaheadKey="ttTypeahead",methods={initialize:function(o,datasets){function attach(){var eventBus,typeahead,$input=$(this);_.each(datasets,function(d){d.highlight=!!o.highlight}),typeahead=new Typeahead({input:$input,eventBus:eventBus=new EventBus({el:$input}),withHint:_.isUndefined(o.hint)?!0:!!o.hint,minLength:o.minLength,autoselect:o.autoselect,datasets:datasets}),$input.data(typeaheadKey,typeahead)}return datasets=_.isArray(datasets)?datasets:[].slice.call(arguments,1),o=o||{},this.each(attach)},open:function(){function openTypeahead(){var typeahead,$input=$(this);(typeahead=$input.data(typeaheadKey))&&typeahead.open()}return this.each(openTypeahead)},close:function(){function closeTypeahead(){var typeahead,$input=$(this);(typeahead=$input.data(typeaheadKey))&&typeahead.close()}return this.each(closeTypeahead)},val:function(newVal){function setVal(){var typeahead,$input=$(this);(typeahead=$input.data(typeaheadKey))&&typeahead.setVal(newVal)}function getVal($input){var typeahead,query;return(typeahead=$input.data(typeaheadKey))&&(query=typeahead.getVal()),query}return arguments.length?this.each(setVal):getVal(this.first())},destroy:function(){function unattach(){var typeahead,$input=$(this);(typeahead=$input.data(typeaheadKey))&&(typeahead.destroy(),$input.removeData(typeaheadKey))}return this.each(unattach)}},$.fn.typeahead=function(method){var tts;return methods[method]&&"initialize"!==method?(tts=this.filter(function(){return!!$(this).data(typeaheadKey)}),methods[method].apply(tts,[].slice.call(arguments,1))):methods.initialize.apply(this,arguments)},$.fn.typeahead.noConflict=function(){return $.fn.typeahead=old,this}}()}(window.jQuery),function(root,factory){if("object"==typeof exports&&exports)factory(exports);else{var mustache={};factory(mustache),"function"==typeof define&&define.amd?define(mustache):root.Mustache=mustache}}(this,function(mustache){function testRegExp(re,string){return RegExp_test.call(re,string)}function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}function isFunction(object){return"function"==typeof object}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function escapeHtml(string){return String(string).replace(/[&<>"'\/]/g,function(s){return entityMap[s]})}function escapeTags(tags){if(!isArray(tags)||2!==tags.length)throw new Error("Invalid tags: "+tags);return[new RegExp(escapeRegExp(tags[0])+"\\s*"),new RegExp("\\s*"+escapeRegExp(tags[1]))]}function parseTemplate(template,tags){function stripSpace(){if(hasTag&&!nonSpace)for(;spaces.length;)delete tokens[spaces.pop()];else spaces=[];hasTag=!1,nonSpace=!1}tags=tags||mustache.tags,template=template||"","string"==typeof tags&&(tags=tags.split(spaceRe));for(var start,type,value,chr,token,openSection,tagRes=escapeTags(tags),scanner=new Scanner(template),sections=[],tokens=[],spaces=[],hasTag=!1,nonSpace=!1;!scanner.eos();){if(start=scanner.pos,value=scanner.scanUntil(tagRes[0]))for(var i=0,len=value.length;len>i;++i)chr=value.charAt(i),isWhitespace(chr)?spaces.push(tokens.length):nonSpace=!0,tokens.push(["text",chr,start,start+1]),start+=1,"\n"===chr&&stripSpace();if(!scanner.scan(tagRes[0]))break;if(hasTag=!0,type=scanner.scan(tagRe)||"name",scanner.scan(whiteRe),"="===type?(value=scanner.scanUntil(equalsRe),scanner.scan(equalsRe),scanner.scanUntil(tagRes[1])):"{"===type?(value=scanner.scanUntil(new RegExp("\\s*"+escapeRegExp("}"+tags[1]))),scanner.scan(curlyRe),scanner.scanUntil(tagRes[1]),type="&"):value=scanner.scanUntil(tagRes[1]),!scanner.scan(tagRes[1]))throw new Error("Unclosed tag at "+scanner.pos);if(token=[type,value,start,scanner.pos],tokens.push(token),"#"===type||"^"===type)sections.push(token);else if("/"===type){if(openSection=sections.pop(),!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else"name"===type||"{"===type||"&"===type?nonSpace=!0:"="===type&&(tagRes=escapeTags(tags=value.split(spaceRe)))}if(openSection=sections.pop())throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){for(var token,lastToken,squashedTokens=[],i=0,len=tokens.length;len>i;++i)token=tokens[i],token&&("text"===token[0]&&lastToken&&"text"===lastToken[0]?(lastToken[1]+=token[1],lastToken[3]=token[3]):(squashedTokens.push(token),lastToken=token));return squashedTokens}function nestTokens(tokens){for(var token,section,nestedTokens=[],collector=nestedTokens,sections=[],i=0,len=tokens.length;len>i;++i)switch(token=tokens[i],token[0]){case"#":case"^":collector.push(token),sections.push(token),collector=token[4]=[];break;case"/":section=sections.pop(),section[5]=token[2],collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}return nestedTokens}function Scanner(string){this.string=string,this.tail=string,this.pos=0}function Context(view,parentContext){this.view=null==view?{}:view,this.cache={".":this.view},this.parent=parentContext}function Writer(){this.cache={}}var RegExp_test=RegExp.prototype.test,nonSpaceRe=/\S/,Object_toString=Object.prototype.toString,isArray=Array.isArray||function(object){return"[object Array]"===Object_toString.call(object)},entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},whiteRe=/\s*/,spaceRe=/\s+/,equalsRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/;Scanner.prototype.eos=function(){return""===this.tail},Scanner.prototype.scan=function(re){var match=this.tail.match(re);if(match&&0===match.index){var string=match[0];return this.tail=this.tail.substring(string.length),this.pos+=string.length,string}return""},Scanner.prototype.scanUntil=function(re){var match,index=this.tail.search(re);switch(index){case-1:match=this.tail,this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index),this.tail=this.tail.substring(index)}return this.pos+=match.length,match},Context.prototype.push=function(view){return new Context(view,this)},Context.prototype.lookup=function(name){var value;if(name in this.cache)value=this.cache[name];else{for(var context=this;context;){if(name.indexOf(".")>0){value=context.view;for(var names=name.split("."),i=0;null!=value&&i<names.length;)value=value[names[i++]]}else value=context.view[name];if(null!=value)break;context=context.parent}this.cache[name]=value}return isFunction(value)&&(value=value.call(this.view)),value},Writer.prototype.clearCache=function(){this.cache={}},Writer.prototype.parse=function(template,tags){var cache=this.cache,tokens=cache[template];return null==tokens&&(tokens=cache[template]=parseTemplate(template,tags)),tokens},Writer.prototype.render=function(template,view,partials){var tokens=this.parse(template),context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)},Writer.prototype.renderTokens=function(tokens,context,partials,originalTemplate){function subRender(template){return self.render(template,context,partials)}for(var token,value,buffer="",self=this,i=0,len=tokens.length;len>i;++i)switch(token=tokens[i],token[0]){case"#":if(value=context.lookup(token[1]),!value)continue;if(isArray(value))for(var j=0,jlen=value.length;jlen>j;++j)buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate);else if("object"==typeof value||"string"==typeof value)buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate);else if(isFunction(value)){if("string"!=typeof originalTemplate)throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender),null!=value&&(buffer+=value)}else buffer+=this.renderTokens(token[4],context,partials,originalTemplate);break;case"^":value=context.lookup(token[1]),(!value||isArray(value)&&0===value.length)&&(buffer+=this.renderTokens(token[4],context,partials,originalTemplate));break;case">":if(!partials)continue;value=isFunction(partials)?partials(token[1]):partials[token[1]],null!=value&&(buffer+=this.renderTokens(this.parse(value),context,partials,value));break;case"&":value=context.lookup(token[1]),null!=value&&(buffer+=value);break;case"name":value=context.lookup(token[1]),null!=value&&(buffer+=mustache.escape(value));break;case"text":buffer+=token[1]}return buffer},mustache.name="mustache.js",mustache.version="0.8.1",mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function(){return defaultWriter.clearCache()},mustache.parse=function(template,tags){return defaultWriter.parse(template,tags)},mustache.render=function(template,view,partials){return defaultWriter.render(template,view,partials)},mustache.to_html=function(template,view,partials,send){var result=mustache.render(template,view,partials);return isFunction(send)?void send(result):result;
},mustache.escape=escapeHtml,mustache.Scanner=Scanner,mustache.Context=Context,mustache.Writer=Writer}),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b)["offsetParent"in a.fn?"offsetParent":"parent"]();return c.length||(c=a("body")),parseInt(c.css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(h,l,m,d){var e="mCustomScrollbar",a="mCS",k=".mCustomScrollbar",f={setWidth:!1,setHeight:!1,setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,autoHideScrollbar:!1,autoExpandScrollbar:!1,alwaysShowScrollbar:0,snapAmount:null,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1},scrollButtons:{enable:!1,scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoExpandHorizontalScroll:!1,autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:!0,updateOnSelectorChange:!1},theme:"light",callbacks:{onScrollStart:!1,onScroll:!1,onTotalScroll:!1,onTotalScrollBack:!1,whileScrolling:!1,onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0},live:!1},j=0,o={},c=function(p){o[p]&&(clearTimeout(o[p]),g._delete.call(null,o[p]))},i=l.attachEvent&&!l.addEventListener?1:0,n=!1,b={init:function(q){var q=h.extend(!0,{},f,q),p=g._selector.call(this),s=this.selector||k;if(q.live){var r=h(s);if("off"===q.live)return void c(s);o[s]=setTimeout(function(){r.mCustomScrollbar(q),"once"===q.live&&r.length&&c(s)},500)}else c(s);return q.setWidth=q.set_width?q.set_width:q.setWidth,q.setHeight=q.set_height?q.set_height:q.setHeight,q.axis=q.horizontalScroll?"x":g._findAxis.call(null,q.axis),q.scrollInertia=q.scrollInertia<17?17:q.scrollInertia,"object"!=typeof q.mouseWheel&&1==q.mouseWheel&&(q.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),q.mouseWheel.scrollAmount=q.mouseWheelPixels?q.mouseWheelPixels:q.mouseWheel.scrollAmount,q.mouseWheel.normalizeDelta=q.advanced.normalizeMouseWheelDelta?q.advanced.normalizeMouseWheelDelta:q.mouseWheel.normalizeDelta,q.scrollButtons.scrollType=g._findScrollButtonsType.call(null,q.scrollButtons.scrollType),g._theme.call(null,q),h(p).each(function(){var u=h(this);if(!u.data(a)){u.data(a,{idx:++j,opt:q,scrollRatio:{y:null,x:null},overflowed:null,bindEvents:!1,tweenRunning:!1,sequential:{},langDir:u.css("direction"),cbOffsets:null,trigger:null});var w=u.data(a).opt,v=u.data("mcs-axis"),t=u.data("mcs-scrollbar-position"),x=u.data("mcs-theme");v&&(w.axis=v),t&&(w.scrollbarPosition=t),x&&(w.theme=x,g._theme.call(null,w)),g._pluginMarkup.call(this),b.update.call(null,u)}})},update:function(q){var p=q||g._selector.call(this);return h(p).each(function(){var t=h(this);if(t.data(a)){var v=t.data(a),u=v.opt,r=h("#mCSB_"+v.idx+"_container"),s=[h("#mCSB_"+v.idx+"_dragger_vertical"),h("#mCSB_"+v.idx+"_dragger_horizontal")];v.tweenRunning&&g._stop.call(null,t),t.hasClass("mCS_disabled")&&t.removeClass("mCS_disabled"),t.hasClass("mCS_destroyed")&&t.removeClass("mCS_destroyed"),g._maxHeight.call(this),g._expandContentHorizontally.call(this),"y"===u.axis||u.advanced.autoExpandHorizontalScroll||r.css("width",g._contentWidth(r.children())),v.overflowed=g._overflowed.call(this),g._scrollbarVisibility.call(this),u.autoDraggerLength&&g._setDraggerLength.call(this),g._scrollRatio.call(this),g._bindEvents.call(this);var w=[Math.abs(r[0].offsetTop),Math.abs(r[0].offsetLeft)];"x"!==u.axis&&(v.overflowed[0]?s[0].height()>s[0].parent().height()?g._resetContentPosition.call(this):g._scrollTo.call(this,t,w[0].toString(),{dir:"y",dur:0,overwrite:"none"}):(g._resetContentPosition.call(this),"y"===u.axis?g._unbindEvents.call(this):"yx"===u.axis&&v.overflowed[1]&&g._scrollTo.call(this,t,w[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==u.axis&&(v.overflowed[1]?s[1].width()>s[1].parent().width()?g._resetContentPosition.call(this):g._scrollTo.call(this,t,w[1].toString(),{dir:"x",dur:0,overwrite:"none"}):(g._resetContentPosition.call(this),"x"===u.axis?g._unbindEvents.call(this):"yx"===u.axis&&v.overflowed[0]&&g._scrollTo.call(this,t,w[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),g._autoUpdate.call(this)}})},scrollTo:function(r,q){if("undefined"!=typeof r&&null!=r){var p=g._selector.call(this);return h(p).each(function(){var u=h(this);if(u.data(a)){var x=u.data(a),w=x.opt,v={trigger:"external",scrollInertia:w.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},s=h.extend(!0,{},v,q),y=g._arr.call(this,r),t=s.scrollInertia<17?17:s.scrollInertia;y[0]=g._to.call(this,y[0],"y"),y[1]=g._to.call(this,y[1],"x"),s.moveDragger&&(y[0]*=x.scrollRatio.y,y[1]*=x.scrollRatio.x),s.dur=t,setTimeout(function(){null!==y[0]&&"undefined"!=typeof y[0]&&"x"!==w.axis&&x.overflowed[0]&&(s.dir="y",s.overwrite="all",g._scrollTo.call(this,u,y[0].toString(),s)),null!==y[1]&&"undefined"!=typeof y[1]&&"y"!==w.axis&&x.overflowed[1]&&(s.dir="x",s.overwrite="none",g._scrollTo.call(this,u,y[1].toString(),s))},60)}})}},stop:function(){var p=g._selector.call(this);return h(p).each(function(){var q=h(this);q.data(a)&&g._stop.call(null,q)})},disable:function(q){var p=g._selector.call(this);return h(p).each(function(){var r=h(this);if(r.data(a)){var t=r.data(a);t.opt;g._autoUpdate.call(this,"remove"),g._unbindEvents.call(this),q&&g._resetContentPosition.call(this),g._scrollbarVisibility.call(this,!0),r.addClass("mCS_disabled")}})},destroy:function(){var p=g._selector.call(this);return h(p).each(function(){var s=h(this);if(s.data(a)){var u=s.data(a),t=u.opt,q=h("#mCSB_"+u.idx),r=h("#mCSB_"+u.idx+"_container"),v=h(".mCSB_"+u.idx+"_scrollbar");t.live&&c(p),g._autoUpdate.call(this,"remove"),g._unbindEvents.call(this),g._resetContentPosition.call(this),s.removeData(a),g._delete.call(null,this.mcs),v.remove(),q.replaceWith(r.contents()),s.removeClass(e+" _"+a+"_"+u.idx+" mCS-autoHide mCS-dir-rtl mCS_no_scrollbar mCS_disabled").addClass("mCS_destroyed")}})}},g={_selector:function(){return"object"!=typeof h(this.selector)||h(this.selector).length<1?k:this.selector},_theme:function(s){var r=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],q=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],p=["minimal","minimal-dark"],u=["minimal","minimal-dark"],t=["minimal","minimal-dark"];s.autoDraggerLength=h.inArray(s.theme,r)>-1?!1:s.autoDraggerLength,s.autoExpandScrollbar=h.inArray(s.theme,q)>-1?!1:s.autoExpandScrollbar,s.scrollButtons.enable=h.inArray(s.theme,p)>-1?!1:s.scrollButtons.enable,s.autoHideScrollbar=h.inArray(s.theme,u)>-1?!0:s.autoHideScrollbar,s.scrollbarPosition=h.inArray(s.theme,t)>-1?"outside":s.scrollbarPosition},_findAxis:function(p){return"yx"===p||"xy"===p||"auto"===p?"yx":"x"===p||"horizontal"===p?"x":"y"},_findScrollButtonsType:function(p){return"stepped"===p||"pixels"===p||"step"===p||"click"===p?"stepped":"stepless"},_pluginMarkup:function(){var y=h(this),x=y.data(a),r=x.opt,t=r.autoExpandScrollbar?" mCSB_scrollTools_onDrag_expand":"",B=["<div id='mCSB_"+x.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+x.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_vertical"+t+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+x.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+x.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+x.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_horizontal"+t+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+x.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],u="yx"===r.axis?"mCSB_vertical_horizontal":"x"===r.axis?"mCSB_horizontal":"mCSB_vertical",w="yx"===r.axis?B[0]+B[1]:"x"===r.axis?B[1]:B[0],v="yx"===r.axis?"<div id='mCSB_"+x.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",s=r.autoHideScrollbar?" mCS-autoHide":"",p="x"!==r.axis&&"rtl"===x.langDir?" mCS-dir-rtl":"";r.setWidth&&y.css("width",r.setWidth),r.setHeight&&y.css("height",r.setHeight),r.setLeft="y"!==r.axis&&"rtl"===x.langDir?"989999px":r.setLeft,y.addClass(e+" _"+a+"_"+x.idx+s+p).wrapInner("<div id='mCSB_"+x.idx+"' class='mCustomScrollBox mCS-"+r.theme+" "+u+"'><div id='mCSB_"+x.idx+"_container' class='mCSB_container' style='position:relative; top:"+r.setTop+"; left:"+r.setLeft+";' dir="+x.langDir+" /></div>");var q=h("#mCSB_"+x.idx),z=h("#mCSB_"+x.idx+"_container");"y"===r.axis||r.advanced.autoExpandHorizontalScroll||z.css("width",g._contentWidth(z.children())),"outside"===r.scrollbarPosition?("static"===y.css("position")&&y.css("position","relative"),y.css("overflow","visible"),q.addClass("mCSB_outside").after(w)):(q.addClass("mCSB_inside").append(w),z.wrap(v)),g._scrollButtons.call(this);var A=[h("#mCSB_"+x.idx+"_dragger_vertical"),h("#mCSB_"+x.idx+"_dragger_horizontal")];A[0].css("min-height",A[0].height()),A[1].css("min-width",A[1].width())},_contentWidth:function(p){return Math.max.apply(Math,p.map(function(){return h(this).outerWidth(!0)}).get())},_expandContentHorizontally:function(){var q=h(this),s=q.data(a),r=s.opt,p=h("#mCSB_"+s.idx+"_container");r.advanced.autoExpandHorizontalScroll&&"y"!==r.axis&&p.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(p[0].getBoundingClientRect().right+.4)-Math.floor(p[0].getBoundingClientRect().left),position:"relative"}).unwrap()},_scrollButtons:function(){var s=h(this),u=s.data(a),t=u.opt,q=h(".mCSB_"+u.idx+"_scrollbar:first"),r=["<a href='#' class='mCSB_buttonUp' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonDown' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonLeft' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonRight' oncontextmenu='return false;' />"],p=["x"===t.axis?r[2]:r[0],"x"===t.axis?r[3]:r[1],r[2],r[3]];t.scrollButtons.enable&&q.prepend(p[0]).append(p[1]).next(".mCSB_scrollTools").prepend(p[2]).append(p[3])},_maxHeight:function(){var t=h(this),w=t.data(a),r=(w.opt,h("#mCSB_"+w.idx)),q=t.css("max-height"),s=-1!==q.indexOf("%"),p=t.css("box-sizing");if("none"!==q){var u=s?t.parent().height()*parseInt(q)/100:parseInt(q);"border-box"===p&&(u-=t.innerHeight()-t.height()+(t.outerHeight()-t.innerHeight())),r.css("max-height",Math.round(u))}},_setDraggerLength:function(){var u=h(this),s=u.data(a),p=h("#mCSB_"+s.idx),v=h("#mCSB_"+s.idx+"_container"),y=[h("#mCSB_"+s.idx+"_dragger_vertical"),h("#mCSB_"+s.idx+"_dragger_horizontal")],t=[p.height()/v.outerHeight(!1),p.width()/v.outerWidth(!1)],q=[parseInt(y[0].css("min-height")),Math.round(t[0]*y[0].parent().height()),parseInt(y[1].css("min-width")),Math.round(t[1]*y[1].parent().width())],r=i&&q[1]<q[0]?q[0]:q[1],x=i&&q[3]<q[2]?q[2]:q[3];y[0].css({height:r,"max-height":y[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":q[0]+"px"}),y[1].css({width:x,"max-width":y[1].parent().width()-10})},_scrollRatio:function(){var t=h(this),v=t.data(a),q=h("#mCSB_"+v.idx),r=h("#mCSB_"+v.idx+"_container"),s=[h("#mCSB_"+v.idx+"_dragger_vertical"),h("#mCSB_"+v.idx+"_dragger_horizontal")],u=[r.outerHeight(!1)-q.height(),r.outerWidth(!1)-q.width()],p=[u[0]/(s[0].parent().height()-s[0].height()),u[1]/(s[1].parent().width()-s[1].width())];v.scrollRatio={y:p[0],x:p[1]}},_onDragClasses:function(r,t,q){var s=q?"mCSB_dragger_onDrag_expanded":"",p=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag"],u=r.closest(".mCSB_scrollTools");"active"===t?(r.toggleClass(p[0]+" "+s),u.toggleClass(p[1]),r[0]._draggable=r[0]._draggable?0:1):r[0]._draggable||("hide"===t?(r.removeClass(p[0]),u.removeClass(p[1])):(r.addClass(p[0]),u.addClass(p[1])))},_overflowed:function(){var t=h(this),u=t.data(a),q=h("#mCSB_"+u.idx),s=h("#mCSB_"+u.idx+"_container"),r=null==u.overflowed?s.height():s.outerHeight(!1),p=null==u.overflowed?s.width():s.outerWidth(!1);return[r>q.height(),p>q.width()]},_resetContentPosition:function(){var t=h(this),v=t.data(a),u=v.opt,q=h("#mCSB_"+v.idx),r=h("#mCSB_"+v.idx+"_container"),s=[h("#mCSB_"+v.idx+"_dragger_vertical"),h("#mCSB_"+v.idx+"_dragger_horizontal")];if(g._stop(t),("x"!==u.axis&&!v.overflowed[0]||"y"===u.axis&&v.overflowed[0])&&s[0].add(r).css("top",0),"y"!==u.axis&&!v.overflowed[1]||"x"===u.axis&&v.overflowed[1]){var p=dx=0;"rtl"===v.langDir&&(p=q.width()-r.outerWidth(!1),dx=Math.abs(p/v.scrollRatio.x)),r.css("left",p),s[1].css("left",dx)}},_bindEvents:function(){function q(){p=setTimeout(function(){h.event.special.mousewheel?(clearTimeout(p),g._mousewheel.call(r[0])):q()},1e3)}var r=h(this),t=r.data(a),s=t.opt;if(!t.bindEvents){if(g._draggable.call(this),s.contentTouchScroll&&g._contentDraggable.call(this),s.mouseWheel.enable){var p;q()}g._draggerRail.call(this),g._wrapperScroll.call(this),s.advanced.autoScrollOnFocus&&g._focus.call(this),s.scrollButtons.enable&&g._buttons.call(this),s.keyboard.enable&&g._keyboard.call(this),t.bindEvents=!0}},_unbindEvents:function(){var s=h(this),t=s.data(a),p=a+"_"+t.idx,u=".mCSB_"+t.idx+"_scrollbar",r=h("#mCSB_"+t.idx+",#mCSB_"+t.idx+"_container,#mCSB_"+t.idx+"_container_wrapper,"+u+" .mCSB_draggerContainer,#mCSB_"+t.idx+"_dragger_vertical,#mCSB_"+t.idx+"_dragger_horizontal,"+u+">a"),q=h("#mCSB_"+t.idx+"_container");t.bindEvents&&(h(m).unbind("."+p),r.each(function(){h(this).unbind("."+p)}),clearTimeout(s[0]._focusTimeout),g._delete.call(null,s[0]._focusTimeout),clearTimeout(t.sequential.step),g._delete.call(null,t.sequential.step),clearTimeout(q[0].onCompleteTimeout),g._delete.call(null,q[0].onCompleteTimeout),t.bindEvents=!1)},_scrollbarVisibility:function(q){var t=h(this),v=t.data(a),u=v.opt,p=h("#mCSB_"+v.idx+"_container_wrapper"),r=p.length?p:h("#mCSB_"+v.idx+"_container"),w=[h("#mCSB_"+v.idx+"_scrollbar_vertical"),h("#mCSB_"+v.idx+"_scrollbar_horizontal")],s=[w[0].find(".mCSB_dragger"),w[1].find(".mCSB_dragger")];"x"!==u.axis&&(v.overflowed[0]&&!q?(w[0].add(s[0]).add(w[0].children("a")).css("display","block"),r.removeClass("mCS_no_scrollbar_y mCS_y_hidden")):(u.alwaysShowScrollbar?(2!==u.alwaysShowScrollbar&&s[0].add(w[0].children("a")).css("display","none"),r.removeClass("mCS_y_hidden")):(w[0].css("display","none"),r.addClass("mCS_y_hidden")),r.addClass("mCS_no_scrollbar_y"))),"y"!==u.axis&&(v.overflowed[1]&&!q?(w[1].add(s[1]).add(w[1].children("a")).css("display","block"),r.removeClass("mCS_no_scrollbar_x mCS_x_hidden")):(u.alwaysShowScrollbar?(2!==u.alwaysShowScrollbar&&s[1].add(w[1].children("a")).css("display","none"),r.removeClass("mCS_x_hidden")):(w[1].css("display","none"),r.addClass("mCS_x_hidden")),r.addClass("mCS_no_scrollbar_x"))),v.overflowed[0]||v.overflowed[1]?t.removeClass("mCS_no_scrollbar"):t.addClass("mCS_no_scrollbar")},_coordinates:function(q){var p=q.type;switch(p){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return[q.originalEvent.pageY,q.originalEvent.pageX];case"touchstart":case"touchmove":case"touchend":var r=q.originalEvent.touches[0]||q.originalEvent.changedTouches[0];return[r.pageY,r.pageX];default:return[q.pageY,q.pageX]}},_draggable:function(){function x(B){var C=v.find("iframe");if(C.length){var D=B?"auto":"none";C.css("pointer-events",D)}}function q(D,E,G,B){if(v[0].idleTimer=p.scrollInertia<233?250:0,A.attr("id")===t[1])var C="x",F=(A[0].offsetLeft-E+B)*s.scrollRatio.x;else var C="y",F=(A[0].offsetTop-D+G)*s.scrollRatio.y;g._scrollTo(u,F.toString(),{dir:C,drag:!0})}var A,y,z,u=h(this),s=u.data(a),p=s.opt,r=a+"_"+s.idx,t=["mCSB_"+s.idx+"_dragger_vertical","mCSB_"+s.idx+"_dragger_horizontal"],v=h("#mCSB_"+s.idx+"_container"),w=h("#"+t[0]+",#"+t[1]);w.bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r,function(E){if(E.stopImmediatePropagation(),E.preventDefault(),g._mouseBtnLeft(E)){n=!0,i&&(m.onselectstart=function(){return!1}),x(!1),g._stop(u),A=h(this);var F=A.offset(),G=g._coordinates(E)[0]-F.top,B=g._coordinates(E)[1]-F.left,D=A.height()+F.top,C=A.width()+F.left;D>G&&G>0&&C>B&&B>0&&(y=G,z=B),g._onDragClasses(A,"active",p.autoExpandScrollbar)}}).bind("touchmove."+r,function(C){C.stopImmediatePropagation(),C.preventDefault();var D=A.offset(),E=g._coordinates(C)[0]-D.top,B=g._coordinates(C)[1]-D.left;q(y,z,E,B)}),h(m).bind("mousemove."+r+" pointermove."+r+" MSPointerMove."+r,function(C){if(A){var D=A.offset(),E=g._coordinates(C)[0]-D.top,B=g._coordinates(C)[1]-D.left;if(y===E)return;q(y,z,E,B)}}).add(w).bind("mouseup."+r+" touchend."+r+" pointerup."+r+" MSPointerUp."+r,function(B){A&&(g._onDragClasses(A,"active",p.autoExpandScrollbar),A=null),n=!1,i&&(m.onselectstart=null),x(!0)})},_contentDraggable:function(){function p(P,N){var O=[1.5*N,2*N,N/1.5,N/2];return P>90?N>4?O[0]:O[3]:P>60?N>3?O[3]:O[2]:P>30?N>8?O[1]:N>6?O[0]:N>4?N:O[2]:N>8?N:O[3]}function B(P,R,S,O,N,Q){P&&g._scrollTo(y,P.toString(),{dur:R,scrollEasing:S,dir:O,overwrite:N,drag:Q})}var E,G,L,M,H,A,u,t,J,x,q,y=h(this),K=y.data(a),I=K.opt,F=a+"_"+K.idx,v=h("#mCSB_"+K.idx),z=h("#mCSB_"+K.idx+"_container"),w=[h("#mCSB_"+K.idx+"_dragger_vertical"),h("#mCSB_"+K.idx+"_dragger_horizontal")],C=[],D=[],r=0,s="yx"===I.axis?"none":"all";z.bind("touchstart."+F+" pointerdown."+F+" MSPointerDown."+F,function(N){if(g._pointerTouch(N)&&!n){var O=z.offset();E=g._coordinates(N)[0]-O.top,G=g._coordinates(N)[1]-O.left}}).bind("touchmove."+F+" pointermove."+F+" MSPointerMove."+F,function(Q){if(g._pointerTouch(Q)&&!n){Q.stopImmediatePropagation(),A=g._getTime();var P=v.offset(),S=g._coordinates(Q)[0]-P.top,U=g._coordinates(Q)[1]-P.left,R="mcsLinearOut";if(C.push(S),D.push(U),K.overflowed[0])var O=w[0].parent().height()-w[0].height(),T=E-S>0&&S-E>-(O*K.scrollRatio.y);if(K.overflowed[1])var N=w[1].parent().width()-w[1].width(),V=G-U>0&&U-G>-(N*K.scrollRatio.x);(T||V)&&Q.preventDefault(),x="yx"===I.axis?[E-S,G-U]:"x"===I.axis?[null,G-U]:[E-S,null],z[0].idleTimer=250,K.overflowed[0]&&B(x[0],r,R,"y","all",!0),K.overflowed[1]&&B(x[1],r,R,"x",s,!0)}}),v.bind("touchstart."+F+" pointerdown."+F+" MSPointerDown."+F,function(N){if(g._pointerTouch(N)&&!n){N.stopImmediatePropagation(),g._stop(y),H=g._getTime();var O=v.offset();L=g._coordinates(N)[0]-O.top,M=g._coordinates(N)[1]-O.left,C=[],D=[]}}).bind("touchend."+F+" pointerup."+F+" MSPointerUp."+F,function(P){if(g._pointerTouch(P)&&!n){P.stopImmediatePropagation(),u=g._getTime();var N=v.offset(),T=g._coordinates(P)[0]-N.top,V=g._coordinates(P)[1]-N.left;if(!(u-A>30)){J=1e3/(u-H);var Q="mcsEaseOut",R=2.5>J,W=R?[C[C.length-2],D[D.length-2]]:[0,0];t=R?[T-W[0],V-W[1]]:[T-L,V-M];var O=[Math.abs(t[0]),Math.abs(t[1])];J=R?[Math.abs(t[0]/4),Math.abs(t[1]/4)]:[J,J];var U=[Math.abs(z[0].offsetTop)-t[0]*p(O[0]/J[0],J[0]),Math.abs(z[0].offsetLeft)-t[1]*p(O[1]/J[1],J[1])];x="yx"===I.axis?[U[0],U[1]]:"x"===I.axis?[null,U[1]]:[U[0],null],q=[4*O[0]+I.scrollInertia,4*O[1]+I.scrollInertia];var S=parseInt(I.contentTouchScroll)||0;x[0]=O[0]>S?x[0]:0,x[1]=O[1]>S?x[1]:0,K.overflowed[0]&&B(x[0],q[0],Q,"y",s,!1),K.overflowed[1]&&B(x[1],q[1],Q,"x",s,!1)}}})},_mousewheel:function(){var s=h(this),u=s.data(a),t=u.opt,q=a+"_"+u.idx,p=h("#mCSB_"+u.idx),r=[h("#mCSB_"+u.idx+"_dragger_vertical"),h("#mCSB_"+u.idx+"_dragger_horizontal")];p.bind("mousewheel."+q,function(z,D){g._stop(s);var B="auto"!==t.mouseWheel.deltaFactor?parseInt(t.mouseWheel.deltaFactor):i&&z.deltaFactor<100?100:z.deltaFactor<40?40:z.deltaFactor||100;if("x"===t.axis||"x"===t.mouseWheel.axis)var w="x",C=[Math.round(B*u.scrollRatio.x),parseInt(t.mouseWheel.scrollAmount)],y="auto"!==t.mouseWheel.scrollAmount?C[1]:C[0]>=p.width()?.9*p.width():C[0],E=Math.abs(h("#mCSB_"+u.idx+"_container")[0].offsetLeft),A=r[1][0].offsetLeft,x=r[1].parent().width()-r[1].width(),v=z.deltaX||z.deltaY||D;else var w="y",C=[Math.round(B*u.scrollRatio.y),parseInt(t.mouseWheel.scrollAmount)],y="auto"!==t.mouseWheel.scrollAmount?C[1]:C[0]>=p.height()?.9*p.height():C[0],E=Math.abs(h("#mCSB_"+u.idx+"_container")[0].offsetTop),A=r[0][0].offsetTop,x=r[0].parent().height()-r[0].height(),v=z.deltaY||D;"y"===w&&!u.overflowed[0]||"x"===w&&!u.overflowed[1]||(t.mouseWheel.invert&&(v=-v),t.mouseWheel.normalizeDelta&&(v=0>v?-1:1),(v>0&&0!==A||0>v&&A!==x||t.mouseWheel.preventDefault)&&(z.stopImmediatePropagation(),z.preventDefault()),g._scrollTo(s,(E-v*y).toString(),{dir:w}))})},_draggerRail:function(){var s=h(this),t=s.data(a),q=a+"_"+t.idx,r=h("#mCSB_"+t.idx+"_container"),u=r.parent(),p=h(".mCSB_"+t.idx+"_scrollbar .mCSB_draggerContainer");p.bind("touchstart."+q+" pointerdown."+q+" MSPointerDown."+q,function(v){n=!0}).bind("touchend."+q+" pointerup."+q+" MSPointerUp."+q,function(v){n=!1}).bind("click."+q,function(z){if(h(z.target).hasClass("mCSB_draggerContainer")||h(z.target).hasClass("mCSB_draggerRail")){g._stop(s);var w=h(this),y=w.find(".mCSB_dragger");if(w.parent(".mCSB_scrollTools_horizontal").length>0){if(!t.overflowed[1])return;var v="x",x=z.pageX>y.offset().left?-1:1,A=Math.abs(r[0].offsetLeft)-.9*x*u.width()}else{if(!t.overflowed[0])return;var v="y",x=z.pageY>y.offset().top?-1:1,A=Math.abs(r[0].offsetTop)-.9*x*u.height()}g._scrollTo(s,A.toString(),{dir:v,scrollEasing:"mcsEaseInOut"})}})},_focus:function(){var r=h(this),t=r.data(a),s=t.opt,p=a+"_"+t.idx,q=h("#mCSB_"+t.idx+"_container"),u=q.parent();q.bind("focusin."+p,function(x){var w=h(m.activeElement),y=q.find(".mCustomScrollBox").length,v=0;w.is(s.advanced.autoScrollOnFocus)&&(g._stop(r),clearTimeout(r[0]._focusTimeout),r[0]._focusTimer=y?(v+17)*y:0,r[0]._focusTimeout=setTimeout(function(){var C=[w.offset().top-q.offset().top,w.offset().left-q.offset().left],B=[q[0].offsetTop,q[0].offsetLeft],z=[B[0]+C[0]>=0&&B[0]+C[0]<u.height()-w.outerHeight(!1),B[1]+C[1]>=0&&B[0]+C[1]<u.width()-w.outerWidth(!1)],A="yx"!==s.axis||z[0]||z[1]?"all":"none";"x"===s.axis||z[0]||g._scrollTo(r,C[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:A,dur:v}),"y"===s.axis||z[1]||g._scrollTo(r,C[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:A,dur:v})},r[0]._focusTimer))})},_wrapperScroll:function(){var q=h(this),r=q.data(a),p=a+"_"+r.idx,s=h("#mCSB_"+r.idx+"_container").parent();s.bind("scroll."+p,function(t){s.scrollTop(0).scrollLeft(0)})},_buttons:function(){var u=h(this),w=u.data(a),v=w.opt,p=w.sequential,r=a+"_"+w.idx,s=(h("#mCSB_"+w.idx+"_container"),".mCSB_"+w.idx+"_scrollbar"),q=h(s+">a");q.bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r+" mouseup."+r+" touchend."+r+" pointerup."+r+" MSPointerUp."+r+" mouseout."+r+" pointerout."+r+" MSPointerOut."+r+" click."+r,function(z){function x(A,B){p.scrollAmount=v.snapAmount||v.scrollButtons.scrollAmount,g._sequentialScroll.call(this,u,A,B)}if(z.preventDefault(),g._mouseBtnLeft(z)){var y=h(this).attr("class");switch(p.type=v.scrollButtons.scrollType,z.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===p.type)return;n=!0,w.tweenRunning=!1,x("on",y);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===p.type)return;n=!1,p.dir&&x("off",y);break;case"click":if("stepped"!==p.type||w.tweenRunning)return;x("on",y)}}})},_keyboard:function(){var u=h(this),t=u.data(a),q=t.opt,x=t.sequential,s=a+"_"+t.idx,r=h("#mCSB_"+t.idx),w=h("#mCSB_"+t.idx+"_container"),p=w.parent(),v="input,textarea,select,datalist,keygen,[contenteditable='true']";r.attr("tabindex","0").bind("blur."+s+" keydown."+s+" keyup."+s,function(D){function y(F,G){x.type=q.keyboard.scrollType,x.scrollAmount=q.snapAmount||q.keyboard.scrollAmount,"stepped"===x.type&&t.tweenRunning||g._sequentialScroll.call(this,u,F,G)}switch(D.type){case"blur":t.tweenRunning&&x.dir&&y("off",null);break;case"keydown":case"keyup":var A=D.keyCode?D.keyCode:D.which,B="on";if("x"!==q.axis&&(38===A||40===A)||"y"!==q.axis&&(37===A||39===A)){if((38===A||40===A)&&!t.overflowed[0]||(37===A||39===A)&&!t.overflowed[1])return;"keyup"===D.type&&(B="off"),h(m.activeElement).is(v)||(D.preventDefault(),D.stopImmediatePropagation(),y(B,A))}else if(33===A||34===A){if((t.overflowed[0]||t.overflowed[1])&&(D.preventDefault(),D.stopImmediatePropagation()),"keyup"===D.type){g._stop(u);var C=34===A?-1:1;if("x"===q.axis||"yx"===q.axis&&t.overflowed[1]&&!t.overflowed[0])var z="x",E=Math.abs(w[0].offsetLeft)-.9*C*p.width();else var z="y",E=Math.abs(w[0].offsetTop)-.9*C*p.height();g._scrollTo(u,E.toString(),{dir:z,scrollEasing:"mcsEaseInOut"})}}else if((35===A||36===A)&&!h(m.activeElement).is(v)&&((t.overflowed[0]||t.overflowed[1])&&(D.preventDefault(),D.stopImmediatePropagation()),"keyup"===D.type)){if("x"===q.axis||"yx"===q.axis&&t.overflowed[1]&&!t.overflowed[0])var z="x",E=35===A?Math.abs(p.width()-w.outerWidth(!1)):0;else var z="y",E=35===A?Math.abs(p.height()-w.outerHeight(!1)):0;g._scrollTo(u,E.toString(),{dir:z,scrollEasing:"mcsEaseInOut"})}}})},_sequentialScroll:function(r,u,s){function t(z){var F="stepped"!==y.type,J=z?F?q.scrollInertia/1.5:q.scrollInertia:1e3/60,B=z?F?7.5:40:2.5,I=[Math.abs(x[0].offsetTop),Math.abs(x[0].offsetLeft)],E=[w.scrollRatio.y>10?10:w.scrollRatio.y,w.scrollRatio.x>10?10:w.scrollRatio.x],C="x"===y.dir[0]?I[1]+y.dir[1]*E[1]*B:I[0]+y.dir[1]*E[0]*B,H="x"===y.dir[0]?I[1]+y.dir[1]*parseInt(y.scrollAmount):I[0]+y.dir[1]*parseInt(y.scrollAmount),G="auto"!==y.scrollAmount?H:C,D=z?F?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",A=z?!0:!1;return z&&17>J&&(G="x"===y.dir[0]?I[1]:I[0]),g._scrollTo(r,G.toString(),{dir:y.dir[0],scrollEasing:D,dur:J,onComplete:A}),z?void(y.dir=!1):(clearTimeout(y.step),void(y.step=setTimeout(function(){t()},J)))}function v(){clearTimeout(y.step),g._stop(r)}var w=r.data(a),q=w.opt,y=w.sequential,x=h("#mCSB_"+w.idx+"_container"),p="stepped"===y.type?!0:!1;switch(u){case"on":if(y.dir=["mCSB_buttonRight"===s||"mCSB_buttonLeft"===s||39===s||37===s?"x":"y","mCSB_buttonUp"===s||"mCSB_buttonLeft"===s||38===s||37===s?-1:1],g._stop(r),g._isNumeric(s)&&"stepped"===y.type)return;t(p);break;case"off":v(),(p||w.tweenRunning&&y.dir)&&t(!0)}},_arr:function(r){var q=h(this).data(a).opt,p=[];return"function"==typeof r&&(r=r()),r instanceof Array?p=r.length>1?[r[0],r[1]]:"x"===q.axis?[null,r[0]]:[r[0],null]:(p[0]=r.y?r.y:r.x||"x"===q.axis?null:r,p[1]=r.x?r.x:r.y||"y"===q.axis?null:r),"function"==typeof p[0]&&(p[0]=p[0]()),"function"==typeof p[1]&&(p[1]=p[1]()),p},_to:function(v,w){if(null!=v&&"undefined"!=typeof v){var C=h(this),B=C.data(a),u=B.opt,D=h("#mCSB_"+B.idx+"_container"),r=D.parent(),F=typeof v;w||(w="x"===u.axis?"x":"y");var q="x"===w?D.outerWidth(!1):D.outerHeight(!1),x="x"===w?D.offset().left:D.offset().top,E="x"===w?D[0].offsetLeft:D[0].offsetTop,z="x"===w?"left":"top";switch(F){case"function":return v();case"object":if(v.nodeType)var A="x"===w?h(v).offset().left:h(v).offset().top;else if(v.jquery){if(!v.length)return;var A="x"===w?v.offset().left:v.offset().top}return A-x;case"string":case"number":if(g._isNumeric.call(null,v))return Math.abs(v);if(-1!==v.indexOf("%"))return Math.abs(q*parseInt(v)/100);if(-1!==v.indexOf("-="))return Math.abs(E-parseInt(v.split("-=")[1]));if(-1!==v.indexOf("+=")){var s=E+parseInt(v.split("+=")[1]);return s>=0?0:Math.abs(s)}if(-1!==v.indexOf("px")&&g._isNumeric.call(null,v.split("px")[0]))return Math.abs(v.split("px")[0]);if("top"===v||"left"===v)return 0;if("bottom"===v)return Math.abs(r.height()-D.outerHeight(!1));if("right"===v)return Math.abs(r.width()-D.outerWidth(!1));if("first"===v||"last"===v){var y=D.find(":"+v),A="x"===w?h(y).offset().left:h(y).offset().top;return A-x}if(h(v).length){var A="x"===w?h(v).offset().left:h(v).offset().top;return A-x}return D.css(z,v),void b.update.call(null,C[0])}}},_autoUpdate:function(q){function C(){clearTimeout(v[0].autoUpdate),v[0].autoUpdate=setTimeout(function(){return z.advanced.updateOnSelectorChange&&(x=y(),x!==E)?(r(),void(E=x)):(z.advanced.updateOnContentResize&&(H=[v.outerHeight(!1),v.outerWidth(!1),s.height(),s.width(),D()[0],D()[1]],(H[0]!==u[0]||H[1]!==u[1]||H[2]!==u[2]||H[3]!==u[3]||H[4]!==u[4]||H[5]!==u[5])&&(r(),u=H)),z.advanced.updateOnImageLoad&&(w=G(),w!==B&&(v.find("img").each(function(){A(this.src)}),B=w)),void((z.advanced.updateOnSelectorChange||z.advanced.updateOnContentResize||z.advanced.updateOnImageLoad)&&C()))},60)}function G(){var I=0;return z.advanced.updateOnImageLoad&&(I=v.find("img").length),I}function A(L){function K(M,N){return function(){return N.apply(M,arguments)}}function J(){this.onload=null,r()}var I=new Image;I.onload=K(I,J),I.src=L}function y(){z.advanced.updateOnSelectorChange===!0&&(z.advanced.updateOnSelectorChange="*");var I=0,J=v.find(z.advanced.updateOnSelectorChange);return z.advanced.updateOnSelectorChange&&J.length>0&&J.each(function(){I+=h(this).height()+h(this).width()}),I}function r(){clearTimeout(v[0].autoUpdate),b.update.call(null,t[0])}var t=h(this),F=t.data(a),z=F.opt,v=h("#mCSB_"+F.idx+"_container");if(q)return clearTimeout(v[0].autoUpdate),void g._delete.call(null,v[0].autoUpdate);var x,H,w,s=v.parent(),p=[h("#mCSB_"+F.idx+"_scrollbar_vertical"),h("#mCSB_"+F.idx+"_scrollbar_horizontal")],D=function(){return[p[0].is(":visible")?p[0].outerHeight(!0):0,p[1].is(":visible")?p[1].outerWidth(!0):0]},E=y(),u=[v.outerHeight(!1),v.outerWidth(!1),s.height(),s.width(),D()[0],D()[1]],B=G();C()},_snapAmount:function(r,p,q){return Math.round(r/p)*p-q;
},_stop:function(p){var r=p.data(a),q=h("#mCSB_"+r.idx+"_container,#mCSB_"+r.idx+"_container_wrapper,#mCSB_"+r.idx+"_dragger_vertical,#mCSB_"+r.idx+"_dragger_horizontal");q.each(function(){g._stopTween.call(this)})},_scrollTo:function(q,s,u){function t(M){return I&&E.callbacks[M]&&"function"==typeof E.callbacks[M]}function y(){return[E.callbacks.alwaysTriggerOffsets||C>=H[0]+L,E.callbacks.alwaysTriggerOffsets||-J>=C]}function F(){var O=[B[0].offsetTop,B[0].offsetLeft],P=[x[0].offsetTop,x[0].offsetLeft],M=[B.outerHeight(!1),B.outerWidth(!1)],N=[v.height(),v.width()];q[0].mcs={content:B,top:O[0],left:O[1],draggerTop:P[0],draggerLeft:P[1],topPct:Math.round(100*Math.abs(O[0])/(Math.abs(M[0])-N[0])),leftPct:Math.round(100*Math.abs(O[1])/(Math.abs(M[1])-N[1])),direction:u.dir}}var I=q.data(a),E=I.opt,D={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:E.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},u=h.extend(D,u),G=[u.dur,u.drag?0:u.dur],v=h("#mCSB_"+I.idx),B=h("#mCSB_"+I.idx+"_container"),K=E.callbacks.onTotalScrollOffset?g._arr.call(q,E.callbacks.onTotalScrollOffset):[0,0],p=E.callbacks.onTotalScrollBackOffset?g._arr.call(q,E.callbacks.onTotalScrollBackOffset):[0,0];switch(I.trigger=u.trigger,E.snapAmount&&(s=g._snapAmount(s,E.snapAmount,E.snapOffset)),u.dir){case"x":var x=h("#mCSB_"+I.idx+"_dragger_horizontal"),z="left",C=B[0].offsetLeft,H=[v.width()-B.outerWidth(!1),x.parent().width()-x.width()],r=[s,s/I.scrollRatio.x],L=K[1],J=p[1],A=L>0?L/I.scrollRatio.x:0,w=J>0?J/I.scrollRatio.x:0;break;case"y":var x=h("#mCSB_"+I.idx+"_dragger_vertical"),z="top",C=B[0].offsetTop,H=[v.height()-B.outerHeight(!1),x.parent().height()-x.height()],r=[s,s/I.scrollRatio.y],L=K[0],J=p[0],A=L>0?L/I.scrollRatio.y:0,w=J>0?J/I.scrollRatio.y:0}r[1]<0?r=[0,0]:r[1]>=H[1]?r=[H[0],H[1]]:r[0]=-r[0],clearTimeout(B[0].onCompleteTimeout),(I.tweenRunning||!(0===C&&r[0]>=0||C===H[0]&&r[0]<=H[0]))&&(g._tweenTo.call(null,x[0],z,Math.round(r[1]),G[1],u.scrollEasing),g._tweenTo.call(null,B[0],z,Math.round(r[0]),G[0],u.scrollEasing,u.overwrite,{onStart:function(){u.callbacks&&u.onStart&&!I.tweenRunning&&(t("onScrollStart")&&(F(),E.callbacks.onScrollStart.call(q[0])),I.tweenRunning=!0,g._onDragClasses(x),I.cbOffsets=y())},onUpdate:function(){u.callbacks&&u.onUpdate&&t("whileScrolling")&&(F(),E.callbacks.whileScrolling.call(q[0]))},onComplete:function(){if(u.callbacks&&u.onComplete){"yx"===E.axis&&clearTimeout(B[0].onCompleteTimeout);var M=B[0].idleTimer||0;B[0].onCompleteTimeout=setTimeout(function(){t("onScroll")&&(F(),E.callbacks.onScroll.call(q[0])),t("onTotalScroll")&&r[1]>=H[1]-A&&I.cbOffsets[0]&&(F(),E.callbacks.onTotalScroll.call(q[0])),t("onTotalScrollBack")&&r[1]<=w&&I.cbOffsets[1]&&(F(),E.callbacks.onTotalScrollBack.call(q[0])),I.tweenRunning=!1,B[0].idleTimer=0,g._onDragClasses(x,"hide")},M)}}}))},_tweenTo:function(r,u,s,q,A,t,J){function I(){r._mcsstop||(v||G.call(),v=g._getTime()-z,F(),v>=r._mcstime&&(r._mcstime=v>r._mcstime?v+x-(v-r._mcstime):v+x-1,r._mcstime<v+1&&(r._mcstime=v+1)),r._mcstime<q?r._mcsid=_request(I):H.call())}function F(){q>0?(r._mcscurrVal=w(r._mcstime,D,y,q,A),E[u]=Math.round(r._mcscurrVal)+"px"):E[u]=s+"px",B.call()}function p(){x=1e3/60,r._mcstime=v+x,_request=l.requestAnimationFrame?l.requestAnimationFrame:function(K){return F(),setTimeout(K,.01)},r._mcsid=_request(I)}function C(){null!=r._mcsid&&(l.requestAnimationFrame?l.cancelAnimationFrame(r._mcsid):clearTimeout(r._mcsid),r._mcsid=null)}function w(M,L,Q,P,N){switch(N){case"linear":case"mcsLinear":return Q*M/P+L;case"mcsLinearOut":return M/=P,M--,Q*Math.sqrt(1-M*M)+L;case"easeInOutSmooth":return M/=P/2,1>M?Q/2*M*M+L:(M--,-Q/2*(M*(M-2)-1)+L);case"easeInOutStrong":return M/=P/2,1>M?Q/2*Math.pow(2,10*(M-1))+L:(M--,Q/2*(-Math.pow(2,-10*M)+2)+L);case"easeInOut":case"mcsEaseInOut":return M/=P/2,1>M?Q/2*M*M*M+L:(M-=2,Q/2*(M*M*M+2)+L);case"easeOutSmooth":return M/=P,M--,-Q*(M*M*M*M-1)+L;case"easeOutStrong":return Q*(-Math.pow(2,-10*M/P)+1)+L;case"easeOut":case"mcsEaseOut":default:var O=(M/=P)*M,K=O*M;return L+Q*(.499999999999997*K*O+-2.5*O*O+5.5*K+-6.5*O+4*M)}}var x,J=J||{},G=J.onStart||function(){},B=J.onUpdate||function(){},H=J.onComplete||function(){},z=g._getTime(),v=0,D=r.offsetTop,E=r.style;"left"===u&&(D=r.offsetLeft);var y=s-D;r._mcsstop=0,"none"!==t&&C(),p()},_getTime:function(){return l.performance&&l.performance.now?l.performance.now():l.performance&&l.performance.webkitNow?l.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},_stopTween:function(){var p=this;null!=p._mcsid&&(l.requestAnimationFrame?l.cancelAnimationFrame(p._mcsid):clearTimeout(p._mcsid),p._mcsid=null,p._mcsstop=1)},_delete:function(r){try{delete r}catch(q){r=null}},_mouseBtnLeft:function(p){return!(p.which&&1!==p.which)},_pointerTouch:function(q){var p=q.originalEvent.pointerType;return!(p&&"touch"!==p&&2!==p)},_isNumeric:function(p){return!isNaN(parseFloat(p))&&isFinite(p)}};h.fn[e]=function(p){return b[p]?b[p].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof p&&p?void h.error("Method "+p+" does not exist"):b.init.apply(this,arguments)},h[e]=function(p){return b[p]?b[p].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof p&&p?void h.error("Method "+p+" does not exist"):b.init.apply(this,arguments)},h[e].defaults=f,l[e]=!0,h(l).load(function(){h(k)[e]()})}(jQuery,window,document),function(){var b,m;b=this.jQuery,m=b(window),b.fn.stick_in_parent=function(e){var u,n,f,s,B,l,C;for(null==e&&(e={}),s=e.sticky_class,u=e.inner_scrolling,f=e.parent,n=e.offset_top,null==n&&(n=0),null==f&&(f=void 0),null==u&&(u=!0),null==s&&(s="is_stuck"),B=function(a,e,l,v,y,p,t){var q,z,k,w,c,d,A,x,g,h;if(!a.data("sticky_kit")){if(a.data("sticky_kit",!0),d=a.parent(),null!=f&&(d=d.closest(f)),!d.length)throw"failed to find stick parent";if(q=k=!1,g=b("<div />"),g.css("position",a.css("position")),A=function(){var c,b;return c=parseInt(d.css("border-top-width"),10),b=parseInt(d.css("padding-top"),10),e=parseInt(d.css("padding-bottom"),10),l=d.offset().top+c+b,v=d.height(),c=k?(k=!1,q=!1,a.insertAfter(g).css({position:"",top:"",width:"",bottom:""}),g.detach(),!0):void 0,y=a.offset().top-parseInt(a.css("margin-top"),10)-n,p=a.outerHeight(!0),t=a.css("float"),g.css({width:a.outerWidth(!0),height:p,display:a.css("display"),"vertical-align":a.css("vertical-align"),"float":t}),c?h():void 0},A(),p!==v)return w=void 0,c=n,h=function(){var b,h,r,f;return r=m.scrollTop(),null!=w&&(h=r-w),w=r,k?(f=r+p+c>v+l,q&&!f&&(q=!1,a.css({position:"fixed",bottom:"",top:c}).trigger("sticky_kit:unbottom")),y>r&&(k=!1,c=n,"left"!==t&&"right"!==t||a.insertAfter(g),g.detach(),b={position:"",width:"",top:""},a.css(b).removeClass(s).trigger("sticky_kit:unstick")),u&&(b=m.height(),p>b&&!q&&(c-=h,c=Math.max(b-p,c),c=Math.min(n,c),k&&a.css({top:c+"px"})))):r>y&&(k=!0,b={position:"fixed",top:c},b.width="border-box"===a.css("box-sizing")?a.outerWidth()+"px":a.width()+"px",a.css(b).addClass(s).after(g),"left"!==t&&"right"!==t||g.append(a),a.trigger("sticky_kit:stick")),k&&(null==f&&(f=r+p+c>v+l),!q&&f)?(q=!0,"static"===d.css("position")&&d.css({position:"relative"}),a.css({position:"absolute",bottom:e,top:"auto"}).trigger("sticky_kit:bottom")):void 0},x=function(){return A(),h()},z=function(){return m.off("scroll",h),b(document.body).off("sticky_kit:recalc",x),a.off("sticky_kit:detach",z),a.removeData("sticky_kit"),a.css({position:"",bottom:"",top:""}),d.position("position",""),k?(a.insertAfter(g).removeClass(s),g.remove()):void 0},m.on("touchmove",h),m.on("scroll",h),m.on("resize",x),b(document.body).on("sticky_kit:recalc",x),a.on("sticky_kit:detach",z),setTimeout(h,0)}},l=0,C=this.length;C>l;l++)e=this[l],B(b(e));return this}}.call(this),function($){var DATA_COLOR="data-ab-color",DATA_PARENT="data-ab-parent",DATA_CSS_BG="data-ab-css-background",EVENT_CF="ab-color-found",DEFAULTS={selector:'[data-adaptive-background="1"]',parent:null,exclude:["rgb(0,0,0)","rgba(255,255,255)"],normalizeTextColor:!1,normalizedTextColors:{light:"#fff",dark:"#000"},lumaClasses:{light:"ab-light",dark:"ab-dark"}};!function(n){"use strict";var t=function(){return document.createElement("canvas").getContext("2d")},e=function(n,e){var a=new Image,o=n.src||n;"data:"!==o.substring(0,5)&&(a.crossOrigin="Anonymous"),a.onload=function(){var n=t("2d");n.drawImage(a,0,0);var o=n.getImageData(0,0,a.width,a.height);e&&e(o.data)},a.src=o},a=function(n){return["rgb(",n,")"].join("")},o=function(n){return n.map(function(n){return a(n.name)})},r=5,i=10,c={};c.colors=function(n,t){t=t||{};var c=t.exclude||[],u=t.paletteSize||i;e(n,function(e){for(var i=n.width*n.height||e.length,m={},s="",d=[],f={dominant:{name:"",count:0},palette:Array.apply(null,new Array(u)).map(Boolean).map(function(){return{name:"0,0,0",count:0}})},l=0;i>l;){if(d[0]=e[l],d[1]=e[l+1],d[2]=e[l+2],s=d.join(","),m[s]=s in m?m[s]+1:1,-1===c.indexOf(a(s))){var g=m[s];g>f.dominant.count?(f.dominant.name=s,f.dominant.count=g):f.palette.some(function(n){return g>n.count?(n.name=s,n.count=g,!0):void 0})}l+=4*r}if(t.success){var p=o(f.palette);t.success({dominant:a(f.dominant.name),secondary:p[0],palette:p})}})},n.RGBaster=n.RGBaster||c}(window),$.adaptiveBackground={run:function(options){var opts=$.extend({},DEFAULTS,options);$(opts.selector).each(function(index,el){var $this=$(this),handleColors=function(){var img=useCSSBackground()?getCSSBackground():$this[0];RGBaster.colors(img,{paletteSize:20,exclude:opts.exclude,success:function(colors){$this.attr(DATA_COLOR,colors.dominant),$this.trigger(EVENT_CF,{color:colors.dominant,palette:colors.palette})}})},useCSSBackground=function(){return $this.attr(DATA_CSS_BG)},getCSSBackground=function(){return $this.css("background-image").replace("url(","").replace(")","")};$this.on(EVENT_CF,function(ev,data){var $parent;$parent=opts.parent&&$this.parents(opts.parent).length?$this.parents(opts.parent):$this.attr(DATA_PARENT)&&$this.parents($this.attr(DATA_PARENT)).length?$this.parents($this.attr(DATA_PARENT)):useCSSBackground()?$this:opts.parent?$this.parents(opts.parent):$this.parent(),$parent.css({backgroundColor:data.color});var getYIQ=function(color){var rgb=data.color.match(/\d+/g);return(299*rgb[0]+587*rgb[1]+114*rgb[2])/1e3},getNormalizedTextColor=function(color){return getYIQ(color)>=128?opts.normalizedTextColors.dark:opts.normalizedTextColors.light},getLumaClass=function(color){return getYIQ(color)<=128?opts.lumaClasses.dark:opts.lumaClasses.light};opts.normalizeTextColor&&$parent.css({color:getNormalizedTextColor(data.color)}),$parent.addClass(getLumaClass(data.color)).attr("data-ab-yaq",getYIQ(data.color)),opts.success&&opts.success($this,data)}),handleColors()})}}}(jQuery),function(){function inputToRGB(color){var rgb={r:0,g:0,b:0},a=1,ok=!1,format=!1;return"string"==typeof color&&(color=stringInputToObject(color)),"object"==typeof color&&(color.hasOwnProperty("r")&&color.hasOwnProperty("g")&&color.hasOwnProperty("b")?(rgb=rgbToRgb(color.r,color.g,color.b),ok=!0,format="%"===String(color.r).substr(-1)?"prgb":"rgb"):color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("v")?(color.s=convertToPercentage(color.s),color.v=convertToPercentage(color.v),rgb=hsvToRgb(color.h,color.s,color.v),ok=!0,format="hsv"):color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("l")&&(color.s=convertToPercentage(color.s),color.l=convertToPercentage(color.l),rgb=hslToRgb(color.h,color.s,color.l),ok=!0,format="hsl"),color.hasOwnProperty("a")&&(a=color.a)),a=boundAlpha(a),{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a}}function rgbToRgb(r,g,b){return{r:255*bound01(r,255),g:255*bound01(g,255),b:255*bound01(b,255)}}function rgbToHsl(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,l:l}}function hslToRgb(h,s,l){function hue2rgb(p,q,t){return 0>t&&(t+=1),t>1&&(t-=1),1/6>t?p+6*(q-p)*t:.5>t?q:2/3>t?p+(q-p)*(2/3-t)*6:p}var r,g,b;if(h=bound01(h,360),s=bound01(s,100),l=bound01(l,100),0===s)r=g=b=l;else{var q=.5>l?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return{r:255*r,g:255*g,b:255*b}}function rgbToHsv(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),v=max,d=max-min;if(s=0===max?0:d/max,max==min)h=0;else{switch(max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,v:v}}function hsvToRgb(h,s,v){h=6*bound01(h,360),s=bound01(s,100),v=bound01(v,100);var i=math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:255*r,g:255*g,b:255*b}}function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)?hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0):hex.join("")}function rgbaToHex(r,g,b,a){var hex=[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return hex.join("")}function desaturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s-=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function saturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s+=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function greyscale(color){return tinycolor(color).desaturate(100)}function lighten(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l+=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function brighten(color,amount){amount=0===amount?0:amount||10;var rgb=tinycolor(color).toRgb();return rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(255*-(amount/100)))),rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(255*-(amount/100)))),rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(255*-(amount/100)))),tinycolor(rgb)}function darken(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l-=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function spin(color,amount){var hsl=tinycolor(color).toHsl(),hue=(mathRound(hsl.h)+amount)%360;return hsl.h=0>hue?360+hue:hue,tinycolor(hsl)}function complement(color){var hsl=tinycolor(color).toHsl();return hsl.h=(hsl.h+180)%360,tinycolor(hsl)}function triad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})]}function tetrad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})]}function splitcomplement(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})]}function analogous(color,results,slices){results=results||6,slices=slices||30;var hsl=tinycolor(color).toHsl(),part=360/slices,ret=[tinycolor(color)];for(hsl.h=(hsl.h-(part*results>>1)+720)%360;--results;)hsl.h=(hsl.h+part)%360,ret.push(tinycolor(hsl));return ret}function monochromatic(color,results){results=results||6;for(var hsv=tinycolor(color).toHsv(),h=hsv.h,s=hsv.s,v=hsv.v,ret=[],modification=1/results;results--;)ret.push(tinycolor({h:h,s:s,v:v})),v=(v+modification)%1;return ret}function flip(o){var flipped={};for(var i in o)o.hasOwnProperty(i)&&(flipped[o[i]]=i);return flipped}function boundAlpha(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function bound01(n,max){isOnePointZero(n)&&(n="100%");var processPercent=isPercentage(n);return n=mathMin(max,mathMax(0,parseFloat(n))),processPercent&&(n=parseInt(n*max,10)/100),math.abs(n-max)<1e-6?1:n%max/parseFloat(max)}function clamp01(val){return mathMin(1,mathMax(0,val))}function parseIntFromHex(val){return parseInt(val,16)}function isOnePointZero(n){return"string"==typeof n&&-1!=n.indexOf(".")&&1===parseFloat(n)}function isPercentage(n){return"string"==typeof n&&-1!=n.indexOf("%")}function pad2(c){return 1==c.length?"0"+c:""+c}function convertToPercentage(n){return 1>=n&&(n=100*n+"%"),n}function convertDecimalToHex(d){return Math.round(255*parseFloat(d)).toString(16)}function convertHexToDecimal(h){return parseIntFromHex(h)/255}function stringInputToObject(color){color=color.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var named=!1;if(names[color])color=names[color],named=!0;else if("transparent"==color)return{r:0,g:0,b:0,a:0,format:"name"};var match;return(match=matchers.rgb.exec(color))?{r:match[1],g:match[2],b:match[3]}:(match=matchers.rgba.exec(color))?{r:match[1],g:match[2],b:match[3],a:match[4]}:(match=matchers.hsl.exec(color))?{h:match[1],s:match[2],l:match[3]}:(match=matchers.hsla.exec(color))?{h:match[1],s:match[2],l:match[3],a:match[4]}:(match=matchers.hsv.exec(color))?{h:match[1],s:match[2],v:match[3]}:(match=matchers.hex8.exec(color))?{a:convertHexToDecimal(match[1]),r:parseIntFromHex(match[2]),g:parseIntFromHex(match[3]),b:parseIntFromHex(match[4]),format:named?"name":"hex8"}:(match=matchers.hex6.exec(color))?{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"}:(match=matchers.hex3.exec(color))?{r:parseIntFromHex(match[1]+""+match[1]),g:parseIntFromHex(match[2]+""+match[2]),b:parseIntFromHex(match[3]+""+match[3]),format:named?"name":"hex"}:!1}var trimLeft=/^[\s,#]+/,trimRight=/\s+$/,tinyCounter=0,math=Math,mathRound=math.round,mathMin=math.min,mathMax=math.max,mathRandom=math.random,tinycolor=function tinycolor(color,opts){if(color=color?color:"",opts=opts||{},color instanceof tinycolor)return color;if(!(this instanceof tinycolor))return new tinycolor(color,opts);var rgb=inputToRGB(color);this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(100*this._a)/100,this._format=opts.format||rgb.format,this._gradientType=opts.gradientType,this._r<1&&(this._r=mathRound(this._r)),this._g<1&&(this._g=mathRound(this._g)),this._b<1&&(this._b=mathRound(this._b)),this._ok=rgb.ok,this._tc_id=tinyCounter++};tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var rgb=this.toRgb();return(299*rgb.r+587*rgb.g+114*rgb.b)/1e3},setAlpha:function(value){return this._a=boundAlpha(value),this._roundA=mathRound(100*this._a)/100,this},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:360*hsv.h,s:hsv.s,v:hsv.v,a:this._a}},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b),h=mathRound(360*hsv.h),s=mathRound(100*hsv.s),v=mathRound(100*hsv.v);return 1==this._a?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+this._roundA+")"},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:360*hsl.h,s:hsl.s,l:hsl.l,a:this._a}},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b),h=mathRound(360*hsl.h),s=mathRound(100*hsl.s),l=mathRound(100*hsl.l);return 1==this._a?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+this._roundA+")"},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char)},toHexString:function(allow3Char){return"#"+this.toHex(allow3Char)},toHex8:function(){return rgbaToHex(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+")":"rgba("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:mathRound(100*bound01(this._r,255))+"%",g:mathRound(100*bound01(this._g,255))+"%",b:mathRound(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+mathRound(100*bound01(this._r,255))+"%, "+mathRound(100*bound01(this._g,255))+"%, "+mathRound(100*bound01(this._b,255))+"%)":"rgba("+mathRound(100*bound01(this._r,255))+"%, "+mathRound(100*bound01(this._g,255))+"%, "+mathRound(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function(secondColor){var hex8String="#"+rgbaToHex(this._r,this._g,this._b,this._a),secondHex8String=hex8String,gradientType=this._gradientType?"GradientType = 1, ":"";if(secondColor){var s=tinycolor(secondColor);secondHex8String=s.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")"},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=!1,hasAlpha=this._a<1&&this._a>=0,needsAlphaFormat=!formatSet&&hasAlpha&&("hex"===format||"hex6"===format||"hex3"===format||"name"===format);return needsAlphaFormat?"name"===format&&0===this._a?this.toName():this.toRgbString():("rgb"===format&&(formattedString=this.toRgbString()),"prgb"===format&&(formattedString=this.toPercentageRgbString()),("hex"===format||"hex6"===format)&&(formattedString=this.toHexString()),"hex3"===format&&(formattedString=this.toHexString(!0)),"hex8"===format&&(formattedString=this.toHex8String()),"name"===format&&(formattedString=this.toName()),"hsl"===format&&(formattedString=this.toHslString()),"hsv"===format&&(formattedString=this.toHsvString()),formattedString||this.toHexString())},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));return this._r=color._r,this._g=color._g,this._b=color._b,this.setAlpha(color._a),this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}},tinycolor.fromRatio=function(color,opts){if("object"==typeof color){var newColor={};for(var i in color)color.hasOwnProperty(i)&&("a"===i?newColor[i]=color[i]:newColor[i]=convertToPercentage(color[i]));color=newColor}return tinycolor(color,opts)},tinycolor.equals=function(color1,color2){return color1&&color2?tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString():!1},tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()})},tinycolor.mix=function(color1,color2,amount){amount=0===amount?0:amount||50;var w1,rgb1=tinycolor(color1).toRgb(),rgb2=tinycolor(color2).toRgb(),p=amount/100,w=2*p-1,a=rgb2.a-rgb1.a;w1=w*a==-1?w:(w+a)/(1+w*a),w1=(w1+1)/2;var w2=1-w1,rgba={r:rgb2.r*w1+rgb1.r*w2,g:rgb2.g*w1+rgb1.g*w2,b:rgb2.b*w1+rgb1.b*w2,a:rgb2.a*p+rgb1.a*(1-p)};return tinycolor(rgba)},tinycolor.readability=function(color1,color2){var c1=tinycolor(color1),c2=tinycolor(color2),rgb1=c1.toRgb(),rgb2=c2.toRgb(),brightnessA=c1.getBrightness(),brightnessB=c2.getBrightness(),colorDiff=Math.max(rgb1.r,rgb2.r)-Math.min(rgb1.r,rgb2.r)+Math.max(rgb1.g,rgb2.g)-Math.min(rgb1.g,rgb2.g)+Math.max(rgb1.b,rgb2.b)-Math.min(rgb1.b,rgb2.b);return{brightness:Math.abs(brightnessA-brightnessB),color:colorDiff}},tinycolor.isReadable=function(color1,color2){var readability=tinycolor.readability(color1,color2);return readability.brightness>125&&readability.color>500},tinycolor.mostReadable=function(baseColor,colorList){for(var bestColor=null,bestScore=0,bestIsReadable=!1,i=0;i<colorList.length;i++){var readability=tinycolor.readability(baseColor,colorList[i]),readable=readability.brightness>125&&readability.color>500,score=3*(readability.brightness/125)+readability.color/500;(readable&&!bestIsReadable||readable&&bestIsReadable&&score>bestScore||!readable&&!bestIsReadable&&score>bestScore)&&(bestIsReadable=readable,bestScore=score,bestColor=tinycolor(colorList[i]))}return bestColor};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names),matchers=function(){var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")",PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";return{rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=tinycolor:"function"==typeof define&&define.amd?define(function(){return tinycolor}):window.tinycolor=tinycolor}(),function($,w){"use strict";$.fn.featureHubAfterPaging=function(){var options=$("[data-plugin=responsiveImages]").data("options");$.mimeo(options),$.adaptiveBackground.run({normalizeTextColor:!0,selector:$('[data-adaptive-background="1"]',$(this)),success:function($img,data){var $baseSelector,color=w.tinycolor(data.color);null===$img.data("element")||void 0===$img.data("element")?($baseSelector=$img.parents(".hubTopImage"),$(".inner",$baseSelector).css("background",color.isDark()?color.darken().setAlpha(.65):color.lighten().setAlpha(.65)),$(".inner > a",$baseSelector).css("color",color.isDark()?"#fff":"#000"),$(".inner h3",$baseSelector).css("color",color.isDark()?color.lighten(75):color.darken(75)),$(".relatedText",$baseSelector).animate({opacity:1},2500)):($baseSelector=$img.parents(".featuredHubElementBig"),$(".relatedText",$baseSelector).css("background",color.isDark()?color.darken(20).setAlpha(.7):color.lighten(20).setAlpha(.7)),$(".relatedText a",$baseSelector).css("color",color.isDark()?"#fff":"#000"),$(".relatedText h3 a",$baseSelector).css("color",color.isDark()?color.lighten(95):color.darken(95)),$(".relatedText",$baseSelector).animate({opacity:1},2500))}});var a=setInterval(function(){var $stickyHeader=$("[data-jshook=stickyHeader]");null!=$stickyHeader&&$stickyHeader.trigger("sticky_kit:recalc"),clearInterval(a)},1e3);return this}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.imageSlider=function(e,o){var init,options=$.extend({},defaults,o||{});return init=function(){var viewport=$("div:visible","[data-jshook=currentViewPort]").data("viewport"),pixelRatio="undefined"!=typeof window.devicePixelRatio?Math.ceil(window.devicePixelRatio):1;pixelRatio=pixelRatio>1?2:1;var $placeholders=$("[data-jshook=imagePlaceholder]");$.each($placeholders,function(index,element){var $img=$(element).siblings("a").eq(0),urls=$(element).data(viewport).split(";");$img.attr("href",1==pixelRatio?urls[0]:urls[1])});var $royalSlider=$(options.target);if(null!==$royalSlider&&void 0!==$royalSlider){var defaultOptions={keyboardNavEnabled:!0,autoScaleSlider:!0,imageAlignCenter:!1,slidesSpacing:0,imageScaleMode:"fill",transitionType:null===options.transition||void 0===options.transition?"fade":options.transition,navigateByClick:!0,numImagesToPreload:2,autoplay:{enabled:null!==options.autoplay&&void 0!==options.autoplay&&options.autoplay?!0:!1,stopAtAction:!0,delay:5e3}};defaultOptions=$.extend(defaultOptions,options.pluginOptions||{}),$royalSlider.royalSlider(defaultOptions);var $slider=$royalSlider.data("royalSlider");$slider.ev.on("rsEnterFullscreen",function(){$("html").toggleClass("fullScreenEnabled")}),$slider.ev.on("rsExitFullscreen",function(){$("html").removeClass("fullScreenEnabled")})}},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.responsiveImages=function(e,o){var init,options=$.extend({},defaults,o||{});return init=function(){$.mimeo(options)},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,
{});d3.mobileMenu=function(e,o){var init;$.extend({},defaults,o||{});return init=function(){$("[data-toggle=offcanvas]").click(function(e){$(".container").toggleClass("active"),$(".header-w").toggleClass("active")})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,trace=d3.Trace,defaults={};d3.newsAsyncLoader=function(e,o){var $dom=e,opt=$.extend({},defaults,o||{}),baseUrl=opt.uri,currentIndexAttribute=opt.currentIndexAttribute,progressBar=opt.progressBar,target=opt.dom,button=opt.button;if(null===target||void 0===target||""===target)return!1;if(null===baseUrl||void 0===baseUrl||""===baseUrl)return!1;var $target=$(target),$button=$(button),$stickyHeader=null===opt.sticky||void 0===opt.sticky?null:$(opt.sticky),init;return init=function(){var currentIndex=$target.data(currentIndexAttribute);(null===currentIndex||void 0===currentIndex||0==currentIndex)&&(currentIndex=1);var nextIndex=currentIndex;$button.on("click",function(){++nextIndex;var url=baseUrl.replace("[page]",nextIndex);$.ajax({method:"GET",url:url,dataType:"html",cache:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr.addEventListener("progress",function(e){if(console.log(e),e.total>0){var pct=e.loaded/e.total*100;$("[data-jshook=newsProgress]").css("width",pct.toPrecision(3)+"%")}},!1),xhr},success:function(data){if(null===data||void 0===data||""===data||0==(""===$.trim(data)).length)return void $(button).hide(slow);$target.append(data);var pagedElements=$("[data-jshook=pagedElement]",$target);if(null!=pagedElements&&pagedElements.length>0){var callbackName=$(pagedElements).last().data("name");if(null!=callbackName&&""!=callbackName){var selector=$(data).data("selector");if(null!=selector&&""!=selector){var func='$("'+selector+'").'+callbackName+"()";eval(func)}}}null!=$stickyHeader&&$stickyHeader.trigger("sticky_kit:recalc")},error:function(){console.log("Loading problem.")}})})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.multiImageSlider=function(e,o){var _opt=$.extend({},defaults,o||{}),target=_opt.target;if(null!==target&&void 0!==target&&""!==target){var init,$target=$(target),init=function(){$target.lemmonSlider({infinite:!0}),setInterval(function(){$target.trigger("nextPage")},5e3)};return{init:init}}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.multiImageCarousel=function(e,o){var opt=$.extend({},defaults,o||{}),target=opt.target,numItem=opt.numItem,navContainer=opt.navContainer,enableNav=!0;if((null===numItem||void 0===numItem||""===numItem)&&(numItem=5),(null===navContainer||void 0===navContainer||""===navContainer)&&(enableNav=!1),null!==target&&void 0!==target&&""!==target){var $target=$(target),init=function(){$target.owlCarousel({loop:!0,margin:0,nav:enableNav,navContainer:navContainer,navText:['<i class="fa fa-angle-left fa-4x inverse"></i>','<i class="fa fa-angle-right fa-4x inverse"></i>'],autoplay:!0,autoplayTimeout:2e3,responsive:{0:{items:2},600:{items:4},1e3:{items:numItem}}})};return{init:init}}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{container:".js-sameHeight",hookResize:!1});d3.sameHeight=function(e,o){var init,ensureSameHeight,assignHeight,getMaxHeight,resetHeights,_opt=$.extend({},defaults,o||{});return init=function(){var $list=$(_opt.container);ensureSameHeight($list),_opt.hookResize&&$(win).resize(function(){$.each(_opt.selectors,function(i,el){resetHeights($list,el)}),ensureSameHeight($list)})},assignHeight=function($list,selector,maxH){var $el,$c;$list.each(function(i,el){$el=$(el),$c=$el.find(selector),$c.each(function(y,tt){$(tt).height(maxH)})})},resetHeights=function($list,selector){$list.each(function(i,el){$(el).find(selector).height("")})},ensureSameHeight=function($elements){$elements.each(function(index,el){var ii,selector,maxH,$ul=$(el),selectors=_opt.selectors,ll=selectors.length;for(ii=0;ll>ii;ii++)selector=selectors[ii],maxH=getMaxHeight($ul,selector),assignHeight($ul,selector,maxH)})},getMaxHeight=function($list,selector){var hh,$el,$c,$tt,maxH=0;return $list.each(function(i,el){$el=$(el),$c=$el.find(selector),$c.each(function(y,tt){$tt=$(tt),hh=$tt.height(),"undefined"!=typeof hh&&hh>maxH&&(maxH=hh)})}),maxH},{init:init}}}(jQuery,window),function($,win){var d3=win.deltatre,defaults=(d3.Trace,{});d3.megaDropdown=function(element,options){var _opt=$.extend({},defaults,options||{}),target=_opt.target;if(null!==target&&void 0!==target&&""!==target){var holder=_opt.holder;if(null!==holder&&void 0!==holder&&""!==holder){var init,$target=$(target),$holder=$(holder);return init=function(){function CheckActives(){inMenuItems||inDropdown||($dropdown.fadeOut(50),$menuItems.removeClass("active"))}function getDropdown(url){null!==url&&void 0!==url&&""!=url&&$.ajax({url:url,contentType:"application/html; charset=utf-8",type:"GET",dataType:"html",cache:!1,success:function(data){$holder.append(data),$target.html(data)},error:function(err){console.log("ajax error"),console.log(err)}})}var $menuItems=$("[data-jshook=menu] > li > a"),$dropdown=$("[data-jshook=dropdownTarget]"),currentMenu=($("[data-jshook=menu]"),""),inMenuItems=!1,inDropdown=!1;$menuItems.hover(function(){inMenuItems=!0,$(this).doTimeout("hover",300,function(element){dropdownTarget=$(this).data("target"),$menuItems.removeClass("active"),$(this).addClass("active");var $dropdownDom=$("[data-jshook="+dropdownTarget+"]",$holder);$dropdownDom.size()>0?$target.html($dropdownDom.html()):(dropdownTarget==currentMenu&&$target.html(""),getDropdown($(this).data("href"))),$dropdown.data("menureference",dropdownTarget),$target.fadeIn(500,function(){currentMenu=dropdownTarget})})},function(){inMenuItems=!1,$(this).doTimeout("hover",300,function(element){CheckActives()})}),$dropdown.hover(function(){inDropdown=!0,$("[data-target="+$(this).data("menureference")+"]",$menuItems).addClass("active")},function(){inDropdown=!1,$(this).doTimeout("hover",300,function(element){CheckActives()})})},{init:init}}}}}(jQuery,window),function($,win){var d3=win.deltatre,defaults=(d3.Trace,{});d3.socialButtons=function(element,opt){var init,options=$.extend({},defaults,opt||{});return init=function(){function Tweet(url,message){var tweet_url="https://twitter.com/intent/tweet";$buttons=$(options.twitterTarget),$buttons.each(function(){var $element=$(this),via=$element.attr("data-socialid")||"",relatedAttributes=$element.attr("data-related"),hashtagsAttributes=$element.attr("data-hashtags"),related=void 0===relatedAttributes?"":encodeURIComponent(relatedAttributes)||"",hashtags=void 0===hashtagsAttributes?"":encodeURIComponent(hashtagsAttributes)||"";hashtags=""==hashtags?"":"&hashtags="+hashtags,related=""==related?"":"&related="+related,via=""==via?"":"&via="+via,message=""==message||void 0===message?"":message,link=tweet_url+"?url="+url+"&original_referer="+encodeURIComponent(document.location.href)+"&source=tweetbutton&text="+message+via+hashtags+related,$(this).on("click",function(){return win.open(link,"targetWindow","width=600,height=500,toolbar=no,status=no,location=no,menubar=no"),!1})})}function Facebook(url){var facebook_url="http://www.facebook.com/sharer/sharer.php";$buttons=$(options.facebookTarget),$buttons.each(function(){var link=facebook_url+"?s=100&p[url]="+url+"&p[images][0]="+$("meta[name='og:image']").attr("content")+"&p[title]="+$("meta[name='og:title']").attr("content")+"&p[summary]="+$("meta[name='og:description']").attr("content");$(this).on("click",function(){return win.open(link,"targetWindow","width=600,height=500,toolbar=no,status=no,location=no,menubar=no"),!1})})}function MailTo(url){$buttons=$(options.mailtoTarget),$buttons.each(function(){var $element=$(this);$element.attr({href:"mailto:?Subject="+$("meta[name='og:site_name']").attr("content")+"&body="+$("meta[name='og:description']").attr("content")+" "+url})})}var url=options.url,message=options.message;Tweet(url,message),Facebook(url),MailTo(url)},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.initPopovers=function(e,o){var init;$.extend({},defaults,o||{});return init=function(){$("[data-toggle=popover]").popover()},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.toggleResultsDetails=function(e,o){var init,options=$.extend({},defaults,o||{}),$button=$(options.button),$target=$(options.target);return init=function(){$button.on("click",function(){$target.toggleClass("hidden"),$button.parent().toggleClass("active")})},{init:init}}}(jQuery,window),function($,win){"use strict";var calendarData,d3=win.deltatre,defaults=(d3.Trace,{firstDay:1,header:"false",defaultDate:moment(),editable:!0,eventAfterAllRender:function(){var $tooltipEvent=$(".fc-event");$tooltipEvent.each(function(index){var $item=$(this),$fisaItem=$(this).filter(".isFisa");$item.filter(".elite").tooltip({title:"ELITE"}),$item.filter(".para-rowing").tooltip({title:"AS ROWING"}),$item.filter(".under23").tooltip({title:"UNDER 23"}),$item.filter(".junior").tooltip({title:"JUNIOR"}),$item.filter(".university").tooltip({title:"UNIVERSITY"}),$item.filter(".masters").tooltip({title:"MASTERS"}),$item.filter(".coastal").tooltip({title:"COASTAL"}),$item.filter(".indoor").tooltip({title:"INDOOR"}),$fisaItem.tooltip("destroy"),$fisaItem.filter(".elite").tooltip({title:"FISA EVENT - ELITE"}),$fisaItem.filter(".para-rowing").tooltip({title:"FISA EVENT - AS ROWING"}),$fisaItem.filter(".under23").tooltip({title:"FISA EVENT - UNDER 23"}),$fisaItem.filter(".junior").tooltip({title:"FISA EVENT - JUNIOR"}),$fisaItem.filter(".university").tooltip({title:"FISA EVENT - UNIVERSITY"}),$fisaItem.filter(".masters").tooltip({title:"FISA EVENT - MASTERS"}),$fisaItem.filter(".coastal").tooltip({title:"FISA EVENT - COASTAL"}),$fisaItem.filter(".indoor").tooltip({title:"FISA EVENT - INDOOR"})})},events:function(start,end,timezone,callback){var s=moment(start).format("YYYY-MM-DD"),e=moment(end).format("YYYY-MM-DD");$.ajax({url:"/api/events/"+s+"/"+e+"/elite/",contentType:"text/javascript;charset=utf-8",dataType:"json",type:"GET",cache:!1,success:function(data){var events=[];calendarData=data;for(var i=0;i<data.length;i++)events.push({title:data[i].title,start:data[i].start,end:data[i].end,url:data[i].url,className:data[i].className});callback(events)},error:function(err){console.log("ajax error"),console.log(err)}})}});d3.fullCalendar=function(e,o){var init,options=$.extend({},defaults,o||{}),target=options.target,$target=$(target),$navigator=$(options.navigator);return init=function(){function renderGender(){function SetYear(year){$year.data("year",year),$year.html(year)}function SetMonth(month){$monthList.removeClass("active"),$monthList.eq(month).addClass("active")}var $year=$("[data-jshook=navigatorYear]",options.navigator),$monthList=$("[data-jshook=navigatorMonths] li",$navigator),$nextYear=$("[data-jshook=next]",$navigator),$prevYear=$("[data-jshook=previous]",$navigator),curDate=moment(),curYear=curDate.year(),curMonth=curDate.month();SetYear(curYear),SetMonth(curMonth),$monthList.on("click",function(){var month=$(this).data("month"),curYear=$year.data("year");SetMonth(month);var date=new Date(curYear,month,1);$target.fullCalendar("gotoDate",date)}),$nextYear.on("click",function(){var curYear=$year.data("year"),newVal=++curYear;SetYear(newVal),$target.fullCalendar("nextYear")}),$prevYear.on("click",function(){var curYear=$year.data("year"),newVal=--curYear;SetYear(newVal),$target.fullCalendar("prevYear")})}var viewport=$("div:visible","[data-jshook=currentViewPort]").data("viewport");return"xs"===viewport||"sm"===viewport?(win.location.href=options.mobileRedirect,!1):($target.fullCalendar(options),void renderGender())},{init:init}}}(jQuery,window);var selectedCountry;!function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.search=function(e,o){var init,options=$.extend({},defaults,o||{});return init=function(){function GoToCountry(selectedCountry){return null===selectedCountry||void 0===selectedCountry||""===selectedCountry?!1:(win.location.href="/athletes/country/"+selectedCountry,!1)}var $search=$(options.searchButton);$search.click(function(){var nameFilter=$("#filterName").val(),base="/athletes/search";return null===nameFilter||void 0===nameFilter||""===nameFilter?(GoToCountry(selectedCountry),!1):(base+=void 0!=selectedCountry&&""!=selectedCountry?"/country/"+selectedCountry+"/"+nameFilter:"/name/"+nameFilter,win.location.href=base,!1)});var countries=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:options.url,cacheKey:"aaa"}});countries.initialize();var $target=$(options.typeaheadTarget);$target.typeahead({minLength:1,highlight:!0},{name:"countries",displayKey:"value",source:countries.ttAdapter(),templates:{empty:['<div class="empty-message">No country match the current query</div>'].join("\n")}}),$target.bind("typeahead:selected",function(obj,datum,name){selectedCountry=datum.code,console.log(datum.code)}),$target.bind("typeahead:autocompleted",function(obj,datum,name){selectedCountry=datum.code,console.log(datum.code)})},{init:init}}}(jQuery,window);var selectedCountry;!function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.siteSearch=function(e,o){var init,options=$.extend({},defaults,o||{});return init=function(){var $search=$(options.searchButton),$textBox=$(options.searchTextBox);$search.click(function(){var nameFilter=$textBox.val(),base="/search/";return""!=nameFilter&&(win.location.href=base+nameFilter),!1})},{init:init}}}(jQuery,window);var selectedCountry;!function($,win){"use strict";var d3=win.deltatre,trace=d3.Trace,defaults={};d3.siteSearchTab=function(e,o){var $dom=e,options=$.extend({},defaults,o||{}),init;return init=function(){$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var $elem=$(e.target),url=$elem.data("url"),href=$elem.attr("href");""!=url&&$.ajax({url:url,dataType:"html",contentType:"text/html",success:function(data){var $href=$(href);$href.html(data);var $pluginContainer=$href.find("footer"),pluginSelector=$("[data-plugin=siteLoadMoreTab]"),pluginOptions=pluginSelector.data("options");"[object String]"==Object.prototype.toString.call(pluginOptions)&&(pluginOptions=eval("("+pluginOptions+")")),pluginSelector.d3Plugin(pluginOptions,"siteLoadMoreTab"),$("[data-jshook=stickyHeader]").trigger("sticky_kit:recalc")},error:function(){$(href).html("An error has occurred, prease retry.")}})})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,trace=d3.Trace,defaults={};d3.siteLoadMoreTab=function(e,o){var $dom=e,options=$.extend({},defaults,o||{}),init,searchPattern="/search/library/overview/{entity}/{page}/{word}";return init=function(){var button=$(options.button),searchWords=$(options.searchWords).val(),searchQuery=searchPattern.replace("{entity}",options.entity).replace("{page}",options.page).replace("{word}",searchWords);button.on("click",function(){$.ajax({url:searchQuery,dataType:"html",contentType:"text/html",success:function(data){var $target=$(options.target);$target.find("footer").replaceWith($(data).html());var $pluginContainer=$target.find("footer"),pluginSelector=$("[data-plugin=siteLoadMoreTab]"),pluginOptions=pluginSelector.data("options");"[object String]"==Object.prototype.toString.call(pluginOptions)&&(pluginOptions=eval("("+pluginOptions+")")),pluginSelector.d3Plugin(pluginOptions,"siteLoadMoreTab"),$("[data-jshook=stickyHeader]").trigger("sticky_kit:recalc")},error:function(){console.log("Error")}})})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.competitionNavigator=function(e,o){var init,initDecadeMenu,loadCategory,$dom=e,options=$.extend({},defaults,o||{});return init=function(){var defaultValue=options.defaultCompetition;if($dom.change(function(){loadCategory()}),void 0!=defaultValue&&""!=defaultValue){var $option=$("option",$dom).filter(function(){return $(this).html().toLowerCase()==defaultValue});null!=$option&&($option.attr("selected",!0),$dom.selectedIndex=$option.index(),loadCategory())}var url=location.href,idx=url.indexOf("#"),hash=-1!=idx?url.substring(idx+1):"";""===hash||"#"===hash?$("[data-jshook=None]","[data-jshook=documentLinks]").trigger("click"):$("[data-jshook="+hash+"]","[data-jshook=documentLinks]").trigger("click")},loadCategory=function(){var selection=$(":selected",this).val();void 0!==selection&&null!==selection&&""!==selection&&(selection=selection.replace(" ","-"),$(options.target).load(options.url+selection,function(){initDecadeMenu()}))},initDecadeMenu=function(){var $navMenu=$("[data-jshook=competitionDecade]","[data-jshook=competitionDataContainer]"),$decadeLinks=$("a",$navMenu),$competitionContent=$("[data-jshook=competitionContent]","[data-jshook=competitionDataContainer]");$decadeLinks.click(function(){var decade=$(this).data("decade");return $("li",$navMenu).removeClass("active"),$(this).parent().addClass("active"),$(this).parent().trigger("click"),$competitionContent.children().hide(),$("[data-decade="+decade+"]",$competitionContent).removeClass("hidden").show(),!0})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.toggleSearchBar=function(e,o){var init,options=$.extend({},defaults,o||{}),$button=$(options.button),$target=$(options.target);return init=function(){$button.on("click",function(){$target.toggleClass("opened"),$target.hasClass("opened")?$button.parent().addClass("active"):$button.parent().removeClass("active")})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.toggleSiteSearchBar=function(e,o){var init,options=$.extend({},defaults,o||{}),$button=$(options.button),$target=$(options.target);return init=function(){$button.on("click",function(){0==$("[data-jshook=searchFormInline]").length&&($target.toggleClass("opened"),$target.hasClass("opened")?$button.parent().addClass("active"):$button.parent().removeClass("active"))})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.listView=function(e,o){var container,init,getData,renderMonthMenu,renderComboBehaviour,renderList,options=$.extend({},defaults,o||{}),$navigator=$(options.navigator),$cboYear=$(options.selYear),$cboMonth=$(options.selMonth),template='{{#items}}<li class="list-item {{className}}"> <a href="{{url}}"> <div class="list-detail" data-label="Event Name" data-id="{{id}}">{{title}}</div><div class="list-detail" data-label="Community">{{community}}</div><div class="list-detail last" data-label="Date">{{eventDate}}</div></a></li>{{/items}}{{#empty}}No events for this month found.{{/empty}}';return init=function(){renderMonthMenu(),renderComboBehaviour();var current=moment();getData(current.month(),current.year())},renderList=function(data){var output=Mustache.render(template,data);$(options.target).html(output)},getData=function(month,year){var today=moment({year:year,month:month,day:1}),s=today.format("YYYY-MM-DD"),e=moment({year:today.year(),month:today.month(),day:today.daysInMonth()}).format("YYYY-MM-DD");$.ajax({url:"/api/events/"+s+"/"+e+"/elite/",contentType:"text/javascript;charset=utf-8",dataType:"json",type:"GET",cache:!1,success:function(data){container={items:data},renderList(container)},error:function(err){renderList({items:null})}})},renderMonthMenu=function(){function SetYear(year){$year.data("year",year),$year.html(year)}function SetMonth(month){$monthList.removeClass("active"),$monthList.eq(month).addClass("active")}var $year=$("[data-jshook=navigatorYear]",$navigator),$monthList=$("[data-jshook=navigatorMonths] li",$navigator),$nextYear=$("[data-jshook=next]",$navigator),$prevYear=$("[data-jshook=previous]",$navigator),curDate=moment(),curYear=curDate.year(),curMonth=curDate.month();SetYear(curYear),SetMonth(curMonth),$monthList.on("click",function(){var month=$(this).data("month"),curYear=$year.data("year");SetMonth(month),getData(month,curYear)}),$nextYear.on("click",function(){var curYear=$year.data("year"),curMonth=$(".active","[data-jshook=navigatorMonths]").data("month"),newVal=++curYear;SetYear(newVal),getData(curMonth,newVal)}),$prevYear.on("click",function(){var curYear=$year.data("year"),curMonth=$(".active","[data-jshook=navigatorMonths]").data("month"),newVal=--curYear;console.log(curMonth),SetYear(newVal),getData(curMonth,newVal)})},renderComboBehaviour=function(){$cboYear.on("change",function(){var curMonth=$("[data-jshook=selectMonth]").val(),curYear=$("option:selected",this).val();getData(curMonth,curYear)}),$cboMonth.on("change",function(){var curYear=$("[data-jshook=selectYear]").val(),curMonth=$("option:selected",this).val();getData(curMonth,curYear)})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{theme:"rounded-dots"});d3.scrollbar=function(e,o){var init,options=$.extend({},defaults,o||{}),$target=$(options.target);return init=function(){$target.mCustomScrollbar({theme:options.theme}),$target.find(".js-content").css({visibility:"visible"})},{init:init}}}(jQuery,window),function($,win,ga){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.documentNavigator=function(e,o){var init;$.extend({},defaults,o||{});return init=function(){$("a","[data-jshook=documentLinks]").click(function(){var current=$("[data-current=true]").data("jshook"),target=$(this).data("jshook"),$target=$("[data-jshook="+target+"]",".documentList");return current===target?!1:($("[data-current=true]").hide().attr("data-current",!1),$target.removeClass("hidden").show("fast").attr("data-current",!0),$("li","[data-jshook=documentLinks]").removeClass("active"),$(this).parent().addClass("active"),!0)});var url=location.href,idx=url.indexOf("#"),hash=-1!=idx?url.substring(idx+1):"";""===hash||"#"===hash?$("[data-jshook=None]","[data-jshook=documentLinks]").trigger("click"):$("[data-jshook="+hash+"]","[data-jshook=documentLinks]").trigger("click")},{init:init}}}(jQuery,window,ga),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.stickyHeader=function(e,o){var init,options=$.extend({},defaults,o||{}),$target=$(options.target);return init=function(){var defaultOptions={offset_top:-48};$target.stick_in_parent(defaultOptions)},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.newsletter=function(e,o){var init,showBanner,_opt=$.extend({},defaults,o||{}),$banners=$(_opt.bannerArea),$bannerInvalidType=($("[data-jshook=okMessage]",$banners),$("[data-jshook=invalidNewsletter]")),$bannerMissingField=$("[data-jshook=missingField]"),$bannerEmailExists=$("[data-jshook=emailExists]"),$bannerGeneric=$("[data-jshook=genericError]");return init=function(){$("form#newsletter").submit(function(event){event.preventDefault();var $button=$(_opt.registerButton),$checkboxes=$(_opt.checkboxes),isChecked=!1;return $button.button("loading"),$checkboxes.each(function(){isChecked=isChecked||$(this).prop("checked")}),isChecked?($.post("/follow-us/subscribe",$(this).serialize(),function(data){switch(data){case"0":win.location.href="/follow-us/newsletter/register/done";break;case"1":showBanner($bannerMissingField);break;case"2":showBanner($bannerInvalidType);break;case"4":showBanner($bannerEmailExists);break;default:showBanner($bannerGeneric)}$button.button("reset")}),!1):(showBanner($bannerInvalidType),$button.button("reset"),!1)})},showBanner=function($banner){$("div",$banners).each(function(){var $this=$(this);$this.hasClass("hidden")||$this.addClass("hidden")}),$banner.removeClass("hidden")},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.statsNavigator=function(e,o){var init,options=$.extend({},defaults,o||{}),$targets=$(options.targets),$navElements=$(options.nav),$infobutton=$(options.infobutton),$infotarget=$(options.infotarget);return init=function(){$("a",$navElements).click(function(){var $current=$(".active",$navElements),currentTarget=$("a",$current).data("jshook"),target=$(this).data("jshook"),$target=$("[data-jshook="+target+"]",$targets);return currentTarget==target?!1:($("li",$navElements).removeClass("active"),$("[data-jshook="+currentTarget+"]",$targets).addClass("hidden"),$("[data-jshook="+target+"]",$navElements).parent().addClass("active"),$target.removeClass("hidden").show("fast"),!1)}),$("a",$navElements).eq(0).trigger("click"),$infobutton.on("click",function(){$infotarget.toggle(500)})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.newsletterUnsubscribe=function(e,o){var init,showBanner,_opt=$.extend({},defaults,o||{}),$banners=($(),$(_opt.bannerArea)),$bannerMissingField=($("[data-jshook=okMessage]",$banners),$("[data-jshook=invalidNewsletter]"),$("[data-jshook=missingField]")),$bannerEmailExists=$("[data-jshook=emailExists"),$bannerGeneric=$("[data-jshook=genericError"),endpoint="/follow-us/newsletter/unsubscribe/action";return init=function(){$("[data-jshook=unsubscribe]").on("click",function(){var $button=$(this),userId=$(":input[name=userId]").val();event.preventDefault(),$button.button("loading"),$.post(endpoint,{userid:userId,bitwise:0},function(data){switch(data){case"0":win.location.href="/follow-us/newsletter/unsubscribe/done";break;default:showBanner($bannerGeneric)}$button.button("reset")})}),$("form#newsletter").on("submit",function(event){event.preventDefault();var $button=$(_opt.registerButton),$checkboxes=$(_opt.checkboxes),bitwise=0,userId=$(":input[name=userId]").val();$button.button("loading"),$checkboxes.each(function(){$(this).prop("checked")&&(bitwise|=$(this).val())});var obj={userid:userId,bitwise:bitwise};$.post(endpoint,$.param(obj),function(data){switch(data){case"0":win.location.href="/follow-us/newsletter/unsubscribe/updated";break;case"1":showBanner($bannerMissingField);break;case"2":showBanner($bannerInvalidNewsletterType);break;case"4":showBanner($bannerEmailExists);break;default:showBanner($bannerGeneric)}$button.button("reset")})})},showBanner=function($banner){$("div",$banners).each(function(){var $this=$(this);$this.hasClass("hidden")||$this.addClass("hidden")}),$banner.removeClass("hidden")},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.tabEnabler=function(e,o){var init,options=$.extend({},defaults,o||{});return init=function(){$("a:first",$(options.target)).tab("show")},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.scheduleManager=function(e,o){var init,options=$.extend({},defaults,o||{});return init=function(){$("a",$(options.target)).on("click",function(obj){var scheduleTitle=$(this).data("schedule-title");if($("[data-jshook=schedule-title]").text(scheduleTitle),"block"===$(".navbar-header",options.target).css("display")){var toCollapse=$("button",options.target).data("target");$("a.navbar-brand",options.target).text(scheduleTitle),$(toCollapse).collapse("hide")}})},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,trace=d3.Trace,defaults={};d3.videoHub=function(e,o){var init=function(){var $competitions=$("[data-jshook=competitionChanger]"),$hubTarget=$("[data-jshook=contentTarget]"),$detailTarget=$("[data-jshook=detailContainer]");$competitions.click(function(){return $hubTarget.load("/api/videohub/list/"+$(this).data("competitionid"),null,function(){return $("[data-jshook=videothumbnail]",$hubTarget).click(function(){return $detailTarget.load("/api/videohub/detail/"+$(this).data("videoid"),function(){window.scrollTo(0,0);var opt=$(this).find(".shareStack").data("options");"[object String]"==Object.prototype.toString.call(opt)&&(opt=eval("("+opt+")")),$("meta[name='og:title']").attr("content","Race Video"),$("meta[name='og:description']").attr("content",opt.message);var social=new win.deltatre.socialButtons($(this),opt);social.init(),stickyRecalc()}),!1}),null==hash||""==hash?$("[data-jshook=videothumbnail]",$hubTarget).first().trigger("click"):($("[data-videoid="+hash+"]",$hubTarget).trigger("click"),hash=""),stickyRecalc(),!1}),!1});var url=location.href,idx=url.indexOf("#"),hash=-1!=idx?url.substring(idx+1):"",competition=null!=hash?hash.split("-")[0].toLowerCase():"";""==competition?$competitions.first().trigger("click"):$("[data-competitioncode="+competition+"]").trigger("click"),stickyRecalc()},stickyRecalc=function(){var $stickyHeader=$("[data-jshook=stickyHeader]");null!=$stickyHeader&&$stickyHeader.trigger("sticky_kit:recalc")};return{init:init}}}(jQuery,window),function($,win,ga){"use strict";var d3=win.deltatre;d3.featuredHub=function(e,o){var init=function(){$.adaptiveBackground.run({normalizeTextColor:!0,success:function($img,data){var $baseSelector,color=win.tinycolor(data.color);null===$img.data("element")||void 0===$img.data("element")?($baseSelector=$img.parents(".hubTopImage"),$(".inner",$baseSelector).css("background",color.isDark()?color.darken().setAlpha(.65):color.lighten().setAlpha(.65)),$(".inner > a",$baseSelector).css("color",color.isDark()?"#fff":"#000"),$(".inner h3",$baseSelector).css("color",color.isDark()?color.lighten(75):color.darken(75)),$(".relatedText",$baseSelector).animate({opacity:1},2500)):($baseSelector=$img.parents(".featuredHubElementBig"),$(".relatedText",$baseSelector).css("background",color.isDark()?color.darken(20).setAlpha(.7):color.lighten(20).setAlpha(.7)),$(".relatedText a",$baseSelector).css("color",color.isDark()?"#fff":"#000"),$(".relatedText h3 a",$baseSelector).css("color",color.isDark()?color.lighten(95):color.darken(95)),$(".relatedText",$baseSelector).animate({opacity:1},2500))}}),$(".panel").on("show.bs.collapse",function(e){var year=$(e.currentTarget).attr("data-year");$(e.target).load("/api/news/featured/byyear/"+year,function(){var options={containerSelector:"[data-jshook=responsiveImage]",sourceSelector:".source",useDataAttributes:!0};$.mimeo(options),$.adaptiveBackground.run({normalizeTextColor:!0,success:function($img,data){var $baseSelector,color=win.tinycolor(data.color);null===$img.data("element")||void 0===$img.data("element")?($baseSelector=$img.parents(".hubTopImage"),$(".inner",$baseSelector).css("background",color.isDark()?color.darken().setAlpha(.65):color.lighten().setAlpha(.65)),$(".inner > a",$baseSelector).css("color",color.isDark()?"#fff":"#000"),$(".inner h3",$baseSelector).css("color",color.isDark()?color.lighten(75):color.darken(75)),$(".relatedText",$baseSelector).animate({opacity:1},10)):($baseSelector=$img.parents(".featuredHubElementBig"),$(".relatedText",$baseSelector).css("background",color.isDark()?color.darken(20).setAlpha(.7):color.lighten(20).setAlpha(.7)),$(".relatedText a",$baseSelector).css("color",color.isDark()?"#fff":"#000"),$(".relatedText h3 a",$baseSelector).css("color",color.isDark()?color.lighten(95):color.darken(95)),$(".relatedText",$baseSelector).animate({opacity:1},10))}})})})};return{init:init}}}(jQuery,window,ga),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.fadeTitle=function(e,o){var init,repos,options=$.extend({},defaults,o||{}),$target=$(options.target),$fakePlxTarget=$(options.fakePlxTarget),$fakePlxTargetWrap=$(options.fakePlxTargetWrap);init=function(){repos(),$target.removeClass("invisible"),$(window).on("resize",function(){repos()}),$(window).on("scroll",function(){var st=$(this).scrollTop();$target.css({opacity:1-st/700}),$fakePlxTarget.css({"margin-top":st/20+"px"}),st>400?$("[data-jshook='f-header']").addClass("active"):$("[data-jshook='f-header']").removeClass("active")})};var repos=function(){$target.css(matchMedia("(min-width: 768px)").matches?{"margin-left":"-"+$target.outerWidth()/2+"px",top:$fakePlxTargetWrap.outerHeight()/2-$target.outerHeight()/1.5+"px"}:{"margin-left":"0",top:"0"})};return{init:init}}}(jQuery,window),function($,win){
"use strict";var d3=win.deltatre;d3.selectLinkFollower=function(e){var $element=e,init=function(){$element.change(function(){0!==$(this).selectedIndex&&(win.location.href=this.value)})};return{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre;d3.eventResults=function(e){function getCluster(year,clusterSize){return Math.floor(year/clusterSize)}var $events=$("[data-jshook=competitionResultEntry]",e),$yearlist=$("[data-jshook=yearlist]",e),templateUrl="/assets/templates/eventYearCluster.html",template="",init=function(){if(!(null===$events||void 0===$events||$events.length<5)){$events.hide();var years=[];if($events.each(function(){years.push($(this).data("year"))}),years=_.sortBy(years,function(num){return num}).reverse(),!(years.length<=5)){var max=_.max(years),min=_.min(years),eventDensity=$events.length/(max-min),numClusters=Math.floor(Math.sqrt($events.length)),clusterSize=Math.floor((max-min)/numClusters),clusters=_.chain(years).map(function(year){return getCluster(year,clusterSize)}).value();$events.each(function(){$(this).attr("data-cluster",getCluster($(this).data("year"),clusterSize))}),console.log(eventDensity,numClusters,clusterSize);var currentYear=(new Date).getFullYear(),entries={clusters:[]};_.each(_.uniq(clusters),function(cluster){entries.clusters.push({cluster:cluster,label:cluster*clusterSize+" - "+(cluster*clusterSize+clusterSize-1>currentYear?currentYear:cluster*clusterSize+clusterSize-1)})}),$.get(templateUrl,function(data){template=data,Mustache.parse(template);var html=Mustache.render(template,entries);$yearlist.html(html),$("[data-jshook=eventYearCluster]",$yearlist).each(function(){$("a",this).on("click",function(){var cluster=$(this).data("cluster");return $events.hide(),$("[data-cluster="+cluster+"]").show(),$("li",$yearlist).removeClass("selected"),$(this).parent().addClass("selected"),!1})}),$("a","[data-jshook=eventYearCluster]").first().trigger("click")})}}};return{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.countDown=function(e,o){var init,doTheCountDown,$dom=e,_opt=$.extend({},defaults,o||{}),k=null;return init=function(){doTheCountDown()},doTheCountDown=function(){var expr=new Date(parseInt(_opt.expiresAt)),today=Date.now(),aDay=864e5,aHour=36e5,aMinute=6e4,millidiff=expr-today,dd=Math.floor(millidiff/aDay),hh=Math.floor(millidiff/aHour)-24*dd,mm=Math.floor(millidiff/aMinute)-24*dd*60-60*hh;$dom.find(".js-cdwn-days-value").html(dd),$dom.find(".js-cdwn-hours-value").html(hh),$dom.find(".js-cdwn-minutes-value").html(mm),k=window.setTimeout(function(){doTheCountDown()},_opt.refresh)},{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.rotterdamWidget=function(e,o){var $dom=e,init=($.extend({},defaults,o||{}),function(){$dom.on("shown.bs.collapse",function(){$(".royalSlider").royalSlider("updateSliderSize",!0)})});return{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{});d3.modalVideos=function(e,o){var $button=($.extend({},defaults,o||{}),$("[data-jshook=video-opener]")),$target=$("[data-jshook=youtubemodal]"),videoid=$button.data("videoid"),iFrameCode='<iframe width="[playerWidth]" height="[playerHeight]" scrolling="no" allowtransparency="true" allowfullscreen="true" src="http://www.youtube.com/embed/'+videoid+'?rel=0&wmode=transparent&showinfo=0&autoplay=1" frameborder="0"></iframe>',init=function(){$button.on("click",function(){var width=parseInt($(".modal-content").css("width"))-40,height=Math.ceil(width/1.3);$(".modal-body").html(iFrameCode.replace("[playerWidth]",width).replace("[playerHeight]",height)),$target.modal({keyboard:!0})}),$target.on("hidden.bs.modal",function(){$(".modal-body",$target).html("")})};return{init:init}}}(jQuery,window),function($,win){"use strict";var d3=win.deltatre,defaults=(d3.Trace,{}),slotNCounter=0;d3.advSwitcher=function(e,o){var $dom=e,options=$.extend({},defaults,o||{}),apiUrl="/api/advhome/{num}/",getLastIndex=function(){var key="lastIndexViewed"+slotNCounter,index=localStorage[key]||0;return localStorage[key]=++index,index},init=function(){if(slotNCounter++,!(options.count<=0)){var url=apiUrl.replace("{num}",getLastIndex()%parseInt(options.count));$.ajax({url:url}).done(function(data){$dom.find("[data-jshook=adv-body]").replaceWith($(data,"[data-jshook=adv-body]"));var el=$("[data-plugin=modalVideos]");el.d3Plugin("","modalVideos")})}};return{init:init}}}(jQuery,window);